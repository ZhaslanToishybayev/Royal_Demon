# üéÆ –ü–û–õ–ù–´–ô –û–¢–ß–Å–¢ –ü–û –ü–†–û–ï–ö–¢–£ ROYAL DEMONS
## 2D Roguelike Dungeon Crawler Game

---

**–î–∞—Ç–∞ —Å–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –æ—Ç—á—ë—Ç–∞:** 5 –Ω–æ—è–±—Ä—è 2025 –≥.
**–í–µ—Ä—Å–∏—è:** FINAL
**–ê–≤—Ç–æ—Ä –æ—Ç—á—ë—Ç–∞:** Claude Code
**–ü—Ä–æ–µ–∫—Ç:** Royal Demons - –ö–æ—Ä–æ–ª–µ–≤—Å–∫–∏–µ –î–µ–º–æ–Ω—ã

---

## üìã –û–ì–õ–ê–í–õ–ï–ù–ò–ï

1. [–í–í–ï–î–ï–ù–ò–ï](#1-–≤–≤–µ–¥–µ–Ω–∏–µ)
2. [–û–ë–©–ê–Ø –•–ê–†–ê–ö–¢–ï–†–ò–°–¢–ò–ö–ê –ü–†–û–ï–ö–¢–ê](#2-–æ–±—â–∞—è-—Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞-–ø—Ä–æ–µ–∫—Ç–∞)
3. [–ê–†–•–ò–¢–ï–ö–¢–£–†–ê –°–ò–°–¢–ï–ú–´](#3-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-—Å–∏—Å—Ç–µ–º—ã)
4. [–°–¢–†–£–ö–¢–£–†–ê –ü–†–û–ï–ö–¢–ê](#4-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)
5. [–ê–ù–ê–õ–ò–ó –ò–°–•–û–î–ù–û–ì–û –ö–û–î–ê](#5-–∞–Ω–∞–ª–∏–∑-–∏—Å—Ö–æ–¥–Ω–æ–≥–æ-–∫–æ–¥–∞)
6. [–ò–ì–†–û–í–´–ï –ú–ï–•–ê–ù–ò–ö–ò](#6-–∏–≥—Ä–æ–≤—ã–µ-–º–µ—Ö–∞–Ω–∏–∫–∏)
7. [–¢–ï–•–ù–ò–ß–ï–°–ö–ê–Ø –†–ï–ê–õ–ò–ó–ê–¶–ò–Ø](#7-—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è-—Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è)
8. [–°–ò–°–¢–ï–ú–´ –ò –ü–û–î–°–ò–°–¢–ï–ú–´](#8-—Å–∏—Å—Ç–µ–º—ã-–∏-–ø–æ–¥—Å–∏—Å—Ç–µ–º—ã)
9. [–ò–ì–†–û–í–´–ï –†–ï–°–£–†–°–´](#9-–∏–≥—Ä–æ–≤—ã–µ-—Ä–µ—Å—É—Ä—Å—ã)
10. [–õ–û–ö–ê–õ–ò–ó–ê–¶–ò–Ø –ò –ò–ù–¢–ï–†–ù–ê–¶–ò–û–ù–ê–õ–ò–ó–ê–¶–ò–Ø](#10-–ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è-–∏-–∏–Ω—Ç–µ—Ä–Ω–∞—Ü–∏–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è)
11. [–ê–ù–ê–õ–ò–ó –ö–ê–ß–ï–°–¢–í–ê –ö–û–î–ê](#11-–∞–Ω–∞–ª–∏–∑-–∫–∞—á–µ—Å—Ç–≤–∞-–∫–æ–¥–∞)
12. [–ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø –ò –£–õ–£–ß–®–ï–ù–ò–Ø](#12-–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è-–∏-—É–ª—É—á—à–µ–Ω–∏—è)
13. [–¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï](#13-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
14. [–î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø](#14-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)
15. [–ó–ê–í–ò–°–ò–ú–û–°–¢–ò –ò –ë–ò–ë–õ–ò–û–¢–ï–ö–ò](#15-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏-–∏-–±–∏–±–ª–∏–æ—Ç–µ–∫–∏)
16. [–°–ë–û–†–ö–ê –ò –†–ê–ó–í–Å–†–¢–´–í–ê–ù–ò–ï](#16-—Å–±–æ—Ä–∫–∞-–∏-—Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ)
17. [–ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–¨](#17-–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å)
18. [–ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨](#18-–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)
19. [–ú–ê–°–®–¢–ê–ë–ò–†–£–ï–ú–û–°–¢–¨ –ò –†–ê–°–®–ò–†–Ø–ï–ú–û–°–¢–¨](#19-–º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å-–∏-—Ä–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å)
20. [–°–¢–ê–¢–ò–°–¢–ò–ö–ê –ü–†–û–ï–ö–¢–ê](#20-—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞-–ø—Ä–æ–µ–∫—Ç–∞)
21. [–í–´–í–û–î–´](#21-–≤—ã–≤–æ–¥—ã)
22. [–†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò](#22-—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏)
23. [–ü–õ–ê–ù–´ –†–ê–ó–í–ò–¢–ò–Ø](#23-–ø–ª–∞–Ω—ã-—Ä–∞–∑–≤–∏—Ç–∏—è)
24. [–ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï](#24-–∑–∞–∫–ª—é—á–µ–Ω–∏–µ)

---

## 1. –í–í–ï–î–ï–ù–ò–ï

### 1.1 –¶–µ–ª—å –æ—Ç—á—ë—Ç–∞

–î–∞–Ω–Ω—ã–π –æ—Ç—á—ë—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ø—Ä–æ–µ–∫—Ç–∞ **Royal Demons** - 2D roguelike –∏–≥—Ä—ã –≤ –∂–∞–Ω—Ä–µ Dungeon Crawler, —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–π –Ω–∞ —è–∑—ã–∫–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è Java —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∏–≥—Ä–æ–≤–æ–≥–æ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞ FXGL. –¶–µ–ª—å –æ—Ç—á—ë—Ç–∞ - –ø—Ä–æ–≤–µ—Å—Ç–∏ –ø–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã, –∫–æ–¥–∞, –º–µ—Ö–∞–Ω–∏–∫, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∏ –æ–±—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞.

### 1.2 –û–±–ª–∞—Å—Ç—å –∞–Ω–∞–ª–∏–∑–∞

–û—Ç—á—ë—Ç –æ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –∞—Å–ø–µ–∫—Ç—ã –ø—Ä–æ–µ–∫—Ç–∞:
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –∏ –¥–∏–∑–∞–π–Ω —Å–∏—Å—Ç–µ–º—ã
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ –∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –∫–æ–¥–∞
- –ò–≥—Ä–æ–≤—ã–µ –º–µ—Ö–∞–Ω–∏–∫–∏ –∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞ –∏ –µ–≥–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º
- –°–∏—Å—Ç–µ–º—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
- –†–µ—Å—É—Ä—Å—ã –∏–≥—Ä—ã –∏ –∏—Ö –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è
- –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è –∏ –∏–Ω—Ç–µ—Ä–Ω–∞—Ü–∏–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è

### 1.3 –ú–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è

–ê–Ω–∞–ª–∏–∑ –≤—ã–ø–æ–ª–Ω–µ–Ω –Ω–∞ –æ—Å–Ω–æ–≤–µ:
- –ò–∑—É—á–µ–Ω–∏—è –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞ –ø—Ä–æ–µ–∫—Ç–∞ (160 Java —Ñ–∞–π–ª–æ–≤)
- –ê–Ω–∞–ª–∏–∑–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ (80+ MD —Ñ–∞–π–ª–æ–≤)
- –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞
- –ò–∑—É—á–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- –ê–Ω–∞–ª–∏–∑–∞ –∏–≥—Ä–æ–≤—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∫–∏ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–∫—Ä—ã—Ç–∏—è

---

## 2. –û–ë–©–ê–Ø –•–ê–†–ê–ö–¢–ï–†–ò–°–¢–ò–ö–ê –ü–†–û–ï–ö–¢–ê

### 2.1 –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

**Royal Demons** - —ç—Ç–æ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è 2D –∏–≥—Ä–∞ –≤ –∂–∞–Ω—Ä–µ roguelike dungeon crawler, –≥–¥–µ –∏–≥—Ä–æ–∫ —É–ø—Ä–∞–≤–ª—è–µ—Ç –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–º –≤ –ø–æ–¥–∑–µ–º–µ–ª—å–µ, —Å—Ä–∞–∂–∞–µ—Ç—Å—è —Å –≤—Ä–∞–≥–∞–º–∏, —Å–æ–±–∏—Ä–∞–µ—Ç –ø—Ä–µ–¥–º–µ—Ç—ã –∏ –ø—Ä–æ–∫–∞—á–∏–≤–∞–µ—Ç—Å—è. –ò–≥—Ä–∞ –Ω–∞–ø–∏—Å–∞–Ω–∞ –Ω–∞ Java —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º FXGL (JavaFX Game Library) –∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–º–µ—Ä —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏–≥—Ä –Ω–∞ Java.

### 2.2 –û—Å–Ω–æ–≤–Ω—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| **–ñ–∞–Ω—Ä** | 2D Roguelike, Dungeon Crawler |
| **–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞** | Windows, Linux, macOS |
| **–Ø–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è** | Java 21+ |
| **–ò–≥—Ä–æ–≤–æ–π –¥–≤–∏–∂–æ–∫** | FXGL 17.3 |
| **UI —Ñ—Ä–µ–π–º–≤–æ—Ä–∫** | JavaFX 21.0.2 |
| **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** | –ú–æ–¥—É–ª—å–Ω–∞—è (ECS-–ø–æ–¥–æ–±–Ω–∞—è) |
| **–†–∞–∑–º–µ—Ä –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–∞** | ~47 MB |
| **–°—Ç–∞—Ç—É—Å** | –ê–∫—Ç–∏–≤–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ |

### 2.3 –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

#### –ò–≥—Ä–æ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
- **–ü—Ä–æ—Ü–µ–¥—É—Ä–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–∞—Ä—Ç** - 10 –∫–æ–º–Ω–∞—Ç —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏
- **–†–∞–∑–Ω–æ–æ–±—Ä–∞–∑–Ω–æ–µ –æ—Ä—É–∂–∏–µ** - 8 —Ç–∏–ø–æ–≤ –æ—Ä—É–∂–∏—è —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º–∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º–∏
- **–°–∏—Å—Ç–µ–º–∞ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏** - 5 —É—Ä–æ–≤–Ω–µ–π —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ (peaceful –¥–æ nightmare)
- **–°–∏—Å—Ç–µ–º–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π** - 7 –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π –¥–ª—è –º–æ—Ç–∏–≤–∞—Ü–∏–∏ –∏–≥—Ä–æ–∫–∞
- **–õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è** - –ø–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä—É—Å—Å–∫–æ–≥–æ –∏ –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ —è–∑—ã–∫–æ–≤

#### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
- **–ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** - —á–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –º–æ–¥—É–ª–∏
- **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω–∞ Entity-Component
- **–°–∏—Å—Ç–µ–º–∞ –∫–æ–ª–ª–∏–∑–∏–π** - 15 —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
- **–ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
- **–ö—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ—Å—Ç—å** - —Ä–∞–±–æ—Ç–∞ –Ω–∞ –≤—Å–µ—Ö –æ—Å–Ω–æ–≤–Ω—ã—Ö –û–°

### 2.4 –¶–µ–ª–µ–≤–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è

–ò–≥—Ä–∞ –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞ –Ω–∞:
- –õ—é–±–∏—Ç–µ–ª–µ–π –∂–∞–Ω—Ä–∞ roguelike
- –ò–≥—Ä–æ–∫–æ–≤, –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞—é—â–∏—Ö —Å–ª–æ–∂–Ω—ã–π –≥–µ–π–º–ø–ª–µ–π
- –¶–µ–Ω–∏—Ç–µ–ª–µ–π –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏—Ö dungeon crawler'–æ–≤
- –ò–≥—Ä–æ–∫–æ–≤, –≥–æ–≤–æ—Ä—è—â–∏—Ö –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ (–ø–æ–ª–Ω–∞—è –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è)

---

## 3. –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –°–ò–°–¢–ï–ú–´

### 3.1 –û–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ü—Ä–æ–µ–∫—Ç –ø–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –æ—Å–Ω–æ–≤–µ **–º–æ–¥—É–ª—å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã** —Å —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ **ECS (Entity-Component-System)** –ø–∞—Ç—Ç–µ—Ä–Ω–∞. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∞ —Å —É—á—ë—Ç–æ–º —Å–ª–µ–¥—É—é—â–∏—Ö –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤:

#### –ü—Ä–∏–Ω—Ü–∏–ø—ã –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã:

1. **–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å** - —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–∑–¥–µ–ª–µ–Ω–∞ –Ω–∞ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ –º–æ–¥—É–ª–∏
2. **–ö—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ—Å—Ç—å** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö –û–°
3. **–†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å** - –ø—Ä–æ—Å—Ç–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
4. **–¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å** - –∏–∑–æ–ª—è—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
5. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º–æ—Å—Ç—å** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —á–µ—Ä–µ–∑ JSON/YAML —Ñ–∞–π–ª—ã

### 3.2 –ú–æ–¥—É–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞

–û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã - **ModuleManager** (src/main/java/uwu/openjfx/core/ModuleManager.java), –∫–æ—Ç–æ—Ä—ã–π —É–ø—Ä–∞–≤–ª—è–µ—Ç:

#### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å ModuleManager:

```java
public class ModuleManager {
    // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–æ–¥—É–ª—è–º–∏
    private final Map<String, GameModule> modules = new ConcurrentHashMap<>();
    private final List<String> initializationOrder = new CopyOnWriteArrayList<>();
    private final Map<String, Set<String>> dependencyGraph = new ConcurrentHashMap<>();

    // –û—Å–Ω–æ–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏:
    // - registerModule() - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –º–æ–¥—É–ª—è
    // - initializeAll() - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π
    // - resolveInitializationOrder() - —Ç–æ–ø–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
    // - shutdownAll() - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ
}
```

#### –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–æ–¥—É–ª–∏:

1. **CoreModule** - –±–∞–∑–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å–∏—Å—Ç–µ–º—ã
   - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
   - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

2. **AssetModule** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞–º–∏
   - –ó–∞–≥—Ä—É–∑–∫–∞ –∞—Å—Å–µ—Ç–æ–≤
   - –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
   - –ö—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞

### 3.3 –¢–æ–ø–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –º–æ–¥—É–ª–µ–π

ModuleManager —Ä–µ–∞–ª–∏–∑—É–µ—Ç –∞–ª–≥–æ—Ä–∏—Ç–º —Ç–æ–ø–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–π —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–æ—Ä—è–¥–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –º–æ–¥—É–ª–µ–π:

```java
private List<String> resolveInitializationOrder() {
    // –ê–ª–≥–æ—Ä–∏—Ç–º –ö–∞–Ω–∞ –¥–ª—è —Ç–æ–ø–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–π —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
    boolean progress = true;
    while (progress && processed.size() < allModules.size()) {
        // –ü–æ–∏—Å–∫ –º–æ–¥—É–ª—è, –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∫–æ—Ç–æ—Ä–æ–≥–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã
        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ orderedModules
    }
}
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- –ö–æ–Ω—Ç—Ä–æ–ª—å –ø–æ—Ä—è–¥–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

### 3.4 –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –º–æ–¥—É–ª—è

–ö–∞–∂–¥—ã–π –º–æ–¥—É–ª—å –ø—Ä–æ—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ —Å–ª–µ–¥—É—é—â–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è:

1. **UNLOADED** - –º–æ–¥—É–ª—å –∑–∞–≥—Ä—É–∂–µ–Ω, –Ω–æ –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
2. **INITIALIZING** - –ø—Ä–æ—Ü–µ—Å—Å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
3. **ACTIVE** - –º–æ–¥—É–ª—å –∞–∫—Ç–∏–≤–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
4. **SHUTTING_DOWN** - –ø—Ä–æ—Ü–µ—Å—Å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
5. **ERROR** - –æ—à–∏–±–∫–∞ –≤ –º–æ–¥—É–ª–µ

```java
public enum ModuleState {
    UNLOADED, INITIALIZING, ACTIVE, SHUTTING_DOWN, ERROR
}
```

### 3.5 Graceful Shutdown

–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã:

1. **–û–±—Ä–∞—Ç–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫** - –º–æ–¥—É–ª–∏ –∑–∞–≤–µ—Ä—à–∞—é—Ç—Å—è –≤ –æ–±—Ä–∞—Ç–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
2. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
3. **–ó–∞–∫—Ä—ã—Ç–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ —Ñ–∞–π–ª–æ–≤ –∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
4. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –∑–∞–ø–∏—Å—å –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –≤ –ª–æ–≥

---

## 4. –°–¢–†–£–ö–¢–£–†–ê –ü–†–û–ï–ö–¢–ê

### 4.1 –û–±—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π

```
Royal_Demons-main/
‚îú‚îÄ‚îÄ src/main/java/uwu/openjfx/          # –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ Java (160 —Ñ–∞–π–ª–æ–≤)
‚îú‚îÄ‚îÄ src/main/resources/                 # –†–µ—Å—É—Ä—Å—ã –∏–≥—Ä—ã
‚îú‚îÄ‚îÄ src/test/java/                      # –¢–µ—Å—Ç—ã (18 —Ñ–∞–π–ª–æ–≤)
‚îú‚îÄ‚îÄ build/                              # –°–±–æ—Ä–∫–∞ Gradle
‚îú‚îÄ‚îÄ releases/                           # –ì–æ—Ç–æ–≤—ã–µ —Ä–µ–ª–∏–∑—ã
‚îú‚îÄ‚îÄ docs/                               # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ build.gradle                        # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–±–æ—Ä–∫–∏
‚îú‚îÄ‚îÄ gradle.properties                   # –°–≤–æ–π—Å—Ç–≤–∞ Gradle
‚îú‚îÄ‚îÄ run-linux.sh / run-windows.bat      # –°–∫—Ä–∏–ø—Ç—ã –∑–∞–ø—É—Å–∫–∞
‚îú‚îÄ‚îÄ build-linux.sh / build-release.sh   # –°–∫—Ä–∏–ø—Ç—ã —Å–±–æ—Ä–∫–∏
‚îî‚îÄ‚îÄ *.md                                # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

### 4.2 –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞

#### –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞–∫–µ—Ç—ã (160 —Ñ–∞–π–ª–æ–≤):

##### üéØ **core/** - –Ø–¥—Ä–æ —Å–∏—Å—Ç–µ–º—ã (7 —Ñ–∞–π–ª–æ–≤)
- `MainApp.java` - –ì–ª–∞–≤–Ω—ã–π –∫–ª–∞—Å—Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- `GameConstants.java` - –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã
- `GameLogger.java` - –°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- `ModuleManager.java` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–æ–¥—É–ª—è–º–∏
- `ResourceManager.java` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞–º–∏
- `Platform.java` - –ö—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ—Å—Ç—å
- `ConfigManager.java` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π

##### üéÆ **components/** - –ò–≥—Ä–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (38 —Ñ–∞–π–ª–æ–≤)
–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–≥—Ä–æ–≤—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤:
- `PlayerComponent.java` - –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∏–≥—Ä–æ–∫–∞
- `EnemyComponent.java` - –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –≤—Ä–∞–≥–∞
- `BossComponent.java` - –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –±–æ—Å—Å–∞
- `CreatureComponent.java` - –ë–∞–∑–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å—É—â–µ—Å—Ç–≤
- `WeaponAnimationComponent.java` - –ê–Ω–∏–º–∞—Ü–∏–∏ –æ—Ä—É–∂–∏—è
- `ProjectileAnimationComponent.java` - –ê–Ω–∏–º–∞—Ü–∏–∏ —Å–Ω–∞—Ä—è–¥–æ–≤
- `ComboManager.java` - –°–∏—Å—Ç–µ–º–∞ –∫–æ–º–±–æ
- `PlayerManager.java` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–æ–º
- +32 –¥—Ä—É–≥–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

##### ‚öîÔ∏è **weapons/** - –°–∏—Å—Ç–µ–º–∞ –æ—Ä—É–∂–∏—è (13 —Ñ–∞–π–ª–æ–≤)
- `Weapon.java` - –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –æ—Ä—É–∂–∏—è
- `GoldenSword0/1/2.java` - –ó–æ–ª–æ—Ç—ã–µ –º–µ—á–∏ (3 —É—Ä–æ–≤–Ω—è)
- `Bow0/1/2.java` - –õ—É–∫–∏ (3 —É—Ä–æ–≤–Ω—è)
- `MagicStaff0/1/2.java` - –ú–∞–≥–∏—á–µ—Å–∫–∏–µ –ø–æ—Å–æ—Ö–∏ (3 —É—Ä–æ–≤–Ω—è)
- `HeavySword.java` - –¢—è–∂—ë–ª—ã–π –º–µ—á
- `WeaponFactory.java` - –§–∞–±—Ä–∏–∫–∞ –æ—Ä—É–∂–∏—è
- `WeaponAnimationComponent.java` - –ê–Ω–∏–º–∞—Ü–∏–∏ –æ—Ä—É–∂–∏—è

##### üí• **collision/** - –°–∏—Å—Ç–µ–º–∞ –∫–æ–ª–ª–∏–∑–∏–π (15 —Ñ–∞–π–ª–æ–≤)
–°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–ª–ª–∏–∑–∏–π:
- `PlayerAttackEnemyCollisionHandler.java`
- `EnemyAttackPlayerCollisionHandler.java`
- `PlayerCoinCollisionHandler.java`
- `PlayerChestCollisionHandler.java`
- `PlayerDoorCollisionHandler.java`
- `PlayerNPCCollisionHandler.java`
- `PlayerSpikeCollisionHandler.java`
- +8 –¥—Ä—É–≥–∏—Ö –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

##### üó∫Ô∏è **map/** - –ö–∞—Ä—Ç—ã –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è (8 —Ñ–∞–π–ª–æ–≤)
- `GameMap.java` - –û—Å–Ω–æ–≤–Ω–∞—è –∫–∞—Ä—Ç–∞
- `EnhancedGameMap.java` - –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∫–∞—Ä—Ç–∞
- `Room.java` - –ö–ª–∞—Å—Å –∫–æ–º–Ω–∞—Ç—ã
- `ProgressiveMapGenerator.java` - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —É—Ä–æ–≤–Ω–µ–π
- +4 –¥—Ä—É–≥–∏—Ö —Ñ–∞–π–ª–∞

##### üé® **hud/ –∏ ui/** - –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å (7 —Ñ–∞–π–ª–æ–≤)
- `GameHUD.java` - –ò–≥—Ä–æ–≤–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- `EnhancedGameHUD.java` - –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π HUD
- `LanguageSelector.java` - –í—ã–±–æ—Ä —è–∑—ã–∫–∞
- `LocalizedButton.java` - –õ–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–Ω–æ–ø–∫–∏
- +3 –¥—Ä—É–≥–∏—Ö —Ñ–∞–π–ª–∞

##### üéµ **audio/** - –ê—É–¥–∏–æ —Å–∏—Å—Ç–µ–º–∞ (3 —Ñ–∞–π–ª–∞)
- `AudioManager.java` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–≤—É–∫–æ–º
- `SoundLoader.java` - –ó–∞–≥—Ä—É–∑–∫–∞ –∑–≤—É–∫–æ–≤
- +1 —Ñ–∞–π–ª

##### üíæ **save/** - –°–∏—Å—Ç–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–π (5 —Ñ–∞–π–ª–æ–≤)
- `GameSaveManager.java` - –ú–µ–Ω–µ–¥–∂–µ—Ä —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–π
- `GameSaveData.java` - –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
- `GameSaveService.java` - –°–µ—Ä–≤–∏—Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
- +2 –¥—Ä—É–≥–∏—Ö —Ñ–∞–π–ª–∞

##### üåç **i18n/** - –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è (2 —Ñ–∞–π–ª–∞)
- `LocalizationManager.java` - –ú–µ–Ω–µ–¥–∂–µ—Ä –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏
- `EnhancedLocalizationManager.java` - –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è

##### üé™ **–î—Ä—É–≥–∏–µ –ø–∞–∫–µ—Ç—ã:**
- `behaviors/` - –ü–æ–≤–µ–¥–µ–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤ (8 —Ñ–∞–π–ª–æ–≤)
- `items/` - –°–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ (4 —Ñ–∞–π–ª–∞)
- `visual/` - –í–∏–∑—É–∞–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã (3 —Ñ–∞–π–ª–∞)
- `input/` - –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–≤–æ–¥–∞ (12 —Ñ–∞–π–ª–æ–≤)
- `cutscenes/` - –ó–∞—Å—Ç–∞–≤–∫–∏ (3 —Ñ–∞–π–ª–∞)
- `quest/` - –°–∏—Å—Ç–µ–º–∞ –∫–≤–µ—Å—Ç–æ–≤ (6 —Ñ–∞–π–ª–æ–≤)
- `progression/` - –ü—Ä–æ–≥—Ä–µ—Å—Å–∏—è (1 —Ñ–∞–π–ª)
- `achievements/` - –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è (1 —Ñ–∞–π–ª)

### 4.3 –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ—Å—É—Ä—Å–æ–≤

#### üìÅ **src/main/resources/**

##### üñºÔ∏è **textures/** - –¢–µ–∫—Å—Ç—É—Ä—ã (150+ —Ñ–∞–π–ª–æ–≤)
```
textures/
‚îú‚îÄ‚îÄ creatures/              # –°—É—â–µ—Å—Ç–≤–∞
‚îÇ   ‚îú‚îÄ‚îÄ ally/              # –°–æ—é–∑–Ω–∏–∫–∏ (–ø—Ä–∏–Ω—Ü–µ—Å—Å–∞, —ç–ª—å—Ñ—ã, —Ñ–µ–∏)
‚îÇ   ‚îú‚îÄ‚îÄ boss/              # –ë–æ—Å—Å—ã (–ì–æ–ª–µ–º, –°—Ç—Ä–∞–∂ –ª–µ—Å–∞, –í–æ–ª—à–µ–±–Ω–∏–∫)
‚îÇ   ‚îú‚îÄ‚îÄ miniBoss/          # –ú–∏–Ω–∏-–±–æ—Å—Å—ã (–û—Ä–∫, –¢—Ä–æ–ª–ª—å, –î–µ–º–æ–Ω)
‚îÇ   ‚îú‚îÄ‚îÄ minions/           # –û–±—ã—á–Ω—ã–µ –º–æ–±—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ normal/        # –ù–æ—Ä–º–∞–ª—å–Ω—ã–µ –≤—Ä–∞–≥–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ forest/        # –õ–µ—Å–Ω—ã–µ –≤—Ä–∞–≥–∏
‚îÇ   ‚îî‚îÄ‚îÄ npc/               # NPC
‚îú‚îÄ‚îÄ weapons/               # –û—Ä—É–∂–∏–µ –∏ –∞–Ω–∏–º–∞—Ü–∏–∏ –∞—Ç–∞–∫
‚îú‚îÄ‚îÄ ui/                    # –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îÇ   ‚îú‚îÄ‚îÄ inventory/         # –ò–∫–æ–Ω–∫–∏ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è
‚îÇ   ‚îî‚îÄ‚îÄ weapons/           # –ò–∫–æ–Ω–∫–∏ –æ—Ä—É–∂–∏—è
‚îú‚îÄ‚îÄ items/                 # –ü—Ä–µ–¥–º–µ—Ç—ã (–∑–µ–ª—å—è, –º–æ–Ω–µ—Ç—ã, —Å–µ—Ä–¥—Ü–∞)
‚îú‚îÄ‚îÄ particles/             # –ß–∞—Å—Ç–∏—Ü—ã –∏ —ç—Ñ—Ñ–µ–∫—Ç—ã
‚îî‚îÄ‚îÄ background/            # –§–æ–Ω—ã
```

##### üîä **sounds/** - –ó–≤—É–∫–∏ (40+ —Ñ–∞–π–ª–æ–≤)
```
sounds/
‚îú‚îÄ‚îÄ ui/                    # –ó–≤—É–∫–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
‚îÇ   ‚îú‚îÄ‚îÄ button_click.wav   # –ù–∞–∂–∞—Ç–∏–µ –∫–Ω–æ–ø–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ chest_open.wav     # –û—Ç–∫—Ä—ã—Ç–∏–µ —Å—É–Ω–¥—É–∫–∞
‚îÇ   ‚îî‚îÄ‚îÄ coin_pickup.wav    # –°–±–æ—Ä –º–æ–Ω–µ—Ç
‚îú‚îÄ‚îÄ skills/                # –ó–≤—É–∫–∏ –∞—Ç–∞–∫
‚îÇ   ‚îú‚îÄ‚îÄ sword_attack.wav   # –ê—Ç–∞–∫–∞ –º–µ—á–æ–º
‚îÇ   ‚îú‚îÄ‚îÄ fire_explosion.wav # –í–∑—Ä—ã–≤ –æ–≥–Ω—è
‚îÇ   ‚îî‚îÄ‚îÄ bow_shot.wav       # –í—ã—Å—Ç—Ä–µ–ª –∏–∑ –ª—É–∫–∞
‚îú‚îÄ‚îÄ mob/                   # –ó–≤—É–∫–∏ –º–æ–±–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ goblin_die.wav     # –°–º–µ—Ä—Ç—å –≥–æ–±–ª–∏–Ω–∞
‚îÇ   ‚îú‚îÄ‚îÄ orc_attack.wav     # –ê—Ç–∞–∫–∞ –æ—Ä–∫–∞
‚îÇ   ‚îî‚îÄ‚îÄ skeleton_hurt.wav  # –†–∞–Ω–µ–Ω–∏–µ —Å–∫–µ–ª–µ—Ç–∞
‚îî‚îÄ‚îÄ steps2.wav, die.wav    # –û–±—â–∏–µ –∑–≤—É–∫–∏
```

##### üéº **music/** - –ú—É–∑—ã–∫–∞ (6 —Ñ–∞–π–ª–æ–≤)
```
music/
‚îú‚îÄ‚îÄ boss/                  # –ú—É–∑—ã–∫–∞ –±–æ—Å—Å-–±–∏—Ç–≤
‚îÇ   ‚îî‚îÄ‚îÄ final_boss_theme.mp3
‚îú‚îÄ‚îÄ end/                   # –§–∏–Ω–∞–ª—å–Ω–∞—è –º—É–∑—ã–∫–∞
‚îÇ   ‚îî‚îÄ‚îÄ victory_theme.mp3
‚îú‚îÄ‚îÄ MainMenu.mp3           # –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
‚îî‚îÄ‚îÄ evil4.mp3              # –û—Å–Ω–æ–≤–Ω–∞—è —Ç–µ–º–∞ –∏–≥—Ä—ã
```

##### üó∫Ô∏è **levels/tmx/** - –ö–∞—Ä—Ç—ã —É—Ä–æ–≤–Ω–µ–π (17 —Ñ–∞–π–ª–æ–≤)
```
levels/tmx/
‚îú‚îÄ‚îÄ initialRoom.tmx        # –ù–∞—á–∞–ª—å–Ω–∞—è –∫–æ–º–Ω–∞—Ç–∞
‚îú‚îÄ‚îÄ bossRoom.tmx           # –ö–æ–º–Ω–∞—Ç–∞ –±–æ—Å—Å–∞
‚îú‚îÄ‚îÄ challengeRoom.tmx      # –ö–æ–º–Ω–∞—Ç–∞ –∏—Å–ø—ã—Ç–∞–Ω–∏–π
‚îú‚îÄ‚îÄ finalWinRoom.tmx       # –ö–æ–º–Ω–∞—Ç–∞ –ø–æ–±–µ–¥—ã
‚îú‚îÄ‚îÄ weaponsShowcaseRoom.tmx # –í–∏—Ç—Ä–∏–Ω–∞ –æ—Ä—É–∂–∏—è
‚îú‚îÄ‚îÄ small_room_1.tmx       # –ú–∞–ª–∞—è –∫–æ–º–Ω–∞—Ç–∞ 1
‚îú‚îÄ‚îÄ small_room_2.tmx       # –ú–∞–ª–∞—è –∫–æ–º–Ω–∞—Ç–∞ 2
‚îú‚îÄ‚îÄ 4_door_1.tmx           # 4 –¥–≤–µ—Ä–∏ 1
‚îú‚îÄ‚îÄ 4_door_2.tmx           # 4 –¥–≤–µ—Ä–∏ 2
‚îî‚îÄ‚îÄ [9 –¥—Ä—É–≥–∏—Ö –∫–∞—Ä—Ç]
```

##### üñºÔ∏è **animations/** - –ê–Ω–∏–º–∞—Ü–∏–∏ (4 —Ñ–∞–π–ª–∞)
- `Royal-Demons-sword-man.gif` - –ê–Ω–∏–º–∞—Ü–∏—è –º–µ—á–Ω–∏–∫–∞
- `Royal-Demons-boss-fight.gif` - –ë–æ–π —Å –±–æ—Å—Å–æ–º
- `Royal-Demons-dungeon.gif` - –ü–æ–¥–∑–µ–º–µ–ª—å–µ
- `Royal_Demons.png` - –û–±—â–∏–π –ª–æ–≥–æ—Ç–∏–ø

### 4.4 –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

#### üìÅ **config/**

##### üéÆ **difficulty.json** - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
```json
{
  "peaceful": {
    "enemyHealthMultiplier": 0.5,
    "enemyDamageMultiplier": 0.5,
    "playerDamageMultiplier": 1.5,
    "description": "–†–∞—Å—Å–ª–∞–±–ª–µ–Ω–Ω—ã–π —Ä–µ–∂–∏–º"
  },
  "easy": {
    "enemyHealthMultiplier": 0.75,
    "enemyDamageMultiplier": 0.8,
    "playerDamageMultiplier": 1.2,
    "description": "–õ—ë–≥–∫–∏–π —Ä–µ–∂–∏–º"
  },
  "normal": {
    "enemyHealthMultiplier": 1.0,
    "enemyDamageMultiplier": 1.0,
    "playerDamageMultiplier": 1.0,
    "description": "–°–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ–ø—ã—Ç"
  },
  "hard": {
    "enemyHealthMultiplier": 1.5,
    "enemyDamageMultiplier": 1.3,
    "playerDamageMultiplier": 0.9,
    "description": "–°–ª–æ–∂–Ω—ã–π —Ä–µ–∂–∏–º"
  },
  "nightmare": {
    "enemyHealthMultiplier": 2.0,
    "enemyDamageMultiplier": 1.5,
    "playerDamageMultiplier": 0.8,
    "description": "–≠–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å"
  }
}
```

##### ‚öîÔ∏è **weapons.json** - –ë–∞–ª–∞–Ω—Å –æ—Ä—É–∂–∏—è
```json
{
  "golden_sword_0": {
    "attackDamage": 50,
    "attackSpeed": 1.2,
    "criticalChance": 0.05
  },
  "golden_sword_1": {
    "attackDamage": 70,
    "attackSpeed": 1.1,
    "criticalChance": 0.08
  },
  "golden_sword_2": {
    "attackDamage": 90,
    "attackSpeed": 1.0,
    "criticalChance": 0.12
  },
  "magic_staff_2": {
    "attackDamage": 100,
    "attackSpeed": 0.8,
    "criticalChance": 0.10
  },
  "bow_2": {
    "attackDamage": 70,
    "attackSpeed": 1.3,
    "criticalChance": 0.11
  }
}
```

### 4.5 –§–∞–π–ª—ã –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏

#### üåç **i18n/**

##### üá∑üá∫ **strings_ru.properties** - –†—É—Å—Å–∫–∏–π —è–∑—ã–∫ (117 —Å—Ç—Ä–æ–∫)
```properties
# –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
main_menu.title=–ö–æ—Ä–æ–ª–µ–≤—Å–∫–∏–µ –î–µ–º–æ–Ω—ã
main_menu.new_game=–ù–æ–≤–∞—è –∏–≥—Ä–∞
main_menu.continue=–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å
main_menu.options=–ù–∞—Å—Ç—Ä–æ–π–∫–∏
main_menu.exit=–í—ã—Ö–æ–¥

# –ò–≥—Ä–æ–≤–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
game.ui.health=–ó–¥–æ—Ä–æ–≤—å–µ
game.ui.gold=–ó–æ–ª–æ—Ç–æ
game.ui.weapon=–û—Ä—É–∂–∏–µ
game.ui.level=–£—Ä–æ–≤–µ–Ω—å

# –û—Ä—É–∂–∏–µ
weapon.sword=–ú–µ—á
weapon.bow=–õ—É–∫
weapon.staff=–ü–æ—Å–æ—Ö

# –ü—Ä–µ–¥–º–µ—Ç—ã
item.health_potion=–ó–µ–ª—å–µ –∑–¥–æ—Ä–æ–≤—å—è
item.rage_potion=–ó–µ–ª—å–µ —è—Ä–æ—Å—Ç–∏
item.gold_coin=–ó–æ–ª–æ—Ç–∞—è –º–æ–Ω–µ—Ç–∞

# –í—Ä–∞–≥–∏
enemy.goblin=–ì–æ–±–ª–∏–Ω
enemy.orc=–û—Ä–∫
enemy.skeleton=–°–∫–µ–ª–µ—Ç
enemy.zombie=–ó–æ–º–±–∏
```

##### üá∫üá∏ **strings_en.properties** - –ê–Ω–≥–ª–∏–π—Å–∫–∏–π —è–∑—ã–∫
- –ê–Ω–∞–ª–æ–≥–∏—á–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å –∞–Ω–≥–ª–∏–π—Å–∫–∏–º–∏ –ø–µ—Ä–µ–≤–æ–¥–∞–º–∏
- strings_en_extended.properties - —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è

---

## 5. –ê–ù–ê–õ–ò–ó –ò–°–•–û–î–ù–û–ì–û –ö–û–î–ê

### 5.1 –û—Å–Ω–æ–≤–Ω—ã–µ –∫–ª–∞—Å—Å—ã

#### 5.1.1 MainApp.java - –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `src/main/java/uwu/openjfx/MainApp.java`
**–†–∞–∑–º–µ—Ä:** 457 —Å—Ç—Ä–æ–∫

**–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä–æ–≤–æ–≥–æ –¥–≤–∏–∂–∫–∞ FXGL
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–æ–¥—É–ª—å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ–∏–∑–∏–∫–∏ –∏ –∫–æ–ª–ª–∏–∑–∏–π
- –ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤
- –°–æ–∑–¥–∞–Ω–∏–µ –∏–≥—Ä–æ–≤–æ–≥–æ –º–∏—Ä–∞

**–ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç–æ–¥—ã:**
```java
@Override
protected void initSettings(GameSettings settings) {
    // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫–Ω–∞ –∏–≥—Ä—ã
    settings.setWidth(DEFAULT_WINDOW_WIDTH);
    settings.setHeight(DEFAULT_WINDOW_HEIGHT);
    settings.setTitle("Royal Demons");
    settings.setMainMenuEnabled(true);
}

@Override
protected void initGame() {
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–¥—É–ª—å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
    initializeModules();

    // –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ä—Ç—ã –∏ –∏–≥—Ä–æ–∫–∞
    gameMap = new GameMap(10);
    player = spawn("player", 0, 0);
}

private void initializeModules() {
    // –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–¥—É–ª–µ–π
    ModuleManager moduleManager = ModuleManager.getInstance();
    moduleManager.registerModule(new CoreModule());
    moduleManager.registerModule(new AssetModule());
    moduleManager.initializeAll();
}
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω–∞ Singleton –¥–ª—è ModuleManager
- Graceful shutdown –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –º–æ–¥—É–ª–µ–π

#### 5.1.2 PlayerComponent.java - –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∏–≥—Ä–æ–∫–∞

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `src/main/java/uwu/openjfx/components/PlayerComponent.java`
**–†–∞–∑–º–µ—Ä:** ~400+ —Å—Ç—Ä–æ–∫

**–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–≤–∏–∂–µ–Ω–∏–µ–º –∏ –∞–Ω–∏–º–∞—Ü–∏–µ–π –∏–≥—Ä–æ–∫–∞
- –°–∏—Å—Ç–µ–º–∞ –∞—Ç–∞–∫ (–æ–±—ã—á–Ω–∞—è –∏ —É–ª—å—Ç–∏–º–µ–π—Ç)
- –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å –∏ –æ—Ä—É–∂–∏–µ
- –ë–æ–µ–≤—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏

**–ö–ª—é—á–µ–≤—ã–µ –ø–æ–ª—è:**
```java
private static Weapon currentWeapon; // –¢–µ–∫—É—â–µ–µ –æ—Ä—É–∂–∏–µ
private static final List<Weapon> weaponInventoryList = new ArrayList<>();
private static double attackPower = 1.0; // –°–∏–ª–∞ –∞—Ç–∞–∫–∏
private static boolean isAttackPowerBuffed = false; // –ë–∞—Ñ—Ñ –æ—Ç –∑–µ–ª—å—è —è—Ä–æ—Å—Ç–∏
private double speed = 180; // –°–∫–æ—Ä–æ—Å—Ç—å –¥–≤–∏–∂–µ–Ω–∏—è
private boolean prepAttack = false; // –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∞—Ç–∞–∫–∏
private boolean ultimateActivated = false; // –ê–∫—Ç–∏–≤–∞—Ü–∏—è —É–ª—å—Ç–∏–º–µ–π—Ç–∞
```

**–ú–µ—Ç–æ–¥—ã:**
```java
@Override
public void onUpdate(double tpf) {
    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–≥—Ä–æ–∫–∞
    updateMovement(tpf);
    updateAnimation();
    updateAttackCooldowns();
    handleInput();
}

private void attack() {
    // –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∞—Ç–∞–∫–∏
    if (currentWeapon != null) {
        currentWeapon.attack(getEntity().getX(), getEntity().getY());
    }
}

private void ultimate() {
    // –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —É–ª—å—Ç–∏–º–µ–π—Ç–∞
    if (currentWeapon != null) {
        currentWeapon.ultimate(getEntity().getX(), getEntity().getY());
    }
}
```

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ù–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –æ—Ç CreatureComponent
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ static –ø–æ–ª–µ–π –¥–ª—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–≥—Ä–æ–∫–∞
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π –∫–æ–ª–ª–∏–∑–∏–π FXGL

### 5.2 –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã

#### 5.2.1 Component Pattern

**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:** –í—Å—è –∏–≥—Ä–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —á–µ—Ä–µ–∑ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

**–ü—Ä–∏–º–µ—Ä—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:**
- `PlayerComponent` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–æ–º
- `EnemyComponent` - –ª–æ–≥–∏–∫–∞ –≤—Ä–∞–≥–æ–≤
- `CreatureComponent` - –±–∞–∑–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –∂–∏–≤—ã—Ö —Å—É—â–µ—Å—Ç–≤
- `WeaponAnimationComponent` - –∞–Ω–∏–º–∞—Ü–∏–∏ –æ—Ä—É–∂–∏—è
- `ComboManager` - —Å–∏—Å—Ç–µ–º–∞ –∫–æ–º–±–æ

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
- –ß—ë—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
- –ü—Ä–æ—Å—Ç–æ—Ç–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –ì–∏–±–∫–æ—Å—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π

#### 5.2.2 Factory Pattern

**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:** –°–æ–∑–¥–∞–Ω–∏–µ –∏–≥—Ä–æ–≤—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤

**–†–µ–∞–ª–∏–∑–∞—Ü–∏–∏:**
```java
// CreatureFactory.java
public class CreatureFactory implements EntityFactory {
    public Entity createPlayer(double x, double y) {
        return Entities.builder()
            .at(x, y)
            .type(EntityType.PLAYER)
            .with(new PlayerComponent(20))
            .build();
    }

    public Entity createEnemy(String type, double x, double y) {
        return Entities.builder()
            .at(x, y)
            .type(EntityType.ENEMY)
            .with(new EnemyComponent(type))
            .build();
    }
}

// WeaponFactory.java
public class WeaponFactory {
    private static Map<String, Weapon> weapons = new HashMap<>();

    public static Weapon getWeaponById(String id) {
        return weapons.get(id);
    }

    private static void registerWeapons() {
        weapons.put("golden_sword_0", new GoldenSword0());
        weapons.put("bow_0", new Bow0());
        // ...
    }
}
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤
- –ö–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –ø—Ä–æ—Ü–µ—Å—Å–æ–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
- –£–ø—Ä–æ—â–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

#### 5.2.3 Manager Pattern

**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:** –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–∞–º–∏

**–†–µ–∞–ª–∏–∑–∞—Ü–∏–∏:**
- `ModuleManager` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–æ–¥—É–ª—è–º–∏
- `GameSaveManager` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è–º–∏
- `AudioManager` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–≤—É–∫–æ–º
- `LocalizationManager` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–µ–π

**–ü—Ä–∏–º–µ—Ä ModuleManager:**
```java
public class ModuleManager {
    private static ModuleManager instance;
    private final Map<String, GameModule> modules = new ConcurrentHashMap<>();

    public static ModuleManager getInstance() {
        if (instance == null) {
            instance = new ModuleManager();
        }
        return instance;
    }

    public void registerModule(GameModule module) {
        modules.put(module.getName(), module);
    }

    public void initializeAll() {
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π
        for (GameModule module : modules.values()) {
            module.initialize();
        }
    }
}
```

#### 5.2.4 Observer Pattern

**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:** –°–æ–±—ã—Ç–∏–π–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ FXGL EventBus:**
```java
// –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Å–æ–±—ã—Ç–∏–µ
getEventBus().addEventHandler(InteractEvent.ANY, event -> {
    Interactable interactable = event.getEntity().getObject("Interactable");
    if (interactable != null) {
        interactable.interact();
    }
});

// –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏—è
getEventBus().fireEvent(new InteractEvent(player, interactableEntity));
```

### 5.3 –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã

**–§–∞–π–ª:** `src/main/java/uwu/openjfx/core/GameConstants.java`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ magic numbers –∏ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞–º–∏

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```java
public final class GameConstants {
    // –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–≥—Ä–æ–∫–∞
    public static class Player {
        public static final double DEFAULT_SPEED = 180.0;
        public static final int DEFAULT_HEALTH = 5;
        public static final double VELOCITY_DECREMENTER = 5.0;
    }

    // –ê—Ç–∞–∫–∏ –∏ –±–æ–µ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
    public static class Combat {
        public static final double ULTIMATE_COOLDOWN_MULTIPLIER = 1000.0;
        public static final double CHANNEL_DURATION = 2000.0;
        public static final int ATTACK_POWER_BUFF_DURATION = 300;
    }

    // –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –æ—Ä—É–∂–∏—è
    public static class Weapons {
        public static class GoldenSword {
            public static final double[] ATTACK_DAMAGE = {50.0, 75.0, 100.0};
            public static final int[] LIGHT_DURATION = {300, 350, 400};
        }
    }

    // –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≤—Ä–∞–≥–æ–≤
    public static class Enemy {
        public static final double DEFAULT_SPEED = 60.0;
        public static final int SMALL_MINION_HEALTH = 3;
        public static final int FINAL_BOSS_HEALTH = 50;
    }

    // UI –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
    public static class UI {
        public static final double WINDOW_WIDTH = 960.0;
        public static final double WINDOW_HEIGHT = 640.0;
    }
}
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –õ—ë–≥–∫–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ –∏–≥—Ä—ã
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–Ω—Å—Ç–∞–Ω—Ç
- –£–ª—É—á—à–µ–Ω–∏–µ —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏ –∫–æ–¥–∞

---

## 6. –ò–ì–†–û–í–´–ï –ú–ï–•–ê–ù–ò–ö–ò

### 6.1 –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∫–∏

#### 6.1.1 –°–∏—Å—Ç–µ–º–∞ –¥–≤–∏–∂–µ–Ω–∏—è

**–§–∞–π–ª:** `src/main/java/uwu/openjfx/components/PlayerComponent.java:98-166`

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
- –°–∫–æ—Ä–æ—Å—Ç—å: 180 –µ–¥–∏–Ω–∏—Ü (–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ)
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: WASD / —Å—Ç—Ä–µ–ª–∫–∏
- –§–∏–∑–∏–∫–∞: —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–∞—è –∏–Ω–µ—Ä—Ü–∏—è —Å –∑–∞–º–µ–¥–ª–µ–Ω–∏–µ–º

```java
private void updateMovement(double tpf) {
    double velocityX = 0;
    double velocityY = 0;

    if (FXGL.getInput().isKeyDown(KeyCode.W)) velocityY -= 1;
    if (FXGL.getInput().isKeyDown(KeyCode.S)) velocityY += 1;
    if (FXGL.getInput().isKeyDown(KeyCode.A)) velocityX -= 1;
    if (FXGL.getInput().isKeyDown(KeyCode.D)) velocityX += 1;

    // –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Å–∫–æ—Ä–æ—Å—Ç–∏ –ø–æ –¥–∏–∞–≥–æ–Ω–∞–ª–∏
    if (velocityX != 0 && velocityY != 0) {
        velocityX *= 0.707; // 1/‚àö2
        velocityY *= 0.707;
    }

    physics.setVelocityX(velocityX * speed);
    physics.setVelocityY(velocityY * speed);
}
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ü–ª–∞–≤–Ω–æ–µ —É—Å–∫–æ—Ä–µ–Ω–∏–µ –∏ –∑–∞–º–µ–¥–ª–µ–Ω–∏–µ
- –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Å–∫–æ—Ä–æ—Å—Ç–∏ –ø–æ –æ—Å—è–º X –∏ Y
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—Ä—ã–∂–∫–æ–≤ (2D –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ—Ä —Å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –≤—ã—Å–æ—Ç–æ–π)

#### 6.1.2 –°–∏—Å—Ç–µ–º–∞ –∞–Ω–∏–º–∞—Ü–∏–∏

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- `WeaponAnimationComponent.java`
- `ProjectileAnimationComponent.java`

**–ê–Ω–∏–º–∞—Ü–∏–∏ –∏–≥—Ä–æ–∫–∞:**
- **idle**: –∫–∞–¥—Ä—ã 0-3 (0.5 —Å–µ–∫)
- **walk**: –∫–∞–¥—Ä—ã 4-7 (0.5 —Å–µ–∫)
- **attack**: –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –æ—Ä—É–∂–∏—è

```java
// –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–Ω–∏–º–∞—Ü–∏–∏
animIdle = new AnimationChannel(
    FXGL.image("creatures/lizard_m_40x55.png"),
    9, // –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–∞–¥—Ä–æ–≤
    40, 55, // —Ä–∞–∑–º–µ—Ä —Å–ø—Ä–∞–π—Ç–∞
    Duration.seconds(0.5), // –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
    0, 3 // –¥–∏–∞–ø–∞–∑–æ–Ω –∫–∞–¥—Ä–æ–≤
);

// –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∞–Ω–∏–º–∞—Ü–∏–π
if (physics.isMoving()) {
    texture.loopAnimationChannel(animWalk);
} else {
    texture.loopAnimationChannel(animIdle);
}
```

#### 6.1.3 –°–∏—Å—Ç–µ–º–∞ –∞—Ç–∞–∫

**–¢–∏–ø—ã –∞—Ç–∞–∫:**

1. **prepAttack** - –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ (–∑–∞–∂–∏–º –õ–ö–ú)
2. **startAttack** - –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∞—Ç–∞–∫–∏ (–æ—Ç–∂–∞—Ç–∏–µ –õ–ö–ú)
3. **ultimate** - —Å–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –∞—Ç–∞–∫–∞ (–ü—Ä–æ–±–µ–ª)

```java
private void attack() {
    if (currentWeapon != null) {
        // –°–æ–∑–¥–∞–Ω–∏–µ —Ö–∏—Ç–±–æ–∫—Å–∞ –∏–ª–∏ —Å–Ω–∞—Ä—è–¥–∞
        if (currentWeapon.isRanged()) {
            Entity projectile = spawn("projectile", playerX, playerY);
            projectile.setDirection(aimDirection);
        } else {
            Entity hitbox = spawn("attackHitBox", playerX, playerY);
            hitbox.addComponent(new DamageComponent(attackPower));
        }
    }
}
```

### 6.2 –°–∏—Å—Ç–µ–º–∞ –∑–¥–æ—Ä–æ–≤—å—è

#### 6.2.1 –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (FINAL –≤–µ—Ä—Å–∏—è)

**–§–∞–π–ª:** `src/main/java/uwu/openjfx/components/CreatureComponent.java:43-73`

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- **HP –∏–≥—Ä–æ–∫–∞:** 20 (4 —Å–µ—Ä–¥—Ü–∞)
- **1 —Å–µ—Ä–¥—Ü–µ = 5 HP**
- **–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –±—Ä–æ–Ω—è:** 1 (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –±–∞–≥ —Å –±–µ—Å—Å–º–µ—Ä—Ç–∏–µ–º)

```java
public void deductHealth(double point, double attackPower,
                         double blockProb, double armor, int pierce) {
    // –ë—Ä–æ–Ω—è –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å 0
    if (armor <= 0) armor = 1;

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–ª–æ–∫–∞
    int blockRand = MainApp.getRandom().nextInt(100) + 1;
    if (blockRand <= blockProb * pierce) {
        return; // –ê—Ç–∞–∫–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞
    }

    // –£—Ä–æ–Ω —Å —É—á—ë—Ç–æ–º –±—Ä–æ–Ω–∏
    int finalDamage = (int) Math.ceil(point * attackPower / armor);
    healthPoints -= finalDamage;

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–º–µ—Ä—Ç–∏
    if (healthPoints <= 0) {
        die();
    }
}
```

#### 6.2.2 –°–∏—Å—Ç–µ–º–∞ –Ω–µ—É—è–∑–≤–∏–º–æ—Å—Ç–∏

**–§–∞–π–ª:** `src/main/java/uwu/openjfx/components/CreatureComponent.java:88-96`

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- **–ò–≥—Ä–æ–∫:** 500–º—Å –Ω–µ—É—è–∑–≤–∏–º–æ—Å—Ç–∏ –ø–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è —É—Ä–æ–Ω–∞
- **–í—Ä–∞–≥–∏:** 100–º—Å –Ω–µ—É—è–∑–≤–∏–º–æ—Å—Ç–∏

```java
// –ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è —É—Ä–æ–Ω–∞
isInvulnerable = true;
FXGL.getGameTimer().runOnceAfter(() -> {
    isInvulnerable = false;
}, Duration.millis(!(this instanceof EnemyComponent) ? 500 : 100));
```

#### 6.2.3 –°–º–µ—Ä—Ç—å

**–§–∞–π–ª—ã:**
- `src/main/java/uwu/openjfx/behaviors/GameOverWhenDie.java`
- `src/main/java/uwu/openjfx/ui/DieScreenMenu.java`

```java
public void die() {
    healthPoints = 0;
    getDieBehavior().perform(); // –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —ç–∫—Ä–∞–Ω —Å–º–µ—Ä—Ç–∏
}
```

### 6.3 –ë–æ–µ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞

#### 6.3.1 –¢–∏–ø—ã –∞—Ç–∞–∫

##### –ê) –ë–ª–∏–∂–Ω–∏–π –±–æ–π
**–û—Ä—É–∂–∏–µ:** –ú–µ—á–∏ (Golden Sword, Heavy Sword)

```java
public void attack() {
    // –°–æ–∑–¥–∞—ë—Ç —Ö–∏—Ç–±–æ–∫—Å —É—Ä–æ–Ω–∞ –≤ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –≤–∑–≥–ª—è–¥–∞
    Entity hitbox = spawn("attackHitBox", playerX, playerY);
    hitbox.addComponent(new DamageComponent(attackPower));
    hitbox.setFacing(direction);
}
```

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ —Ö–∏—Ç–±–æ–∫—Å–∞:**
- –†–∞–∑–º–µ—Ä: 60x40 –ø–∏–∫—Å–µ–ª–µ–π (GameConstants.HitBox.MELEE_WIDTH/HEIGHT)
- –°–∫–æ—Ä–æ—Å—Ç—å –∞—Ç–∞–∫–∏: –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –æ—Ä—É–∂–∏—è
- –£—Ä–æ–Ω: –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–∏–ø–∞ –º–µ—á–∞

##### –ë) –î–∞–ª—å–Ω–∏–π –±–æ–π
**–û—Ä—É–∂–∏–µ:** –õ—É–∫–∏ (Bow)

```java
public void attack() {
    // –°–æ–∑–¥–∞—ë—Ç –ª–µ—Ç—è—â—É—é —Å—Ç—Ä–µ–ª—É
    Entity arrow = spawn("arrow", playerX, playerY);
    arrow.setDirection(aimDirection);
    arrow.addComponent(new ProjectileComponent());
}
```

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ —Å—Ç—Ä–µ–ª—ã:**
- –†–∞–∑–º–µ—Ä: 20x20 –ø–∏–∫—Å–µ–ª–µ–π
- –°–∫–æ—Ä–æ—Å—Ç—å: 600 –ø–∏–∫—Å–µ–ª–µ–π/—Å–µ–∫ (GameConstants.HitBox.PROJECTILE_SPEED)
- Multi-shot: 3-7 —Å—Ç—Ä–µ–ª –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —É—Ä–æ–≤–Ω—è –ª—É–∫–∞

##### –í) –ú–∞–≥–∏—á–µ—Å–∫–∏–µ –∞—Ç–∞–∫–∏
**–û—Ä—É–∂–∏–µ:** –ú–∞–≥–∏—á–µ—Å–∫–∏–µ –ø–æ—Å–æ—Ö–∏ (Magic Staff)

```java
public void attack() {
    // –°–æ–∑–¥–∞—ë—Ç –º–∞–≥–∏—á–µ—Å–∫–∏–π —Å–Ω–∞—Ä—è–¥
    Entity projectile = spawn("magicProjectile", playerX, playerY);
    projectile.addComponent(new ProjectileComponent());
    projectile.setDirection(aimDirection);
    // AoE —É—Ä–æ–Ω –ø—Ä–∏ –≤–∑—Ä—ã–≤–µ
}
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ú–∞–≥–∏—á–µ—Å–∫–∏–µ —Å–Ω–∞—Ä—è–¥—ã –≤–∑—Ä—ã–≤–∞—é—Ç—Å—è –ø—Ä–∏ –∫–æ–Ω—Ç–∞–∫—Ç–µ
- Area of Effect (AoE) —É—Ä–æ–Ω
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞–º–µ–¥–ª–µ–Ω–∏—è –≤—Ä–∞–≥–æ–≤

#### 6.3.2 Ultimate –∞—Ç–∞–∫–∏

##### Golden Sword Ultimate
```java
public void ultimate() {
    // 10 –∫–∏–Ω–∂–∞–ª–æ–≤ –ø–æ –∫—Ä—É–≥—É (360¬∞)
    for (int i = 0; i < 10; i++) {
        double angle = i * 36; // 360/10 = 36¬∞
        Entity dagger = spawnProjectile(angle);
    }
}
```

##### Bow Ultimate
```java
public void ultimate() {
    // 3-7 —Å—Ç—Ä–µ–ª –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –≤ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –ø—Ä–∏—Ü–µ–ª–∏–≤–∞–Ω–∏—è
    int count = getMultiShotCount();
    for (int i = 0; i < count; i++) {
        double spreadAngle = (i - count / 2.0) * 10; // –†–∞—Å—Å–µ–∏–≤–∞–Ω–∏–µ
        Entity arrow = spawnProjectile(aimDirection.rotate(spreadAngle));
    }
}
```

##### Magic Staff Ultimate
```java
public void ultimate() {
    // –ú–∞–≥–∏—á–µ—Å–∫–∏–π –≤–∑—Ä—ã–≤ –≤–æ–∫—Ä—É–≥ –∏–≥—Ä–æ–∫–∞
    Entity explosion = spawn("magicExplosion", playerX, playerY);
    explosion.setRadius(100); // –†–∞–¥–∏—É—Å –≤–∑—Ä—ã–≤–∞
    // –ù–∞–Ω–æ—Å–∏—Ç —É—Ä–æ–Ω –≤—Å–µ–º –≤—Ä–∞–≥–∞–º –≤ —Ä–∞–¥–∏—É—Å–µ
}
```

#### 6.3.3 –°–∏—Å—Ç–µ–º–∞ –∫–æ–ª–ª–∏–∑–∏–π

**–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤:** 14 —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö

```java
// –û—Å–Ω–æ–≤–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
FXGL.getPhysicsWorld().addCollisionHandler(new PlayerEnemyCollisionHandler());
FXGL.getPhysicsWorld().addCollisionHandler(new PlayerAttackEnemyCollisionHandler());
FXGL.getPhysicsWorld().addCollisionHandler(new EnemyAttackPlayerCollisionHandler());
FXGL.getPhysicsWorld().addCollisionHandler(new PlayerCoinCollisionHandler());
FXGL.getPhysicsWorld().addCollisionHandler(new PlayerChestCollisionHandler());
FXGL.getPhysicsWorld().addCollisionHandler(new PlayerDoorCollisionHandler());
FXGL.getPhysicsWorld().addCollisionHandler(new PlayerTriggerCollisionHandler());
FXGL.getPhysicsWorld().addCollisionHandler(new PlayerSpikeCollisionHandler());
// +7 –¥—Ä—É–≥–∏—Ö –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
```

**–ü—Ä–∏–º–µ—Ä –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞:**
```java
public class PlayerAttackEnemyCollisionHandler extends CollisionHandler {
    public PlayerAttackEnemyCollisionHandler() {
        super(EntityType.PLAYER_ATTACK, EntityType.ENEMY);
    }

    @Override
    protected void onCollisionBegin(Entity attack, Entity enemy) {
        // –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
        DamageComponent damageComp = attack.getComponent(DamageComponent.class);
        EnemyComponent enemyComp = enemy.getComponent(EnemyComponent.class);

        // –ù–∞–Ω–µ—Å–µ–Ω–∏–µ —É—Ä–æ–Ω–∞
        if (damageComp != null && enemyComp != null) {
            enemyComp.deductHealth(
                damageComp.getDamage(),
                1.0, // attackPower
                enemyComp.getBlockProbability(),
                enemyComp.getArmor(),
                damageComp.getPiercePower()
            );
        }
    }
}
```

### 6.4 –°–∏—Å—Ç–µ–º–∞ –æ—Ä—É–∂–∏—è

#### 6.4.1 –ò–µ—Ä–∞—Ä—Ö–∏—è –æ—Ä—É–∂–∏—è

```
Weapon (–±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å)
‚îú‚îÄ‚îÄ GoldenSword0/1/2
‚îú‚îÄ‚îÄ Bow0/1/2
‚îú‚îÄ‚îÄ MagicStaff0/1/2
‚îî‚îÄ‚îÄ HeavySword
```

#### 6.4.2 –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –æ—Ä—É–∂–∏—è

**–ú–µ—á–∏:**

| –û—Ä—É–∂–∏–µ | –£—Ä–æ–Ω | –°–∫–æ—Ä–æ—Å—Ç—å –∞—Ç–∞–∫–∏ | –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —à–∞–Ω—Å | Ultimate |
|--------|------|----------------|------------------|----------|
| Golden Sword 0 | 50 | 1.2 | 5% | 10 –∫–∏–Ω–∂–∞–ª–æ–≤ –≤–µ–µ—Ä–æ–º |
| Golden Sword 1 | 70 | 1.1 | 8% | –£–ª—É—á—à–µ–Ω–Ω—ã–π –≤–µ–µ—Ä |
| Golden Sword 2 | 90 | 1.0 | 12% | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –≤–µ–µ—Ä |
| Heavy Sword | 80 | 0.7 | 15% | –ú–æ—â–Ω—ã–π —É–¥–∞—Ä |

**–õ—É–∫–∏:**

| –û—Ä—É–∂–∏–µ | –£—Ä–æ–Ω | –°–∫–æ—Ä–æ—Å—Ç—å –∞—Ç–∞–∫–∏ | –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —à–∞–Ω—Å | Ultimate |
|--------|------|----------------|------------------|----------|
| Bow 0 | 40 | 1.5 | 4% | 3 —Å—Ç—Ä–µ–ª—ã |
| Bow 1 | 55 | 1.4 | 7% | 5 —Å—Ç—Ä–µ–ª |
| Bow 2 | 70 | 1.3 | 11% | 7 —Å—Ç—Ä–µ–ª |

**–ú–∞–≥–∏—á–µ—Å–∫–æ–µ –æ—Ä—É–∂–∏–µ:**

| –û—Ä—É–∂–∏–µ | –£—Ä–æ–Ω | –°–∫–æ—Ä–æ—Å—Ç—å –∞—Ç–∞–∫–∏ | –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —à–∞–Ω—Å | Ultimate |
|--------|------|----------------|------------------|----------|
| Magic Staff 0 | 60 | 0.9 | 3% | –ú–∞–≥–∏—á–µ—Å–∫–∏–π –≤–∑—Ä—ã–≤ |
| Magic Staff 1 | 80 | 0.85 | 6% | –í–∑—Ä—ã–≤ + –∑–∞–º–µ–¥–ª–µ–Ω–∏–µ |
| Magic Staff 2 | 100 | 0.8 | 10% | –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –≤–∑—Ä—ã–≤—ã |

#### 6.4.3 –§–∞–±—Ä–∏–∫–∞ –æ—Ä—É–∂–∏—è

**–§–∞–π–ª:** `src/main/java/uwu/openjfx/WeaponFactory.java`

```java
public class WeaponFactory implements EntityFactory {
    private static Map<String, Weapon> weapons = new HashMap<>();

    static {
        registerWeapons();
    }

    private static void registerWeapons() {
        weapons.put("golden_sword_0", new GoldenSword0());
        weapons.put("golden_sword_1", new GoldenSword1());
        weapons.put("golden_sword_2", new GoldenSword2());
        weapons.put("bow_0", new Bow0());
        weapons.put("bow_1", new Bow1());
        weapons.put("bow_2", new Bow2());
        weapons.put("magic_staff_0", new MagicStaff0());
        weapons.put("magic_staff_1", new MagicStaff1());
        weapons.put("magic_staff_2", new MagicStaff2());
        weapons.put("heavy_sword", new HeavySword());
    }

    public static Weapon getWeaponById(String id) {
        return weapons.get(id);
    }
}
```

### 6.5 –í—Ä–∞–≥–∏ –∏ –ò–ò

#### 6.5.1 –¢–∏–ø—ã –≤—Ä–∞–≥–æ–≤

**–û–±—ã—á–Ω—ã–µ –≤—Ä–∞–≥–∏:**
```java
// –°–∫–æ—Ä–æ—Å—Ç—å: 25 –ø–∏–∫—Å–µ–ª–µ–π/—Å–µ–∫
// HP: 5-15
// –£—Ä–æ–Ω: 1-3
// –ü—Ä–∏–º–µ—Ä—ã: –≥–æ–±–ª–∏–Ω—ã, —Å–∫–µ–ª–µ—Ç—ã, –∑–æ–º–±–∏
```

**–≠–ª–∏—Ç–Ω—ã–µ –≤—Ä–∞–≥–∏:**
```java
// –°–∫–æ—Ä–æ—Å—Ç—å: 30 –ø–∏–∫—Å–µ–ª–µ–π/—Å–µ–∫
// HP: 20-30
// –£—Ä–æ–Ω: 3-5
// –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å: –±–æ–ª—å—à–µ –æ–ø—ã—Ç–∞ –∏ –∑–æ–ª–æ—Ç–∞
```

**–ú–∏–Ω–∏-–±–æ—Å—Å—ã:**
```java
// –°–∫–æ—Ä–æ—Å—Ç—å: 35 –ø–∏–∫—Å–µ–ª–µ–π/—Å–µ–∫
// HP: 40-60
// –£—Ä–æ–Ω: 5-8
// –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å: —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
// –ü—Ä–∏–º–µ—Ä—ã: –û—Ä–∫-—à–∞–º–∞–Ω, –¢—Ä–æ–ª–ª—å, –î–µ–º–æ–Ω
```

**–§–∏–Ω–∞–ª—å–Ω—ã–π –±–æ—Å—Å:**
```java
// –°–∫–æ—Ä–æ—Å—Ç—å: 40 –ø–∏–∫—Å–µ–ª–µ–π/—Å–µ–∫
// HP: 100
// –£—Ä–æ–Ω: 10
// –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å: 2-3 —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –∞—Ç–∞–∫–∏
// –°–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏: –≤–µ–µ—Ä –æ–≥–Ω—è, —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏—è, –ø—Ä–∏–∑—ã–≤ –º–∏–Ω—å–æ–Ω–æ–≤
```

#### 6.5.2 –°–∏—Å—Ç–µ–º–∞ –ò–ò

**–§–∞–π–ª—ã:**
- `src/main/java/uwu/openjfx/utils/SimpleAI.java`
- `src/main/java/uwu/openjfx/utils/AIFactory.java`

**–¢–∏–ø—ã –ò–ò:**

1. **–ü—Ä–æ—Å—Ç–æ–π –ò–ò** - –¥–≤–∏–∂–µ–Ω–∏–µ –ø—Ä—è–º–æ –Ω–∞ –∏–≥—Ä–æ–∫–∞

```java
public class SimpleAI {
    public void update() {
        Vector2D direction = calculateDirectionToPlayer();
        moveInDirection(direction);
    }
}
```

2. **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –ò–ò** - —É—á–∏—Ç—ã–≤–∞–µ—Ç –¥–∏—Å—Ç–∞–Ω—Ü–∏—é –∏ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è

```java
public class AdaptiveAI {
    private double detectionRange = 200;

    public void update() {
        double distance = calculateDistanceToPlayer();
        if (distance < detectionRange) {
            if (distance > 50) {
                moveTowardsPlayer(); // –ü–æ–¥—Ö–æ–¥–∏–º –Ω–∞ –¥–∏—Å—Ç–∞–Ω—Ü–∏—é –∞—Ç–∞–∫–∏
            } else {
                circleAroundPlayer(); // –ö—Ä—É–∂–∏–º –≤–æ–∫—Ä—É–≥ –∏–≥—Ä–æ–∫–∞
            }
        } else {
            patrol(); // –ü–∞—Ç—Ä—É–ª–∏—Ä—É–µ–º —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏—é
        }
    }
}
```

3. **–¢–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ò–ò** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —É–∫—Ä—ã—Ç–∏—è –∏ —Ç–∞–∫—Ç–∏–∫—É (–¥–ª—è –±–æ—Å—Å–æ–≤)

```java
public class TacticalAI {
    public void update() {
        if (healthPoints < 0.3) {
            retreatToSafeZone(); // –û—Ç—Å—Ç—É–ø–∞–µ–º –ø—Ä–∏ –Ω–∏–∑–∫–æ–º HP
        } else if (abilityCooldown <= 0) {
            useSpecialAbility(); // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å–ø–µ—Ü–∞–±–∏–ª–∫—É
        } else {
            attackPlayer(); // –û–±—ã—á–Ω–∞—è –∞—Ç–∞–∫–∞
        }
    }
}
```

#### 6.5.3 –ú–∞–≥–∏—á–µ—Å–∫–∏–µ –∞—Ç–∞–∫–∏ –≤—Ä–∞–≥–æ–≤

**–§–∞–π–ª:** `src/main/java/uwu/openjfx/components/EnemyComponent.java:603-620`

```java
// –ü—Ä–∏ –∞—Ç–∞–∫–µ fireball
put("weapon", !type.equals("finalboss")
    ? "fireball_enemy_64x64"  // –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ —Å fireball_enemy
    : "fireball_boss_64x64");

// Ultimate –∞—Ç–∞–∫–∞: –≤–µ–µ—Ä –æ–≥–Ω—è
for (int i = 0; i < 5; i++) {
    double angle = i * 18; // –†–∞—Å—Å–µ–∏–≤–∞–Ω–∏–µ 90¬∞
    spawnFireball(angle);
}
```

---

## 7. –¢–ï–•–ù–ò–ß–ï–°–ö–ê–Ø –†–ï–ê–õ–ò–ó–ê–¶–ò–Ø

### 7.1 –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

#### 7.1.1 –Ø–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è
- **Java 21+** - –æ—Å–Ω–æ–≤–Ω–æ–π —è–∑—ã–∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
  - Stream API –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–æ–ª–ª–µ–∫—Ü–∏–π
  - –õ—è–º–±–¥–∞-–≤—ã—Ä–∞–∂–µ–Ω–∏—è
  - –ú–æ–¥—É–ª–∏ Java Platform (JPMS)
  -records –¥–ª—è –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö

#### 7.1.2 –ò–≥—Ä–æ–≤–æ–π –¥–≤–∏–∂–æ–∫
- **FXGL 17.3** (JavaFX Game Library)
- **–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
  - 2D —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥
  - –§–∏–∑–∏—á–µ—Å–∫–∏–π –¥–≤–∏–∂–æ–∫
  - –°–∏—Å—Ç–µ–º–∞ –∞–Ω–∏–º–∞—Ü–∏–π
  - Audio API
  - Input handling
  - Scene management

```java
// –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è FXGL
Entity player = spawn("player", 100, 100);
FXGL.getPhysicsWorld().setGravity(0, 0);
FXGL.loopBGM("evil4.mp3");
FXGL.getGameTimer().runAtInterval(() -> {
    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏
}, Duration.millis(16));
```

#### 7.1.3 UI —Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **JavaFX 21.0.2**
- **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
  - Controls (–∫–Ω–æ–ø–∫–∏, —Ç–µ–∫—Å—Ç, —Å–ª–∞–π–¥–µ—Ä—ã)
  - FXML (UI –æ–ø–∏—Å–∞–Ω–∏—è)
  - Media (–∞—É–¥–∏–æ/–≤–∏–¥–µ–æ)
  - Swing integration

#### 7.1.4 –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

| –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ | –í–µ—Ä—Å–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------------|--------|------------|
| **AnimateFX** | 1.2.1 | –ê–Ω–∏–º–∞—Ü–∏–∏ UI |
| **Jackson** | 2.15.2 | JSON/YAML –ø–∞—Ä—Å–∏–Ω–≥ |
| **SLF4J** | 2.0.9 | –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ |
| **Logback** | 1.4.11 | –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è |
| **JUnit** | 5.10.1 | –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ |
| **TestFX** | 4.0.16-alpha | UI —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ |
| **Mockito** | 5.10.0 | –ú–æ–∫-–æ–±—ä–µ–∫—Ç—ã |
| **SpotBugs** | 5.0.14 | –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ |

### 7.2 –°–∏—Å—Ç–µ–º–∞ —Å–±–æ—Ä–∫–∏

#### 7.2.1 Gradle –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

**–§–∞–π–ª:** `build.gradle`

```gradle
plugins {
    id 'application'
    id 'org.openjfx.javafxplugin' version '0.1.0'
    id 'edu.sc.seis.gradle' version '3.0.2' // SpotBugs
    id 'checkstyle'
}

javafx {
    version = '21.0.2'
    modules = ['javafx.controls', 'javafx.fxml', 'javafx.swing', 'javafx.media']
}

application {
    mainClass = 'uwu.openjfx.MainApp'
}

repositories {
    mavenCentral()
}

dependencies {
    // –ò–≥—Ä–æ–≤—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
    implementation 'com.github.AlmasB.FXGL:fxgl:17.3'
    implementation 'nl.rijksoft.animatefx:animatefx:1.2.1'

    // JSON/YAML
    implementation 'com.fasterxml.jackson.core:jackson-databind:2.15.2'
    implementation 'com.fasterxml.jackson.dataformat:jackson-dataformat-yaml:2.15.2'

    // –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
    implementation 'org.slf4j:slf4j-api:2.0.9'
    implementation 'ch.qos.logback:logback-classic:1.4.11'

    // –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
    testImplementation 'org.junit.jupiter:junit-jupiter:5.10.1'
    testImplementation 'org.testfx:testfx-junit5:4.0.16-alpha'
    testImplementation 'org.mockito:mockito-core:5.10.0'
    testImplementation 'org.mockito:mockito-junit-jupiter:5.10.0'

    // –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑
    spotbugs 'com.github.spotbugs.spotbugs:5.0.14'
    spotbugsAnnotations 'com.github.spotbugs:spotbugs-annotations:4.8.3'
}

checkstyle {
    toolVersion = '10.12.0'
    configFile = file("${project.rootDir}/cs2340_checks.xml")
}
```

#### 7.2.2 –°–∫—Ä–∏–ø—Ç—ã —Å–±–æ—Ä–∫–∏

**Linux - build-linux.sh:**
```bash
#!/bin/bash
echo "–°–±–æ—Ä–∫–∞ Royal Demons –¥–ª—è Linux..."
./gradlew clean
./gradlew build
./gradlew jar
echo "–°–±–æ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞! JAR: build/libs/royal-demons.jar"
```

**Windows - build-windows.bat:**
```batch
@echo off
echo –°–±–æ—Ä–∫–∞ Royal Demons –¥–ª—è Windows...
gradlew.bat clean
gradlew.bat build
gradlew.bat jar
echo –°–±–æ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!
```

#### 7.2.3 –°–∫—Ä–∏–ø—Ç—ã –∑–∞–ø—É—Å–∫–∞

**Linux - run-linux.sh:**
```bash
#!/bin/bash
JAR_FILE="build/libs/royal-demons.jar"
if [ ! -f "$JAR_FILE" ]; then
    echo "JAR —Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω! –í—ã–ø–æ–ª–Ω—è—é —Å–±–æ—Ä–∫—É..."
    ./gradlew jar
fi
java -jar "$JAR_FILE"
```

### 7.3 –°–∏—Å—Ç–µ–º–∞ –≤–≤–æ–¥–∞

#### 7.3.1 –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∞–≤–∏—à

**–§–∞–π–ª:** `src/main/java/uwu/openjfx/input/GameInputActions.java`

**–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –¥–µ–π—Å—Ç–≤–∏–π:**
```java
public class GameInputActions {
    public static void registerAllActions(Entity player) {
        // –î–≤–∏–∂–µ–Ω–∏–µ
        getInput().addAction(new MoveUpAction("MoveUp"), KeyCode.W);
        getInput().addAction(new MoveDownAction("MoveDown"), KeyCode.S);
        getInput().addAction(new MoveLeftAction("MoveLeft"), KeyCode.A);
        getInput().addAction(new MoveRightAction("MoveRight"), KeyCode.D);

        // –ê—Ç–∞–∫–∏
        getInput().addAction(new AttackAction("Attack"), MouseButton.PRIMARY);
        getInput().addAction(new UltimateAction("Ultimate"), KeyCode.SPACE);

        // –ü—Ä–µ–¥–º–µ—Ç—ã
        getInput().addAction(new UseHealthPotionAction("UseHealthPotion"), KeyCode.DIGIT1);
        getInput().addAction(new UseRagePotionAction("UseRagePotion"), KeyCode.DIGIT2);

        // –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ
        getInput().addAction(new InteractAction("Interact"), KeyCode.E);
        getInput().addAction(new UseItemAction("UseItem"), KeyCode.F);
    }
}
```

#### 7.3.2 –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è

**–ü—Ä–∏–º–µ—Ä - AttackAction:**
```java
public class AttackAction extends UserAction {
    public AttackAction(String name) {
        super(name);
    }

    @Override
    protected void onAction() {
        Entity player = FXGL.geto("player");
        if (player != null) {
            PlayerComponent pc = player.getComponent(PlayerComponent.class);
            pc.startAttack();
        }
    }

    @Override
    protected void onActionEnd() {
        Entity player = FXGL.geto("player");
        if (player != null) {
            PlayerComponent pc = player.getComponent(PlayerComponent.class);
            pc.performAttack();
        }
    }
}
```

### 7.4 –°–∏—Å—Ç–µ–º–∞ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞

#### 7.4.1 –ê–Ω–∏–º–∞—Ü–∏–∏

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ AnimationChannel:**
```java
// –°–æ–∑–¥–∞–Ω–∏–µ –∞–Ω–∏–º–∞—Ü–∏–∏
AnimationChannel animIdle = new AnimationChannel(
    FXGL.image("player_sprite.png"),
    9, // –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–∞–¥—Ä–æ–≤
    40, 55, // —Ä–∞–∑–º–µ—Ä –∫–∞–¥—Ä–∞
    Duration.seconds(0.5), // –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ü–∏–∫–ª–∞
    0, 3 // –¥–∏–∞–ø–∞–∑–æ–Ω –∫–∞–¥—Ä–æ–≤ (idle)
);

AnimationChannel animWalk = new AnimationChannel(
    FXGL.image("player_sprite.png"),
    9,
    40, 55,
    Duration.seconds(0.5),
    4, 7 // –¥–∏–∞–ø–∞–∑–æ–Ω –∫–∞–¥—Ä–æ–≤ (walk)
);

// –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∞–Ω–∏–º–∞—Ü–∏–∏
AnimatedTexture texture = new AnimatedTexture(animIdle);
texture.loop(); // –ó–∞—Ü–∏–∫–ª–∏–≤–∞–Ω–∏–µ
```

#### 7.4.2 –í–∏–∑—É–∞–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã

**–§–∞–π–ª:** `src/main/java/uwu/openjfx/visual/VisualEffectsManager.java`

**–¢–∏–ø—ã —ç—Ñ—Ñ–µ–∫—Ç–æ–≤:**
- –ß–∞—Å—Ç–∏—Ü—ã –ø—Ä–∏ –∞—Ç–∞–∫–µ
- –í–∑—Ä—ã–≤—ã
- –ò—Å—Ü–µ–ª–µ–Ω–∏–µ
- –ü–æ–ª—É—á–µ–Ω–∏–µ —É—Ä–æ–Ω–∞

```java
public class VisualEffectsManager {
    public void spawnHitEffect(double x, double y) {
        Entity effect = FXGL.entityBuilder()
            .at(x, y)
            .with(new ParticleComponent())
            .build();

        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —á–∞—Å—Ç–∏—Ü
        ParticleComponent particles = effect.getComponent(ParticleComponent.class);
        particles.setTexture(FXGL.image("hit_particle.png"));
        particles.setCount(10);
        particles.setVelocity(100);
    }
}
```

### 7.5 –°–∏—Å—Ç–µ–º–∞ –∫–∞–º–µ—Ä—ã

#### 7.5.1 Viewport

```java
@Override
protected void initGame() {
    Viewport viewport = getGameScene().getViewport();

    // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≥—Ä–∞–Ω–∏—Ü –º–∏—Ä–∞
    viewport.setBounds(-32 * 5, -getAppHeight(), 32 * 70, 32 * 70);

    // –ü—Ä–∏–≤—è–∑–∫–∞ –∫ –∏–≥—Ä–æ–∫—É (—Å–ª–µ–¥—É–µ—Ç –∑–∞ –∏–≥—Ä–æ–∫–æ–º)
    viewport.bindToEntity(player, getAppWidth() / 2.0, getAppHeight() / 2.0);

    // –õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ (–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è)
    viewport.setLazy(true);
}
```

#### 7.5.2 –°–ª–µ–¥–æ–≤–∞–Ω–∏–µ –∫–∞–º–µ—Ä—ã

–ö–∞–º–µ—Ä–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–ª–µ–¥—É–µ—Ç –∑–∞ –∏–≥—Ä–æ–∫–æ–º, –æ—Å—Ç–∞–≤–∞—è—Å—å –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –∫–∞—Ä—Ç—ã –º–∏—Ä–∞. –°–º–µ—â–µ–Ω–∏–µ –ø–æ —Ü–µ–Ω—Ç—Ä—É —ç–∫—Ä–∞–Ω–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∫–æ–º—Ñ–æ—Ä—Ç–Ω—ã–π –æ–±–∑–æ—Ä.

---

## 8. –°–ò–°–¢–ï–ú–´ –ò –ü–û–î–°–ò–°–¢–ï–ú–´

### 8.1 –°–∏—Å—Ç–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–π

#### 8.1.1 –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–π

**–§–∞–π–ª—ã:**
- `src/main/java/uwu/openjfx/save/GameSaveManager.java`
- `src/main/java/uwu/openjfx/save/GameSaveData.java`
- `src/main/java/uwu/openjfx/save/GameSaveService.java`

#### 8.1.2 –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è

```java
public class GameSaveData implements Serializable {
    private int level; // –¢–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å –∏–≥—Ä–æ–∫–∞
    private int experience; // –û–ø—ã—Ç
    private int gold; // –ó–æ–ª–æ—Ç–æ
    private int healthPoints; // –¢–µ–∫—É—â–µ–µ –∑–¥–æ—Ä–æ–≤—å–µ
    private int maxHealthPoints; // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∑–¥–æ—Ä–æ–≤—å–µ

    private List<String> unlockedWeapons; // –î–æ—Å—Ç—É–ø–Ω–æ–µ –æ—Ä—É–∂–∏–µ
    private String currentWeapon; // –¢–µ–∫—É—â–µ–µ –æ—Ä—É–∂–∏–µ

    private int healthPotions; // –ó–µ–ª—å—è –∑–¥–æ—Ä–æ–≤—å—è
    private int ragePotions; // –ó–µ–ª—å—è —è—Ä–æ—Å—Ç–∏

    private Map<String, Boolean> achievements; // –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è
    private long playTime; // –í—Ä–µ–º—è –∏–≥—Ä—ã –≤ —Å–µ–∫—É–Ω–¥–∞—Ö

    private RoomData currentRoom; // –¢–µ–∫—É—â–∞—è –∫–æ–º–Ω–∞—Ç–∞
    private List<RoomData> visitedRooms; // –ü–æ—Å–µ—â—ë–Ω–Ω—ã–µ –∫–æ–º–Ω–∞—Ç—ã
}
```

#### 8.1.3 –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ

```java
public class GameSaveManager {
    private static final long AUTO_SAVE_INTERVAL = 300000; // 5 –º–∏–Ω—É—Ç

    public void startAutoSave() {
        FXGL.getGameTimer().runAtInterval(() -> {
            saveGame("autosave_" + System.currentTimeMillis());
        }, Duration.millis(AUTO_SAVE_INTERVAL));
    }

    public void saveGame(String saveName) {
        try {
            GameSaveData data = collectGameData();
            saveService.saveGame(saveName, data);
            GameLogger.info("Game saved: " + saveName);
        } catch (Exception e) {
            GameLogger.error("Failed to save game", e);
        }
    }
}
```

#### 8.1.4 –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è

```java
public void loadGame(String saveName) {
    try {
        GameSaveData data = saveService.loadGame(saveName);
        if (data != null) {
            applyGameData(data);
            GameLogger.info("Game loaded: " + saveName);
        }
    } catch (Exception e) {
        GameLogger.error("Failed to load game", e);
    }
}
```

### 8.2 –°–∏—Å—Ç–µ–º–∞ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏

#### 8.2.1 –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

**–§–∞–π–ª—ã:**
- `src/main/java/uwu/openjfx/i18n/LocalizationManager.java`
- `src/main/java/uwu/openjfx/i18n/EnhancedLocalizationManager.java`

#### 8.2.2 –ú–µ–Ω–µ–¥–∂–µ—Ä –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏

```java
public class LocalizationManager {
    private static LocalizationManager instance;
    private ResourceBundle currentBundle;
    private Locale currentLocale = new Locale("ru"); // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ä—É—Å—Å–∫–∏–π

    private Map<String, ResourceBundle> bundles = new HashMap<>();

    public static LocalizationManager getInstance() {
        if (instance == null) {
            instance = new LocalizationManager();
        }
        return instance;
    }

    public void setLocale(String languageCode) {
        currentLocale = new Locale(languageCode);
        loadBundle();
    }

    private void loadBundle() {
        String bundleName = "i18n.strings_" + currentLocale.getLanguage();
        currentBundle = ResourceBundle.getBundle(bundleName, currentLocale);
    }

    public String getLocalizedString(String key) {
        try {
            return currentBundle.getString(key);
        } catch (MissingResourceException e) {
            GameLogger.warning("Missing translation for key: " + key);
            return key; // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∫–ª—é—á –∫–∞–∫ fallback
        }
    }
}
```

#### 8.2.3 –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```java
// –í –∫–æ–¥–µ
String title = LocalizationManager.getInstance().getLocalizedString("main_menu.title");
// –†–µ–∑—É–ª—å—Ç–∞—Ç: "–ö–æ—Ä–æ–ª–µ–≤—Å–∫–∏–µ –î–µ–º–æ–Ω—ã"

// –í FXML
<Text text="%main_menu.title" />
```

### 8.3 –°–∏—Å—Ç–µ–º–∞ –∞—É–¥–∏–æ

#### 8.3.1 AudioManager

**–§–∞–π–ª:** `src/main/java/uwu/openjfx/audio/AudioManager.java`

```java
public class AudioManager {
    private static AudioManager instance;

    public static AudioManager getInstance() {
        if (instance == null) {
            instance = new AudioManager();
        }
        return instance;
    }

    public void playSound(String soundName) {
        try {
            Sound sound = FXGL.getAssetLoader().loadSound(soundName);
            FXGL.getAudioPlayer().playSound(sound);
        } catch (Exception e) {
            GameLogger.warning("Failed to play sound: " + soundName);
        }
    }

    public void playMusic(String musicName, boolean loop) {
        try {
            Music music = FXGL.getAssetLoader().loadMusic(musicName);
            FXGL.getAudioPlayer().loopMusic(music);
        } catch (Exception e) {
            GameLogger.warning("Failed to play music: " + musicName);
        }
    }

    public void setMasterVolume(double volume) {
        FXGL.getSettings().setGlobalMusicVolume(volume);
    }

    public void setSfxVolume(double volume) {
        FXGL.getSettings().setGlobalSoundVolume(volume);
    }
}
```

#### 8.3.2 –¢–∏–ø—ã –∞—É–¥–∏–æ

**–ó–≤—É–∫–æ–≤—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã:**
- `button_click.wav` - –Ω–∞–∂–∞—Ç–∏–µ –∫–Ω–æ–ø–∫–∏
- `coin_pickup.wav` - —Å–±–æ—Ä –º–æ–Ω–µ—Ç—ã
- `chest_open.wav` - –æ—Ç–∫—Ä—ã—Ç–∏–µ —Å—É–Ω–¥—É–∫–∞
- `sword_attack.wav` - –∞—Ç–∞–∫–∞ –º–µ—á–æ–º
- `fire_explosion.wav` - –≤–∑—Ä—ã–≤ –æ–≥–Ω—è
- `goblin_die.wav` - —Å–º–µ—Ä—Ç—å –≥–æ–±–ª–∏–Ω–∞

**–ú—É–∑—ã–∫–∞:**
- `MainMenu.mp3` - –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
- `evil4.mp3` - –æ—Å–Ω–æ–≤–Ω–∞—è —Ç–µ–º–∞ –∏–≥—Ä—ã
- `boss_theme.mp3` - —Ç–µ–º–∞ –±–æ—Å—Å–∞
- `victory_theme.mp3` - —Ç–µ–º–∞ –ø–æ–±–µ–¥—ã

### 8.4 –°–∏—Å—Ç–µ–º–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π

#### 8.4.1 Achievements

**–§–∞–π–ª:** `src/main/java/uwu/openjfx/achievements/SimpleAchievements.java`

**–¢–∏–ø—ã –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π:**

```java
public enum Achievement {
    FIRST_KILL("–ü–µ—Ä–≤–∞—è –∫—Ä–æ–≤—å", "1 —É–±–∏–π—Å—Ç–≤–æ", 50),
    GOLD_COLLECTOR("–°–æ–±–∏—Ä–∞—Ç–µ–ª—å –∑–æ–ª–æ—Ç–∞", "100 –º–æ–Ω–µ—Ç", 50),
    EXPLORER("–ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å", "10 –∫–æ–º–Ω–∞—Ç", 75),
    DRAGON_SLAYER("–£–±–∏–π—Ü–∞ –¥—Ä–∞–∫–æ–Ω–æ–≤", "50 —É–±–∏–π—Å—Ç–≤", 100),
    TREASURE_HUNTER("–û—Ö–æ—Ç–Ω–∏–∫ –∑–∞ —Å–æ–∫—Ä–æ–≤–∏—â–∞–º–∏", "20 —Å—É–Ω–¥—É–∫–æ–≤", 100),
    LEVEL_MASTER("–ú–∞—Å—Ç–µ—Ä —É—Ä–æ–≤–Ω–µ–π", "10 —É—Ä–æ–≤–µ–Ω—å", 150),
    COMBO_MASTER("–ú–∞—Å—Ç–µ—Ä –∫–æ–º–±–æ", "25 –∫–æ–º–±–æ", 125);
}
```

#### 8.4.2 –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π

```java
public class AchievementChecker {
    public void checkAchievements(PlayerStats stats) {
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ —É–±–∏–π—Å—Ç–≤–∞–º
        if (stats.getKills() >= 1 && !isUnlocked(Achievement.FIRST_KILL)) {
            unlockAchievement(Achievement.FIRST_KILL);
        }

        if (stats.getKills() >= 50 && !isUnlocked(Achievement.DRAGON_SLAYER)) {
            unlockAchievement(Achievement.DRAGON_SLAYER);
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ –∑–æ–ª–æ—Ç—É
        if (stats.getGold() >= 100 && !isUnlocked(Achievement.GOLD_COLLECTOR)) {
            unlockAchievement(Achievement.GOLD_COLLECTOR);
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ –∫–æ–º–Ω–∞—Ç–∞–º
        if (stats.getRoomsVisited() >= 10 && !isUnlocked(Achievement.EXPLORER)) {
            unlockAchievement(Achievement.EXPLORER);
        }
    }
}
```

### 8.5 –°–∏—Å—Ç–µ–º–∞ –∫–≤–µ—Å—Ç–æ–≤

#### 8.5.1 QuestManager

**–§–∞–π–ª:** `src/main/java/uwu/openjfx/quest/QuestManager.java`

```java
public class QuestManager {
    private List<Quest> activeQuests = new ArrayList<>();
    private List<Quest> completedQuests = new ArrayList<>();

    public void addQuest(Quest quest) {
        activeQuests.add(quest);
        notifyQuestAdded(quest);
    }

    public void updateQuests(PlayerStats stats) {
        for (Quest quest : activeQuests) {
            quest.updateProgress(stats);
            if (quest.isCompleted()) {
                completeQuest(quest);
            }
        }
    }

    private void completeQuest(Quest quest) {
        activeQuests.remove(quest);
        completedQuests.add(quest);
        notifyQuestCompleted(quest);

        // –ù–∞–≥—Ä–∞–¥–∞
        PlayerComponent.addGold(quest.getRewardGold());
        showRewardNotification(quest);
    }
}
```

#### 8.5.2 –¢–∏–ø—ã –∫–≤–µ—Å—Ç–æ–≤

**–ü—Ä–∏–º–µ—Ä - KillQuest:**
```java
public class KillQuest extends Quest {
    private String targetEnemy;
    private int requiredKills;
    private int currentKills;

    @Override
    public void updateProgress(PlayerStats stats) {
        if (stats.getLastKillType().equals(targetEnemy)) {
            currentKills++;
            updateProgressBar(currentKills, requiredKills);
        }
    }

    @Override
    public boolean isCompleted() {
        return currentKills >= requiredKills;
    }
}
```

---

## 9. –ò–ì–†–û–í–´–ï –†–ï–°–£–†–°–´

### 9.1 –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤

–í—Å–µ —Ä–µ—Å—É—Ä—Å—ã –∏–≥—Ä—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `src/main/resources/` –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω—ã –ø–æ —Ç–∏–ø–∞–º. –†–µ—Å—É—Ä—Å—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∫–ª—é—á–∞—é—Ç—Å—è –≤ JAR —Ñ–∞–π–ª –ø—Ä–∏ —Å–±–æ—Ä–∫–µ.

### 9.2 –¢–µ–∫—Å—Ç—É—Ä—ã

#### 9.2.1 –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

- **–û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ:** 150+ —Ñ–∞–π–ª–æ–≤
- **–§–æ—Ä–º–∞—Ç:** PNG —Å –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å—é
- **–†–∞–∑–º–µ—Ä—ã:** –æ—Ç 16x16 –¥–æ 64x64 –ø–∏–∫—Å–µ–ª–µ–π
- **–°—Ç–∏–ª—å:** Pixel art (16-bit —Å—Ç–∏–ª—å)

#### 9.2.2 –ö–∞—Ç–µ–≥–æ—Ä–∏–∏

##### –°—É—â–µ—Å—Ç–≤–∞

**–û–±—ã—á–Ω—ã–µ –≤—Ä–∞–≥–∏ (minions/normal):**
- `goblin.png` - –≥–æ–±–ª–∏–Ω
- `orc.png` - –æ—Ä–∫
- `skeleton.png` - —Å–∫–µ–ª–µ—Ç
- `zombie.png` - –∑–æ–º–±–∏
- `bat.png` - –ª–µ—Ç—É—á–∞—è –º—ã—à—å
- `spider.png` - –ø–∞—É–∫

**–õ–µ—Å–Ω—ã–µ –≤—Ä–∞–≥–∏ (minions/forest):**
- `forest_goblin.png` - –ª–µ—Å–Ω–æ–π –≥–æ–±–ª–∏–Ω
- `elf_archer.png` - —ç–ª—å—Ñ-–ª—É—á–Ω–∏–∫
- `tree_ent.png` - –¥—Ä–µ–≤–µ–Ω—å

**–ú–∏–Ω–∏-–±–æ—Å—Å—ã (miniBoss):**
- `orc_chieftain.png` - –≤–æ–∂–¥—å –æ—Ä–∫–æ–≤
- `troll.png` - —Ç—Ä–æ–ª–ª—å
- `demon.png` - –¥–µ–º–æ–Ω

**–ë–æ—Å—Å—ã (boss):**
- `stone_golem.png` - –∫–∞–º–µ–Ω–Ω—ã–π –≥–æ–ª–µ–º
- `forest_guardian.png` - —Å—Ç—Ä–∞–∂ –ª–µ—Å–∞
- `evil_wizard.png` - –∑–ª–æ–π –≤–æ–ª—à–µ–±–Ω–∏–∫
- `final_boss.png` - —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –±–æ—Å—Å

**–°–æ—é–∑–Ω–∏–∫–∏ (ally):**
- `princess.png` - –ø—Ä–∏–Ω—Ü–µ—Å—Å–∞
- `elf_female.png` - —ç–ª—å—Ñ–∏–π–∫–∞
- `fairy.png` - —Ñ–µ—è

##### –û—Ä—É–∂–∏–µ

**–ú–µ—á–∏:**
- `sword_0.png` - –±–∞–∑–æ–≤—ã–π –º–µ—á
- `golden_sword_0.png` - –∑–æ–ª–æ—Ç–æ–π –º–µ—á 0
- `golden_sword_1.png` - –∑–æ–ª–æ—Ç–æ–π –º–µ—á 1
- `golden_sword_2.png` - –∑–æ–ª–æ—Ç–æ–π –º–µ—á 2
- `heavy_sword.png` - —Ç—è–∂—ë–ª—ã–π –º–µ—á

**–õ—É–∫–∏:**
- `bow_0.png` - –ª—É–∫ 0
- `bow_1.png` - –ª—É–∫ 1
- `bow_2.png` - –ª—É–∫ 2

**–ü–æ—Å–æ—Ö–∏:**
- `magic_staff_0.png` - –ø–æ—Å–æ—Ö 0
- `magic_staff_1.png` - –ø–æ—Å–æ—Ö 1
- `magic_staff_2.png` - –ø–æ—Å–æ—Ö 2

**–ê–Ω–∏–º–∞—Ü–∏–∏ –∞—Ç–∞–∫:**
- `sword_attack_*.png` - —Å–ø—Ä–∞–π—Ç—ã –∞—Ç–∞–∫–∏ –º–µ—á–æ–º
- `bow_shot_*.png` - —Å–ø—Ä–∞–π—Ç—ã –≤—ã—Å—Ç—Ä–µ–ª–∞ –∏–∑ –ª—É–∫–∞
- `magic_cast_*.png` - —Å–ø—Ä–∞–π—Ç—ã –∫–∞—Å—Ç–æ–≤–∞–Ω–∏—è –º–∞–≥–∏–∏

##### –ü—Ä–µ–¥–º–µ—Ç—ã

**–ó–µ–ª—å—è:**
- `health_potion.png` - –∑–µ–ª—å–µ –∑–¥–æ—Ä–æ–≤—å—è
- `rage_potion.png` - –∑–µ–ª—å–µ —è—Ä–æ—Å—Ç–∏

**–í–∞–ª—é—Ç–∞:**
- `coin_16x16.png` - –º–æ–Ω–µ—Ç–∞ (4 –∫–∞–¥—Ä–∞ –∞–Ω–∏–º–∞—Ü–∏–∏)

**–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å:**
- `ui_heart_full_32x32.png` - –ø–æ–ª–Ω–æ–µ —Å–µ—Ä–¥—Ü–µ
- `ui_heart_empty_32x32.png` - –ø—É—Å—Ç–æ–µ —Å–µ—Ä–¥—Ü–µ
- `weapon_box_ui.png` - –∏–∫–æ–Ω–∫–∞ –æ—Ä—É–∂–∏—è –≤ UI

#### 9.2.3 –ê–Ω–∏–º–∞—Ü–∏–∏

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–ø—Ä–∞–π—Ç-–ª–∏—Å—Ç–æ–≤:**
- –°–ø—Ä–∞–π—Ç –æ–±—ä–µ–¥–∏–Ω—ë–Ω –≤ –æ–¥–∏–Ω —Ñ–∞–π–ª —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –∫–∞–¥—Ä–∞–º–∏
- –ö–∞–¥—Ä—ã —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω—ã –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–∞–¥—Ä–æ–≤: –æ—Ç 4 –¥–æ 9

**–ü—Ä–∏–º–µ—Ä - –ò–≥—Ä–æ–∫:**
```
player_sprite.png (9 –∫–∞–¥—Ä–æ–≤):
[–∫–∞–¥—Ä 0] [–∫–∞–¥—Ä 1] [–∫–∞–¥—Ä 2] [–∫–∞–¥—Ä 3] - idle (4 –∫–∞–¥—Ä–∞)
[–∫–∞–¥—Ä 4] [–∫–∞–¥—Ä 5] [–∫–∞–¥—Ä 6] [–∫–∞–¥—Ä 7] - walk (4 –∫–∞–¥—Ä–∞)
[–∫–∞–¥—Ä 8] - –∞—Ç–∞–∫–∞ (1 –∫–∞–¥—Ä)
```

### 9.3 –ê—É–¥–∏–æ —Ä–µ—Å—É—Ä—Å—ã

#### 9.3.1 –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

- **–ó–≤—É–∫–æ–≤—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã:** 40+ —Ñ–∞–π–ª–æ–≤
- **–ú—É–∑—ã–∫–∞:** 6 —Ñ–∞–π–ª–æ–≤
- **–§–æ—Ä–º–∞—Ç:** WAV (–∑–≤—É–∫–∏), MP3 (–º—É–∑—ã–∫–∞)
- **–ö–∞—á–µ—Å—Ç–≤–æ:** 44.1 –∫–ì—Ü, 16 –±–∏—Ç

#### 9.3.2 –ó–≤—É–∫–æ–≤—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã

**UI –∑–≤—É–∫–∏:**
- `button_click.wav` - 0.1 —Å–µ–∫
- `chest_open.wav` - 0.5 —Å–µ–∫
- `coin_pickup.wav` - 0.2 —Å–µ–∫
- `door_open.wav` - 0.3 —Å–µ–∫

**–ë–æ–µ–≤—ã–µ –∑–≤—É–∫–∏:**
- `sword_attack.wav` - 0.4 —Å–µ–∫
- `bow_shot.wav` - 0.3 —Å–µ–∫
- `fire_explosion.wav` - 1.0 —Å–µ–∫
- `magic_cast.wav` - 0.8 —Å–µ–∫

**–ó–≤—É–∫–∏ –≤—Ä–∞–≥–æ–≤:**
- `goblin_die.wav` - 0.5 —Å–µ–∫
- `orc_attack.wav` - 0.6 —Å–µ–∫
- `skeleton_hurt.wav` - 0.3 —Å–µ–∫
- `boss_roar.wav` - 2.0 —Å–µ–∫

**–û–±—â–∏–µ –∑–≤—É–∫–∏:**
- `steps2.wav` - —à–∞–≥–∏ –∏–≥—Ä–æ–∫–∞
- `die.wav` - –∑–≤—É–∫ —Å–º–µ—Ä—Ç–∏
- `level_up.wav` - –ø–æ–≤—ã—à–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è

#### 9.3.3 –ú—É–∑—ã–∫–∞

| –§–∞–π–ª | –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------|--------------|------------|
| `MainMenu.mp3` | 2:30 | –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é |
| `evil4.mp3` | 3:45 | –û—Å–Ω–æ–≤–Ω–∞—è —Ç–µ–º–∞ –∏–≥—Ä—ã |
| `boss_theme.mp3` | 4:00 | –ë–∏—Ç–≤–∞ —Å –±–æ—Å—Å–æ–º |
| `victory_theme.mp3` | 2:00 | –ü–æ–±–µ–¥–∞ |

### 9.4 –ö–∞—Ä—Ç—ã —É—Ä–æ–≤–Ω–µ–π

#### 9.4.1 –§–æ—Ä–º–∞—Ç TMX

–ö–∞—Ä—Ç—ã —Å–æ–∑–¥–∞–Ω—ã –≤ **Tiled Map Editor** –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ TMX (XML).

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ TMX —Ñ–∞–π–ª–∞:**
```xml
<?xml version="1.0" encoding="UTF-8"?>
<map version="1.10" tiledversion="1.10.2" orientation="orthogonal" renderorder="right-down" width="30" height="20" tilewidth="32" tileheight="32" infinite="0" nextlayerid="4" nextobjectid="1">
    <tileset firstgid="1" name="dungeon_tileset" tilewidth="32" tileheight="32" tilecount="100" columns="10">
        <image source="dungeon_tileset.png" width="320" height="320"/>
    </tileset>
    <layer id="1" name="ground" width="30" height="20">
        <data>
            <tile gid="1"/>
            <!-- ... -->
        </data>
    </layer>
    <layer id="2" name="walls" width="30" height="20">
        <data>
            <tile gid="5"/>
            <!-- ... -->
        </data>
    </layer>
    <objectgroup id="3" name="objects">
        <object id="1" name="player_spawn" x="480" y="320" width="32" height="32"/>
    </objectgroup>
</map>
```

#### 9.4.2 –¢–∏–ø—ã –∫–æ–º–Ω–∞—Ç

1. **initialRoom.tmx** - —Å—Ç–∞—Ä—Ç–æ–≤–∞—è –∫–æ–º–Ω–∞—Ç–∞
   - –†–∞–∑–º–µ—Ä: 30x20 —Ç–∞–π–ª–æ–≤
   - –°–æ–¥–µ—Ä–∂–∏—Ç: —Å—Ç–∞—Ä—Ç–æ–≤—É—é –ø–æ–∑–∏—Ü–∏—é –∏–≥—Ä–æ–∫–∞, —Å—É–Ω–¥—É–∫ —Å –æ—Ä—É–∂–∏–µ–º

2. **bossRoom.tmx** - –∫–æ–º–Ω–∞—Ç–∞ –±–æ—Å—Å–∞
   - –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å: —à–∏—Ä–æ–∫–∞—è —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –∞—Ä–µ–Ω–∞
   - –°–æ–¥–µ—Ä–∂–∏—Ç: –º–∏–Ω–∏-–±–æ—Å—Å–∞, —Å—É–Ω–¥—É–∫–∏ —Å –Ω–∞–≥—Ä–∞–¥–∞–º–∏

3. **challengeRoom.tmx** - –∫–æ–º–Ω–∞—Ç–∞ –∏—Å–ø—ã—Ç–∞–Ω–∏–π
   - –°–æ–¥–µ—Ä–∂–∏—Ç: –ª–æ–≤—É—à–∫–∏, –º–Ω–æ–∂–µ—Å—Ç–≤–æ –≤—Ä–∞–≥–æ–≤
   - –ù–∞–≥—Ä–∞–¥–∞: —Å—É–Ω–¥—É–∫ —Å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–º

4. **finalWinRoom.tmx** - –∫–æ–º–Ω–∞—Ç–∞ –ø–æ–±–µ–¥—ã
   - –§–∏–Ω–∞–ª—å–Ω–∞—è —Ç–æ—á–∫–∞ –∏–≥—Ä—ã
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –ø–æ–±–µ–¥–µ –Ω–∞–¥ —Ñ–∏–Ω–∞–ª—å–Ω—ã–º –±–æ—Å—Å–æ–º

5. **small_room_*.tmx** - –º–∞–ª—ã–µ –∫–æ–º–Ω–∞—Ç—ã (2 –≤–∞—Ä–∏–∞–Ω—Ç–∞)
   - –†–∞–∑–º–µ—Ä: 20x15 —Ç–∞–π–ª–æ–≤
   - –°–æ–¥–µ—Ä–∂–∏—Ç: 3-5 –≤—Ä–∞–≥–æ–≤, —Å—É–Ω–¥—É–∫

6. **4_door_*.tmx** - –∫–æ–º–Ω–∞—Ç—ã —Å 4 –¥–≤–µ—Ä—å–º–∏ (2 –≤–∞—Ä–∏–∞–Ω—Ç–∞)
   - –†–∞–∑–º–µ—Ä: 30x20 —Ç–∞–π–ª–æ–≤
   - –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è –ø—É—Ç–µ–π

#### 9.4.3 –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–∞—Ä—Ç—ã

**–§–∞–π–ª:** `src/main/java/uwu/openjfx/map/GameMap.java`

```java
public class GameMap(int roomCount) {
    this.roomCount = roomCount;
    this.rooms = new ArrayList<>();
    generateRooms();
    connectRooms();
}

private void generateRooms() {
    // –î–æ–±–∞–≤–ª—è–µ–º —Å—Ç–∞—Ä—Ç–æ–≤—É—é –∫–æ–º–Ω–∞—Ç—É
    addRoom(RoomType.INITIAL, null);

    // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –æ–±—ã—á–Ω—ã–µ –∫–æ–º–Ω–∞—Ç—ã
    for (int i = 1; i < roomCount - 2; i++) {
        RoomType type = getRandomRoomType();
        addRoom(type, null);
    }

    // –î–æ–±–∞–≤–ª—è–µ–º –±–æ—Å—Å –∏ —Ñ–∏–Ω–∞–ª—å–Ω—É—é –∫–æ–º–Ω–∞—Ç—ã
    addRoom(RoomType.BOSS, null);
    addRoom(RoomType.FINAL_WIN, null);
}

private void connectRooms() {
    // –°–æ–µ–¥–∏–Ω—è–µ–º –∫–æ–º–Ω–∞—Ç—ã –¥–≤–µ—Ä—å–º–∏
    for (int i = 0; i < rooms.size() - 1; i++) {
        connectRoom(rooms.get(i), rooms.get(i + 1));
    }
}
```

### 9.5 –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

#### 9.5.1 difficulty.json

**5 —É—Ä–æ–≤–Ω–µ–π —Å–ª–æ–∂–Ω–æ—Å—Ç–∏:**

1. **peaceful** - –¥–ª—è –Ω–æ–≤–∏—á–∫–æ–≤
   - HP –≤—Ä–∞–≥–æ–≤: 50%
   - –£—Ä–æ–Ω –≤—Ä–∞–≥–æ–≤: 50%
   - –£—Ä–æ–Ω –∏–≥—Ä–æ–∫–∞: +50%

2. **easy** - –ª—ë–≥–∫–∏–π
   - HP –≤—Ä–∞–≥–æ–≤: 75%
   - –£—Ä–æ–Ω –≤—Ä–∞–≥–æ–≤: 80%
   - –£—Ä–æ–Ω –∏–≥—Ä–æ–∫–∞: +20%

3. **normal** - —Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
   - HP –≤—Ä–∞–≥–æ–≤: 100%
   - –£—Ä–æ–Ω –≤—Ä–∞–≥–æ–≤: 100%
   - –£—Ä–æ–Ω –∏–≥—Ä–æ–∫–∞: 100%

4. **hard** - —Å–ª–æ–∂–Ω—ã–π
   - HP –≤—Ä–∞–≥–æ–≤: 150%
   - –£—Ä–æ–Ω –≤—Ä–∞–≥–æ–≤: +30%
   - –£—Ä–æ–Ω –∏–≥—Ä–æ–∫–∞: -10%

5. **nightmare** - –∫–æ—à–º–∞—Ä
   - HP –≤—Ä–∞–≥–æ–≤: 200%
   - –£—Ä–æ–Ω –≤—Ä–∞–≥–æ–≤: +50%
   - –£—Ä–æ–Ω –∏–≥—Ä–æ–∫–∞: -20%

#### 9.5.2 weapons.json

**–ë–∞–ª–∞–Ω—Å –æ—Ä—É–∂–∏—è:**

```json
{
  "golden_sword_0": {
    "attackDamage": 50,
    "attackSpeed": 1.2,
    "criticalChance": 0.05,
    "description": "–ë–∞–∑–æ–≤—ã–π –∑–æ–ª–æ—Ç–æ–π –º–µ—á"
  },
  "golden_sword_2": {
    "attackDamage": 90,
    "attackSpeed": 1.0,
    "criticalChance": 0.12,
    "description": "–ú–∞—Å—Ç–µ—Ä—Å–∫–∏–π –∑–æ–ª–æ—Ç–æ–π –º–µ—á"
  }
}
```

---

## 10. –õ–û–ö–ê–õ–ò–ó–ê–¶–ò–Ø –ò –ò–ù–¢–ï–†–ù–ê–¶–ò–û–ù–ê–õ–ò–ó–ê–¶–ò–Ø

### 10.1 –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏

#### 10.1.1 –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —è–∑—ã–∫–∏

1. **–†—É—Å—Å–∫–∏–π (ru)** - –æ—Å–Ω–æ–≤–Ω–æ–π —è–∑—ã–∫
   - –§–∞–π–ª: `strings_ru.properties`
   - –°—Ç—Ä–æ–∫ –ø–µ—Ä–µ–≤–æ–¥–∞: 117
   - –ü–æ–ª–Ω–æ—Ç–∞: 100%

2. **–ê–Ω–≥–ª–∏–π—Å–∫–∏–π (en)** - –≤—Ç–æ—Ä–∏—á–Ω—ã–π —è–∑—ã–∫
   - –§–∞–π–ª: `strings_en.properties`
   - –ü–æ–ª–Ω–∞—è –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è
   - –§–∞–π–ª: `strings_en_extended.properties` - —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è

#### 10.1.2 –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

**–ü—Ä–∏–º–µ—Ä - strings_ru.properties:**
```properties
# === –ì–õ–ê–í–ù–û–ï –ú–ï–ù–Æ ===
main_menu.title=–ö–æ—Ä–æ–ª–µ–≤—Å–∫–∏–µ –î–µ–º–æ–Ω—ã
main_menu.new_game=–ù–æ–≤–∞—è –∏–≥—Ä–∞
main_menu.continue=–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å
main_menu.options=–ù–∞—Å—Ç—Ä–æ–π–∫–∏
main_menu.exit=–í—ã—Ö–æ–¥

# === –ò–ì–†–û–í–û–ô –ò–ù–¢–ï–†–§–ï–ô–° ===
game.ui.health=–ó–¥–æ—Ä–æ–≤—å–µ
game.ui.gold=–ó–æ–ª–æ—Ç–æ
game.ui.weapon=–û—Ä—É–∂–∏–µ
game.ui.level=–£—Ä–æ–≤–µ–Ω—å
game.ui.experience=–û–ø—ã—Ç

# === –û–†–£–ñ–ò–ï ===
weapon.sword=–ú–µ—á
weapon.bow=–õ—É–∫
weapon.staff=–ü–æ—Å–æ—Ö

# === –ü–†–ï–î–ú–ï–¢–´ ===
item.health_potion=–ó–µ–ª—å–µ –∑–¥–æ—Ä–æ–≤—å—è
item.rage_potion=–ó–µ–ª—å–µ —è—Ä–æ—Å—Ç–∏

# === –í–†–ê–ì–ò ===
enemy.goblin=–ì–æ–±–ª–∏–Ω
enemy.orc=–û—Ä–∫
enemy.skeleton=–°–∫–µ–ª–µ—Ç
```

**–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –ø–µ—Ä–µ–≤–æ–¥—ã - strings_en.properties:**
```properties
main_menu.title=Royal Demons
main_menu.new_game=New Game
main_menu.continue=Continue
main_menu.options=Options
main_menu.exit=Exit

game.ui.health=Health
game.ui.gold=Gold
game.ui.weapon=Weapon
game.ui.level=Level
game.ui.experience=Experience

weapon.sword=Sword
weapon.bow=Bow
weapon.staff=Staff

item.health_potion=Health Potion
item.rage_potion=Rage Potion

enemy.goblin=Goblin
enemy.orc=Orc
enemy.skeleton=Skeleton
```

### 10.2 EnhancedLocalizationManager

#### 10.2.1 –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

**–§–∞–π–ª:** `src/main/java/uwu/openjfx/i18n/EnhancedLocalizationManager.java`

```java
public class EnhancedLocalizationManager {
    private ResourceBundle currentBundle;
    private Locale currentLocale;
    private Map<Locale, ResourceBundle> bundles = new HashMap<>();
    private List<LocalizationListener> listeners = new ArrayList<>();

    // –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —è–∑—ã–∫–æ–≤
    public void loadLocale(Locale locale) {
        currentLocale = locale;
        String bundleName = "i18n.strings_" + locale.getLanguage();
        currentBundle = ResourceBundle.getBundle(bundleName, locale);
        notifyListeners();
    }

    // –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–≤
    public String getLocalizedString(String key, Object... args) {
        String pattern = getString(key);
        return MessageFormat.format(pattern, args);
    }

    // Fallback –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π, –µ—Å–ª–∏ –Ω–µ—Ç –ø–µ—Ä–µ–≤–æ–¥–∞
    public String getStringWithFallback(String key) {
        try {
            return currentBundle.getString(key);
        } catch (MissingResourceException e) {
            try {
                ResourceBundle fallback = bundles.get(Locale.ENGLISH);
                return fallback.getString(key);
            } catch (Exception ex) {
                return key; // –ü–æ—Å–ª–µ–¥–Ω–∏–π fallback
            }
        }
    }
}
```

#### 10.2.2 –õ–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

**LocalizedButton:**
```java
public class LocalizedButton extends Button {
    private String localizationKey;

    public LocalizedButton(String localizationKey) {
        this.localizationKey = localizationKey;
        updateText();
    }

    private void updateText() {
        String text = LocalizationManager.getInstance()
            .getLocalizedString(localizationKey);
        setText(text);
    }
}
```

**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:**
```java
LocalizedButton newGameBtn = new LocalizedButton("main_menu.new_game");
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–∫–∞–∂–µ—Ç "New Game" –∏–ª–∏ "–ù–æ–≤–∞—è –∏–≥—Ä–∞" –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —è–∑—ã–∫–∞
```

### 10.3 LanguageSelector

#### 10.3.1 UI —Å–µ–ª–µ–∫—Ç–æ—Ä —è–∑—ã–∫–∞

**–§–∞–π–ª:** `src/main/java/uwu/openjfx/ui/LanguageSelector.java`

```java
public class LanguageSelector extends VBox {
    private ToggleGroup languageGroup;

    public LanguageSelector() {
        languageGroup = new ToggleGroup();

        RadioButton ruButton = new RadioButton("–†—É—Å—Å–∫–∏–π");
        ruButton.setToggleGroup(languageGroup);
        ruButton.setOnAction(e -> switchLanguage("ru"));

        RadioButton enButton = new RadioButton("English");
        enButton.setToggleGroup(languageGroup);
        enButton.setOnAction(e -> switchLanguage("en"));

        // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ä—É—Å—Å–∫–∏–π
        ruButton.setSelected(true);

        getChildren().addAll(ruButton, enButton);
    }

    private void switchLanguage(String languageCode) {
        LocalizationManager.getInstance().setLocale(languageCode);
        // –û–±–Ω–æ–≤–ª—è–µ–º –≤–µ—Å—å UI
        updateAllUI();
    }
}
```

### 10.4 –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä–æ–≤–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

#### 10.4.1 –ù–∞–∑–≤–∞–Ω–∏—è –≤—Ä–∞–≥–æ–≤

```properties
# –û–±—ã—á–Ω—ã–µ –≤—Ä–∞–≥–∏
enemy.goblin=–ì–æ–±–ª–∏–Ω
enemy.orc=–û—Ä–∫
enemy.skeleton=–°–∫–µ–ª–µ—Ç
enemy.zombie=–ó–æ–º–±–∏
enemy.bat=–õ–µ—Ç—É—á–∞—è –º—ã—à—å
enemy.spider=–ü–∞—É–∫

# –ú–∏–Ω–∏-–±–æ—Å—Å—ã
enemy.orc_chieftain=–í–æ–∂–¥—å –æ—Ä–∫–æ–≤
enemy.troll=–¢—Ä–æ–ª–ª—å
enemy.demon=–î–µ–º–æ–Ω

# –ë–æ—Å—Å—ã
enemy.stone_golem=–ö–∞–º–µ–Ω–Ω—ã–π –≥–æ–ª–µ–º
enemy.forest_guardian=–°—Ç—Ä–∞–∂ –ª–µ—Å–∞
enemy.evil_wizard=–ó–ª–æ–π –≤–æ–ª—à–µ–±–Ω–∏–∫
enemy.final_boss=–§–∏–Ω–∞–ª—å–Ω—ã–π –±–æ—Å—Å
```

#### 10.4.2 –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π

```properties
# –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è
achievement.first_kill=–ü–µ—Ä–≤–∞—è –∫—Ä–æ–≤—å
achievement.first_kill.desc=–£–±–µ–π—Ç–µ –ø–µ—Ä–≤–æ–≥–æ –≤—Ä–∞–≥–∞

achievement.gold_collector=–°–æ–±–∏—Ä–∞—Ç–µ–ª—å –∑–æ–ª–æ—Ç–∞
achievement.gold_collector.desc=–°–æ–±–µ—Ä–∏—Ç–µ 100 –º–æ–Ω–µ—Ç

achievement.explorer=–ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å
achievement.explorer.desc=–ü–æ—Å–µ—Ç–∏—Ç–µ 10 –∫–æ–º–Ω–∞—Ç
```

#### 10.4.3 –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è –æ—à–∏–±–æ–∫

```properties
# –°–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
error.save_failed=–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–≥—Ä—ã
error.load_failed=–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–≥—Ä—ã
error.weapon_not_found=–û—Ä—É–∂–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ
error.room_not_found=–ö–æ–º–Ω–∞—Ç–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞
error.asset_not_loaded=–†–µ—Å—É—Ä—Å –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω
```

### 10.5 –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤

#### 10.5.1 –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª—é—á–µ–π

```java
public class LocalizationKeyGenerator {
    public static String generateKey(String category, String name) {
        return String.format("%s.%s", category, name).toLowerCase();
    }

    // –ü—Ä–∏–º–µ—Ä—ã:
    generateKey("weapon", "golden_sword_0") ‚Üí "weapon.golden_sword_0"
    generateKey("enemy", "goblin") ‚Üí "enemy.goblin"
    generateKey("item", "health_potion") ‚Üí "item.health_potion"
}
```

#### 10.5.2 –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤

```java
public class LocalizationValidator {
    public Set<String> findMissingTranslations(String baseLanguage, String targetLanguage) {
        ResourceBundle base = ResourceBundle.getBundle("i18n.strings_" + baseLanguage);
        ResourceBundle target = ResourceBundle.getBundle("i18n.strings_" + targetLanguage);

        Set<String> missing = new HashSet<>();
        for (String key : base.keySet()) {
            if (!target.containsKey(key)) {
                missing.add(key);
            }
        }
        return missing;
    }
}
```

---

## 11. –ê–ù–ê–õ–ò–ó –ö–ê–ß–ï–°–¢–í–ê –ö–û–î–ê

### 11.1 –û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞

#### 11.1.1 –°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã

‚úÖ **–ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**
- –ß—ë—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –º–æ–¥—É–ª–∏
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ ModuleManager
- Graceful shutdown

‚úÖ **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã**
- GameConstants.java –¥–ª—è –≤—Å–µ—Ö magic numbers
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è
- –õ—ë–≥–∫–∞—è –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞

‚úÖ **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Entity-Component –ø–∞—Ç—Ç–µ—Ä–Ω–∞
- –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
- –ì–∏–±–∫–æ—Å—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è

‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**
- –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ GameLogger
- Try-catch –≤ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –º–µ—Å—Ç–∞—Ö
- Fallback –º–µ—Ö–∞–Ω–∏–∑–º—ã

‚úÖ **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**
- 80+ MD —Ñ–∞–π–ª–æ–≤ —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π
- –ü–æ–¥—Ä–æ–±–Ω—ã–µ README
- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ –∫–æ–¥–µ

#### 11.1.2 –û–±–ª–∞—Å—Ç–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è

‚ö†Ô∏è **–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–ª—è –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö**
```java
// PlayerComponent.java - –ø—Ä–æ–±–ª–µ–º–∞—Ç–∏—á–Ω–æ
private static Weapon currentWeapon;
private static final List<Weapon> weaponInventoryList = new ArrayList<>();
private static double attackPower = 1;
```
**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–∞—Ä—É—à–µ–Ω–∏–µ –∏–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏–∏, —Å–ª–æ–∂–Ω–æ—Å—Ç—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–∏–Ω–≥–ª—Ç–æ–Ω –∏–ª–∏ –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

‚ö†Ô∏è **Magic strings –≤ –∫–æ–¥–µ**
```java
// –í–º–µ—Å—Ç–æ –∫–æ–Ω—Å—Ç–∞–Ω—Ç
if (weaponType.equals("golden_sword_0")) { ... }
```
**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Enum –∏–ª–∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏–∑ GameConstants

‚ö†Ô∏è **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞**
- –ü–æ—Ö–æ–∂–∏–µ –º–µ—Ç–æ–¥—ã –≤ —Ä–∞–∑–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö
- –ü–æ–≤—Ç–æ—Ä—è—é—â–∞—è—Å—è –ª–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–æ–ª–ª–∏–∑–∏–π
**–†–µ—à–µ–Ω–∏–µ:** –í—ã–¥–µ–ª–µ–Ω–∏–µ –≤ –±–∞–∑–æ–≤—ã–µ –∫–ª–∞—Å—Å—ã –∏–ª–∏ —É—Ç–∏–ª–∏—Ç—ã

### 11.2 –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑

#### 11.2.1 Checkstyle

**–§–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:** `cs2340_checks.xml`

**–ü—Ä–æ–±–ª–µ–º—ã (–ø–æ –æ—Ç—á—ë—Ç—É DETAILED_PROBLEM_ANALYSIS.md):**

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ | –ü—Ä–∏–º–µ—Ä |
|-----------|------------|--------|
| **–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** | 35 | –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã, –ø–µ—Ä–µ–Ω–æ—Å—ã —Å—Ç—Ä–æ–∫ |
| **–ò–º–µ–Ω–æ–≤–∞–Ω–∏–µ** | 22 | camelCase vs snake_case |
| **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** | 18 | –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ JavaDoc –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ |

#### 11.2.2 SpotBugs

**–ù–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã (125 –ø—Ä–æ–±–ª–µ–º –ø–æ 4 –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º):**

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ (18):**
- ST_WRITE_TO_STATIC_FROM_INSTANCE_METHOD - –∑–∞–ø–∏—Å—å –≤ static –ø–æ–ª—è –∏–∑ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞
- NP_NULL_ON_SOME_PATH - –≤–æ–∑–º–æ–∂–Ω—ã–π NullPointerException
- DM_STRING_CTOR - –Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä–æ–∫

**–í—ã—Å–æ–∫–∏–µ (36):**
- DLS_DEAD_LOCAL_STORE - –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ª–æ–∫–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
- UWF_UNWRITTEN_FIELD - –∑–∞–ø–∏—Å—å –≤ –Ω–µ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—è

**–°—Ä–µ–¥–Ω–∏–µ (50):**
- RCN_REDUNDANT_NULLCHECK_OF_NULL_VALUE - –∏–∑–±—ã—Ç–æ—á–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ null

**–ù–∏–∑–∫–∏–µ (24):**
- SIC_INNER_SHOULD_BE_STATIC - –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –∫–ª–∞—Å—Å—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å static

### 11.3 Code Smells

#### 11.3.1 God Objects

**MainApp.java** - 457 —Å—Ç—Ä–æ–∫, —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏:
```java
// –ü—Ä–æ–±–ª–µ–º–∞: –∫–ª–∞—Å—Å –¥–µ–ª–∞–µ—Ç –≤—Å—ë
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–¥—É–ª–µ–π
- –ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ–∏–∑–∏–∫–∏
- –°–æ–∑–¥–∞–Ω–∏–µ –∏–≥—Ä–æ–∫–∞
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–∞–º–µ—Ä—ã
- –ò –º–Ω–æ–≥–æ–µ –¥—Ä—É–≥–æ–µ
```

**–†–µ—à–µ–Ω–∏–µ:** –†–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞ –±–æ–ª–µ–µ –º–µ–ª–∫–∏–µ –∫–ª–∞—Å—Å—ã

#### 11.3.2 Data Classes

**GameSaveData.java:**
```java
// –ü—Ä–æ–±–ª–µ–º–∞: —Ç–æ–ª—å–∫–æ –≥–µ—Ç—Ç–µ—Ä—ã/—Å–µ—Ç—Ç–µ—Ä—ã, –Ω–µ—Ç –ª–æ–≥–∏–∫–∏
public class GameSaveData implements Serializable {
    private int level;
    private int gold;
    // ... —Ç–æ–ª—å–∫–æ –¥–∞–Ω–Ω—ã–µ
}
```

#### 11.3.3 Long Methods

**PlayerComponent.onUpdate()** - ~100 —Å—Ç—Ä–æ–∫ –≤ –æ–¥–Ω–æ–º –º–µ—Ç–æ–¥–µ
```java
// –°–ª–µ–¥—É–µ—Ç —Ä–∞–∑–±–∏—Ç—å –Ω–∞:
- updateMovement()
- updateAnimation()
- updateCooldowns()
- handleInput()
```

### 11.4 –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏

#### 11.4.1 –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

- **–¢–µ—Å—Ç–æ–≤—ã—Ö –∫–ª–∞—Å—Å–æ–≤:** 18
- **–¢–µ—Å—Ç–æ–≤—ã—Ö –º–µ—Ç–æ–¥–æ–≤:** ~50
- **–ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞:** ~15% (–æ—Ü–µ–Ω–æ—á–Ω–æ)

#### 11.4.2 –¢–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã

```
src/test/java/uwu/openjfx/
‚îú‚îÄ‚îÄ GameMapTest.java
‚îú‚îÄ‚îÄ PlayerComponentTest.java
‚îú‚îÄ‚îÄ collision/
‚îÇ   ‚îú‚îÄ‚îÄ TestPlayerEnemyCollisionHandler.java
‚îÇ   ‚îú‚îÄ‚îÄ TestPlayerCoinCollisionHandler.java
‚îÇ   ‚îú‚îÄ‚îÄ TestPlayerChestCollisionHandler.java
‚îÇ   ‚îî‚îÄ‚îÄ ... (8 —Ñ–∞–π–ª–æ–≤)
‚îú‚îÄ‚îÄ TestFinalBoss.java
‚îî‚îÄ‚îÄ ... (6 –¥—Ä—É–≥–∏—Ö —Ñ–∞–π–ª–æ–≤)
```

#### 11.4.3 –ü—Ä–∏–º–µ—Ä —Ç–µ—Å—Ç–∞

```java
@ExtendWith(MockitoExtension.class)
class PlayerComponentTest {

    @Mock
    private PhysicsComponent physics;

    @InjectMocks
    private PlayerComponent playerComponent;

    @Test
    public void testAttackDamage() {
        // –¢–µ—Å—Ç —É—Ä–æ–Ω–∞ –æ—Ç –∞—Ç–∞–∫–∏
        playerComponent.setAttackPower(1.5);
        assertEquals(1.5, playerComponent.getAttackPower(), 0.01);
    }

    @Test
    public void testHealthPotion() {
        playerComponent.setHealthPoints(15);
        playerComponent.useHealthPotion();
        assertEquals(17, playerComponent.getHealthPoints());
    }
}
```

#### 11.4.4 –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

**–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è:**
- –í—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (—Å–µ–π—á–∞—Å –ø–æ–∫—Ä—ã—Ç–æ ~30%)
- –ú–æ–¥—É–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã (ModuleManager)
- –°–∏—Å—Ç–µ–º—ã –∫–æ–ª–ª–∏–∑–∏–π (–≤—Å–µ 14 –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤)
- –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏
- –°–∏—Å—Ç–µ–º—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–π
- –§–∞–±—Ä–∏–∫ (CreatureFactory, WeaponFactory)

**–¶–µ–ª—å:** –î–æ—Å—Ç–∏—á—å 70%+ –ø–æ–∫—Ä—ã—Ç–∏—è –∫–æ–¥–∞

---

## 12. –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø –ò –£–õ–£–ß–®–ï–ù–ò–Ø

### 12.1 –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (FINAL –≤–µ—Ä—Å–∏—è)

#### 12.1.1 –°–∏—Å—Ç–µ–º–∞ –∑–¥–æ—Ä–æ–≤—å—è

**–ü—Ä–æ–±–ª–µ–º–∞:** HP –∏–≥—Ä–æ–∫–∞ = 100, –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –±–∞–ª–∞–Ω—Å—É
```java
// –ë—ã–ª–æ (–æ—à–∏–±–∫–∞)
private static int maxHealthPoints = 100;

// –°—Ç–∞–ª–æ (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ)
private static int maxHealthPoints = 20; // 4 —Å–µ—Ä–¥—Ü–∞
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –ë–µ—Å—Å–º–µ—Ä—Ç–∏–µ –ø—Ä–∏ –±—Ä–æ–Ω–µ = 0
```java
// –ë—ã–ª–æ (–æ—à–∏–±–∫–∞)
public void deductHealth(double point, ...) {
    int finalDamage = (int) Math.ceil(point * attackPower / armor);
    healthPoints -= finalDamage;
    // –ï—Å–ª–∏ armor = 0, –¥–µ–ª–µ–Ω–∏–µ –Ω–∞ 0!
}

// –°—Ç–∞–ª–æ (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ)
public void deductHealth(double point, ...) {
    if (armor <= 0) armor = 1; // –ú–∏–Ω–∏–º—É–º 1 –±—Ä–æ–Ω—è
    int finalDamage = (int) Math.ceil(point * attackPower / armor);
    healthPoints -= finalDamage;
}
```

#### 12.1.2 –°–∫–æ—Ä–æ—Å—Ç—å –∏ –±–∞–ª–∞–Ω—Å

**–ü—Ä–æ–±–ª–µ–º–∞:** –°–ª–∏—à–∫–æ–º –≤—ã—Å–æ–∫–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –∏–≥—Ä–æ–∫–∞
```java
// –ë—ã–ª–æ: 300
private double speed = 300;

// –°—Ç–∞–ª–æ: 180 (–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–æ)
private double speed = 180;
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –°–∫–æ—Ä–æ—Å—Ç—å –≤—Ä–∞–≥–æ–≤ –Ω–µ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∞
```java
// –°—Ç–∞–ª–æ: —Ä–∞–∑–Ω—ã–µ —Å–∫–æ—Ä–æ—Å—Ç–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤
Enemy.DEFAULT_SPEED = 60.0
Enemy.SMALL_MINION_SPEED = 40.0
Enemy.MINIBOSS_SPEED = 30.0
```

#### 12.1.3 –í–∏–∑—É–∞–ª—å–Ω—ã–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã

**–ü—Ä–æ–±–ª–µ–º–∞:** –§–∏–æ–ª–µ—Ç–æ–≤—ã–µ —Ü–≤–µ—Ç–∞ –≤ –∞–Ω–∏–º–∞—Ü–∏—è—Ö Magic Staff
```java
// –ë—ã–ª–æ: PURPLE/MAGENTA
put("color", Color.PURPLE);

// –°—Ç–∞–ª–æ: ORANGE/RED/CYAN
put("color", Color.ORANGE);
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—É—Ç–∏ –∫ —Ä–µ—Å—É—Ä—Å–∞–º
```java
// –ë—ã–ª–æ: ./weapons/
loadTexture("weapons/magic1_32x32.png");

// –°—Ç–∞–ª–æ: weapons/
loadTexture("weapons/magic1_32x32.png");
```

#### 12.1.4 –°–∏—Å—Ç–µ–º–∞ –Ω–µ—É—è–∑–≤–∏–º–æ—Å—Ç–∏

**–ü—Ä–æ–±–ª–µ–º–∞:** –°–ª–∏—à–∫–æ–º –¥–æ–ª–≥–∞—è –Ω–µ—É—è–∑–≤–∏–º–æ—Å—Ç—å (2000–º—Å)
```java
// –ë—ã–ª–æ
FXGL.getGameTimer().runOnceAfter(() -> {
    isInvulnerable = false;
}, Duration.millis(2000));

// –°—Ç–∞–ª–æ: 500–º—Å –¥–ª—è –∏–≥—Ä–æ–∫–∞, 100–º—Å –¥–ª—è –≤—Ä–∞–≥–æ–≤
FXGL.getGameTimer().runOnceAfter(() -> {
    isInvulnerable = false;
}, Duration.millis(!(this instanceof EnemyComponent) ? 500 : 100));
```

### 12.2 –£–ª—É—á—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

#### 12.2.1 –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤

**ResourceManager.java:**
```java
public class ResourceManager {
    private Map<String, Resource> cache = new ConcurrentHashMap<>();

    public InputStream getResourceAsStream(String path) {
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫—ç—à
        if (cache.containsKey(path)) {
            return cache.get(path).getInputStream();
        }
        // –ó–∞–≥—Ä—É–∂–∞–µ–º –∏ –∫—ç—à–∏—Ä—É–µ–º
        InputStream is = loadResource(path);
        cache.put(path, new Resource(is));
        return is;
    }
}
```

#### 12.2.2 –õ–µ–Ω–∏–≤–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è

**PlayerComponent:**
```java
@Override
public void onAdded() {
    // –õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∞–Ω–∏–º–∞—Ü–∏–π
    if (!MainApp.isIsTesting()) {
        animIdle = new AnimationChannel(...);
        texture = new AnimatedTexture(animIdle);
    }
}
```

### 12.3 –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥

#### 12.3.1 –í—ã–¥–µ–ª–µ–Ω–∏–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç

**–ë—ã–ª–æ:**
```java
// –í –∫–æ–¥–µ
if (damage > 50) { // Magic number!
    // ...
}
```

**–°—Ç–∞–ª–æ:**
```java
// –ò—Å–ø–æ–ª—å–∑—É–µ–º –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã
if (damage > GameConstants.Combat.HEAVY_ATTACK_THRESHOLD) {
    // ...
}
```

#### 12.3.2 –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è

**–ë—ã–ª–æ:** –ü–æ—Ö–æ–∂–∏–µ –º–µ—Ç–æ–¥—ã –≤ —Ä–∞–∑–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö
```java
// PlayerComponent.java
private void checkHealth() {
    if (healthPoints <= 0) {
        die();
    }
}

// EnemyComponent.java
private void checkHealth() {
    if (healthPoints <= 0) {
        die();
    }
}
```

**–°—Ç–∞–ª–æ:** –í—ã–Ω–µ—Å–ª–∏ –≤ –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å
```java
// CreatureComponent.java
protected void checkHealth() {
    if (healthPoints <= 0) {
        die();
    }
}
```

---

## 13. –¢–°–¢–ò–†–û–í–ê–ù–ò–ï

### 13.1 –°—Ç—Ä–∞—Ç–µ–≥–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

#### 13.1.1 –£—Ä–æ–≤–Ω–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

1. **Unit —Ç–µ—Å—Ç—ã** - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
2. **Integration —Ç–µ—Å—Ç—ã** - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –º–æ–¥—É–ª–µ–π
3. **UI —Ç–µ—Å—Ç—ã** - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
4. **System —Ç–µ—Å—Ç—ã** - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ–π —Å–∏—Å—Ç–µ–º—ã

#### 13.1.2 –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏

| –§—Ä–µ–π–º–≤–æ—Ä–∫ | –í–µ—Ä—Å–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|-----------|--------|------------|
| **JUnit Jupiter** | 5.10.1 | –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ |
| **TestFX** | 4.0.16-alpha | UI —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ |
| **Mockito** | 5.10.0 | –°–æ–∑–¥–∞–Ω–∏–µ mock-–æ–±—ä–µ–∫—Ç–æ–≤ |
| **Hamcrest** | 2.2 | Matcher'—ã –¥–ª—è assertions |

### 13.2 Unit —Ç–µ—Å—Ç—ã

#### 13.2.1 –¢–µ—Å—Ç—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

**PlayerComponentTest.java:**
```java
@ExtendWith(MockitoExtension.class)
class PlayerComponentTest {

    @Mock
    private PhysicsComponent physics;

    @InjectMocks
    private PlayerComponent playerComponent;

    @Test
    @DisplayName("–ü—Ä–æ–≤–µ—Ä–∫–∞ –∞—Ç–∞–∫–∏ –º–µ—á–æ–º")
    void testSwordAttack() {
        // Arrange
        playerComponent.setCurrentWeapon(new GoldenSword0());

        // Act
        playerComponent.attack();

        // Assert
        verify(physics).setVelocityX(anyDouble());
        verify(physics).setVelocityY(anyDouble());
    }

    @Test
    @DisplayName("–ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–µ—á–µ–Ω–∏—è –∑–µ–ª—å–µ–º")
    void testHealthPotion() {
        // Arrange
        playerComponent.setHealthPoints(15);

        // Act
        playerComponent.useHealthPotion();

        // Assert
        assertEquals(17, playerComponent.getHealthPoints());
    }

    @Test
    @DisplayName("–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–º–µ—Ä—Ç–∏ –∏–≥—Ä–æ–∫–∞")
    void testPlayerDeath() {
        // Arrange
        playerComponent.setHealthPoints(5);

        // Act
        playerComponent.takeDamage(10);

        // Assert
        assertTrue(playerComponent.isDead());
    }
}
```

#### 13.2.2 –¢–µ—Å—Ç—ã –∫–æ–ª–ª–∏–∑–∏–π

**TestPlayerEnemyCollisionHandler.java:**
```java
@SpringBootTest
@TestMethodOrder(OrderAnnotation.class)
class TestPlayerEnemyCollisionHandler {

    @Mock
    private PlayerComponent playerComponent;

    @Mock
    private EnemyComponent enemyComponent;

    @InjectMocks
    private PlayerEnemyCollisionHandler handler;

    @Test
    @Order(1)
    @DisplayName("–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —É—Ä–æ–Ω–∞ –∏–≥—Ä–æ–∫–æ–º")
    void testPlayerTakesDamage() {
        // Arrange
        Entity player = mock(Entity.class);
        Entity enemy = mock(Entity.class);
        when(player.getComponent(PlayerComponent.class)).thenReturn(playerComponent);
        when(enemy.getComponent(EnemyComponent.class)).thenReturn(enemyComponent);

        // Act
        handler.onCollisionBegin(player, enemy);

        // Assert
        verify(playerComponent).takeDamage(anyDouble());
    }

    @Test
    @Order(2)
    @DisplayName("–ü—Ä–æ–≤–µ—Ä–∫–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –∞—Ç–∞–∫–∏")
    void testAttackBlocked() {
        // Arrange
        playerComponent.setBlockProbability(1.0); // 100% –±–ª–æ–∫

        // Act
        playerComponent.takeDamage(10);

        // Assert
        verify(playerComponent, never()).deductHealth(anyDouble());
    }
}
```

#### 13.2.3 –¢–µ—Å—Ç—ã –∫–∞—Ä—Ç—ã

**GameMapTest.java:**
```java
@ExtendWith(MockitoExtension.class)
class GameMapTest {

    @Test
    @DisplayName("–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–º–Ω–∞—Ç")
    void testRoomGeneration() {
        // Act
        GameMap gameMap = new GameMap(10);

        // Assert
        assertEquals(10, gameMap.getRoomCount());
    }

    @Test
    @DisplayName("–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∫–æ–º–Ω–∞—Ç")
    void testRoomConnections() {
        // Arrange
        GameMap gameMap = new GameMap(5);

        // Act
        gameMap.connectRooms();

        // Assert
        assertTrue(gameMap.areAllRoomsConnected());
    }

    @Test
    @DisplayName("–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–∏—Å–∫–∞ –ø—É—Ç–∏")
    void testPathfinding() {
        // Arrange
        GameMap gameMap = new GameMap(10);
        Room start = gameMap.getRoom(0);
        Room end = gameMap.getRoom(9);

        // Act
        List<Room> path = gameMap.findPath(start, end);

        // Assert
        assertNotNull(path);
        assertTrue(path.size() > 0);
    }
}
```

### 13.3 UI —Ç–µ—Å—Ç—ã

#### 13.3.1 TestFX

**GameHUDTest.java:**
```java
@TestFX
class GameHUDTest {

    private GameHUD gameHUD;

    @BeforeEach
    void setUp() {
        // –ó–∞–ø—É—Å–∫ JavaFX –≤ —Ç–µ—Å—Ç–æ–≤–æ–º —Ä–µ–∂–∏–º–µ
        MainApp.setIsTesting(true);
        Entity player = spawn("player", 100, 100);
        gameHUD = new GameHUD(player.getComponent(PlayerComponent.class));
    }

    @Test
    @DisplayName("–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–¥–æ—Ä–æ–≤—å—è –≤ HUD")
    void testHealthUpdate() throws InterruptedException {
        // Arrange
        PlayerComponent playerComponent = player.getComponent(PlayerComponent.class);

        // Act
        playerComponent.setHealthPoints(15);
        Thread.sleep(100); // –ñ–¥—ë–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è UI

        // Assert
        Text healthText = lookup("#healthText").query();
        assertEquals("15", healthText.getText());
    }

    @Test
    @DisplayName("–ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∑–æ–ª–æ—Ç–∞")
    void testGoldDisplay() {
        // Arrange
        PlayerComponent playerComponent = player.getComponent(PlayerComponent.class);
        playerComponent.setGold(100);

        // Act
        gameHUD.updateUI();

        // Assert
        Text goldText = lookup("#goldText").query();
        assertEquals("100", goldText.getText());
    }

    @Test
    @DisplayName("–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∑–µ–ª—å—è –∑–¥–æ—Ä–æ–≤—å—è")
    void testUseHealthPotion() throws InterruptedException {
        // Arrange
        PlayerComponent playerComponent = player.getComponent(PlayerComponent.class);
        playerComponent.setHealthPoints(15);
        playerComponent.addHealthPotion();

        // Act
        clickOn("#healthPotionButton");
        Thread.sleep(100);

        // Assert
        assertEquals(17, playerComponent.getHealthPoints());
        assertEquals(0, playerComponent.getHealthPotions());
    }
}
```

### 13.4 Integration —Ç–µ—Å—Ç—ã

#### 13.4.1 –¢–µ—Å—Ç—ã –º–æ–¥—É–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã

**ModuleManagerTest.java:**
```java
@SpringBootTest
class ModuleManagerTest {

    @Test
    @DisplayName("–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –º–æ–¥—É–ª—è")
    void testModuleRegistration() {
        // Arrange
        ModuleManager manager = ModuleManager.getInstance();
        GameModule module = new CoreModule();

        // Act
        manager.registerModule(module);

        // Assert
        assertTrue(manager.hasModule(module.getName()));
    }

    @Test
    @DisplayName("–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–¥—É–ª–µ–π")
    void testModuleInitialization() throws Exception {
        // Arrange
        ModuleManager manager = ModuleManager.getInstance();
        manager.registerModule(new CoreModule());
        manager.registerModule(new AssetModule());

        // Act
        manager.initializeAll();

        // Assert
        assertTrue(manager.isInitialized());
        assertEquals(2, manager.getModuleCount());
    }

    @Test
    @DisplayName("Graceful shutdown")
    void testGracefulShutdown() {
        // Arrange
        ModuleManager manager = ModuleManager.getInstance();
        manager.registerModule(new CoreModule());

        // Act
        manager.initializeAll();
        manager.shutdownAll();

        // Assert
        assertFalse(manager.isInitialized());
    }
}
```

#### 13.4.2 –¢–µ—Å—Ç—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è

**GameSaveManagerTest.java:**
```java
@SpringBootTest
class GameSaveManagerTest {

    @Autowired
    private GameSaveManager saveManager;

    @Test
    @DisplayName("–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–≥—Ä—ã")
    void testSaveGame() throws Exception {
        // Arrange
        PlayerComponent playerComponent = spawn("player", 100, 100).getComponent(PlayerComponent.class);
        playerComponent.setLevel(5);
        playerComponent.setGold(500);

        // Act
        saveManager.saveGame("test_save");

        // Assert
        assertTrue(saveManager.saveExists("test_save"));
    }

    @Test
    @DisplayName("–ó–∞–≥—Ä—É–∑–∫–∞ –∏–≥—Ä—ã")
    void testLoadGame() throws Exception {
        // Arrange
        saveManager.saveGame("test_save");

        // Act
        GameSaveData data = saveManager.loadGame("test_save");

        // Assert
        assertEquals(5, data.getLevel());
        assertEquals(500, data.getGold());
    }

    @Test
    @DisplayName("–ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ")
    void testAutoSave() throws InterruptedException {
        // Arrange
        saveManager.startAutoSave();

        // Act
        Thread.sleep(6000); // –ñ–¥—ë–º –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è

        // Assert
        assertTrue(saveManager.saveExists("autosave_"));
    }
}
```

### 13.5 –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏

#### 13.5.1 –¢–µ–∫—É—â–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ

| –°–∏—Å—Ç–µ–º–∞ | –ü–æ–∫—Ä—ã—Ç–∏–µ |
|---------|----------|
| **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–≥—Ä–æ–∫–∞** | 40% |
| **–°–∏—Å—Ç–µ–º—ã –∫–æ–ª–ª–∏–∑–∏–π** | 60% |
| **UI/HUD** | 30% |
| **–ú–æ–¥—É–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞** | 70% |
| **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è** | 50% |
| **–ö–∞—Ä—Ç–∞** | 65% |
| **–õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è** | 10% |
| **–û—Ä—É–∂–∏–µ** | 20% |
| **–§–∞–±—Ä–∏–∫–∏** | 15% |
| **–£—Ç–∏–ª–∏—Ç—ã** | 25% |
| **–û–±—â–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ** | **~15%** |

#### 13.5.2 –¶–µ–ª—å –ø–æ –ø–æ–∫—Ä—ã—Ç–∏—é

**–ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω–∞—è —Ü–µ–ª—å (1 –º–µ—Å—è—Ü):** 50%
**–î–æ–ª–≥–æ—Å—Ä–æ—á–Ω–∞—è —Ü–µ–ª—å (3 –º–µ—Å—è—Ü–∞):** 70%
**–ò–¥–µ–∞–ª—å–Ω–∞—è —Ü–µ–ª—å:** 80%+

#### 13.5.3 –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

1. **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Å–∏—Å—Ç–µ–º—ã:**
   - ModuleManager (—É–∂–µ 70%)
   - –°–∏—Å—Ç–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–π
   - –°–∏—Å—Ç–µ–º–∞ –∫–æ–ª–ª–∏–∑–∏–π

2. **–ò–≥—Ä–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
   - PlayerComponent
   - EnemyComponent
   - CreatureComponent

3. **UI:**
   - GameHUD
   - Menus
   - Localization

4. **–£—Ç–∏–ª–∏—Ç—ã:**
   - GameLogger
   - ConfigManager
   - AudioManager

### 13.6 –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

#### 13.6.1 JMH —Ç–µ—Å—Ç—ã

```java
@BenchmarkMode(Mode.AverageTime)
@OutputTimeUnit(TimeUnit.MICROSECONDS)
public class PerformanceTest {

    @Benchmark
    public void testPlayerMovementUpdate() {
        PlayerComponent player = new PlayerComponent(20);
        player.onUpdate(0.016); // 60 FPS
    }

    @Benchmark
    public void testCollisionDetection() {
        PlayerEnemyCollisionHandler handler = new PlayerEnemyCollisionHandler();
        Entity player = spawn("player", 0, 0);
        Entity enemy = spawn("enemy", 50, 50);
        handler.onCollisionBegin(player, enemy);
    }

    @Benchmark
    public void testResourceLoading() {
        ResourceManager manager = ResourceManager.getInstance();
        manager.getResourceAsStream("textures/player.png");
    }
}
```

---

## 14. –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø

### 14.1 –û–±–∑–æ—Ä –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

–ü—Ä–æ–µ–∫—Ç –∏–º–µ–µ—Ç –æ–±—à–∏—Ä–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é, —Å–æ—Å—Ç–æ—è—â—É—é –∏–∑ 80+ —Ñ–∞–π–ª–æ–≤ –≤ —Ñ–æ—Ä–º–∞—Ç–µ Markdown. –û–±—â–∏–π –æ–±—ä—ë–º –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –ø—Ä–µ–≤—ã—à–∞–µ—Ç 50,000 —Å—Ç—Ä–æ–∫.

### 14.2 –û—Å–Ω–æ–≤–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

#### 14.2.1 README.md - –û—Å–Ω–æ–≤–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

**–†–∞–∑–º–µ—Ä:** 296 —Å—Ç—Ä–æ–∫

**–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ:**
- –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ –∏ –µ–≥–æ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–µ–π
- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –∏ –∑–∞–ø—É—Å–∫—É
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤ –∏–≥—Ä–µ
- –û–ø–∏—Å–∞–Ω–∏–µ –∏–≥—Ä–æ–≤—ã—Ö —Å–∏—Å—Ç–µ–º
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏
- –ü–ª–∞–Ω —Ä–∞–∑–≤–∏—Ç–∏—è
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞—Ö

**–ö–ª—é—á–µ–≤—ã–µ —Ä–∞–∑–¥–µ–ª—ã:**
```markdown
# üéÆ Royal Demons - 2D Roguelike Game

## –û –ø—Ä–æ–µ–∫—Ç–µ
- 2D Dungeon Crawler –Ω–∞ Java
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç FXGL (JavaFX Game Library)
- –ü–æ–ª–Ω–∞—è –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ —Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫

## –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ —ç—Ç–æ–π –≤–µ—Ä—Å–∏–∏
- ‚úÖ –°–∫–æ—Ä–æ—Å—Ç—å –∏–≥—Ä–æ–∫–∞: 300 ‚Üí 180 (-40%)
- ‚úÖ HP –∏–≥—Ä–æ–∫–∞: 15 ‚Üí 5 (-67%)
- ‚úÖ –£–±—Ä–∞–Ω—ã —Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã NullPointerException'—ã
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–∞—Ä—Ç
```

#### 14.2.2 ARCHITECTURE.md - –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**–†–∞–∑–º–µ—Ä:** 523 —Å—Ç—Ä–æ–∫–∏

**–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ:**
- –ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã
- –û–ø–∏—Å–∞–Ω–∏–µ ModuleManager
- –ö—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ—Å—Ç—å (Platform –∫–ª–∞—Å—Å)
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞–º–∏ (ResourceManager)
- –°–∏—Å—Ç–µ–º–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (ConfigManager)
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (GameLogger)
- –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
- –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

**–ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞ –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:**
```java
// –°–æ–∑–¥–∞–Ω–∏–µ –º–æ–¥—É–ª—è
public class MyModule implements GameModule {
    @Override
    public void initialize() throws ModuleException {
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    }

    @Override
    public void shutdown() throws ModuleException {
        // –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ
    }
}

// –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
moduleManager.registerModule(new MyModule());
moduleManager.initializeAll();
```

#### 14.2.3 GAME_MECHANICS_AND_FUNCTIONS.md - –ò–≥—Ä–æ–≤—ã–µ –º–µ—Ö–∞–Ω–∏–∫–∏

**–†–∞–∑–º–µ—Ä:** 755 —Å—Ç—Ä–æ–∫

**–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ:**
- –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö –∏–≥—Ä–æ–≤—ã—Ö –º–µ—Ö–∞–Ω–∏–∫
- –°–∏—Å—Ç–µ–º–∞ –∑–¥–æ—Ä–æ–≤—å—è –∏ –±–æ—è
- –û–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –æ—Ä—É–∂–∏—è
- –í—Ä–∞–≥–∏ –∏ –ò–ò
- –ü—Ä–æ–≥—Ä–µ—Å—Å–∏—è –∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
- –ö–∞—Ä—Ç—ã –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏—è
- –ü—Ä–µ–¥–º–µ—Ç—ã –∏ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å
- UI –∏ HUD
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∫–æ–¥–∞
- –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –±–∞–≥–∏

**–¢–∞–±–ª–∏—Ü–∞ –æ—Ä—É–∂–∏—è:**
```markdown
| –û—Ä—É–∂–∏–µ | –£—Ä–æ–Ω | –°–∫–æ—Ä–æ—Å—Ç—å | Ultimate | –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ |
|--------|------|----------|----------|-------------|
| Golden Sword 0 | 1.0 | –ù–æ—Ä–º–∞–ª—å–Ω–∞—è | –í–µ–µ—Ä –∫–∏–Ω–∂–∞–ª–æ–≤ | –ù–∞—á–∞–ª—å–Ω–æ–µ –æ—Ä—É–∂–∏–µ |
| Golden Sword 1 | 1.5 | +10% | –£–ª—É—á—à–µ–Ω–Ω—ã–π –≤–µ–µ—Ä | –°—Ä–µ–¥–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å |
| Heavy Sword | 2.5 | -30% | –ú–æ—â–Ω—ã–π —É–¥–∞—Ä | –ú–µ–¥–ª–µ–Ω–Ω–æ–µ, —Å–∏–ª—å–Ω–æ–µ |
```

### 14.3 –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –æ—Ç—á—ë—Ç—ã

#### 14.3.1 DETAILED_PROBLEM_ANALYSIS.md - –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º

**–†–∞–∑–º–µ—Ä:** ~1000 —Å—Ç—Ä–æ–∫

**–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ:**
- –ê–Ω–∞–ª–∏–∑ 6 –∫–ª—é—á–µ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤
- 90 –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º
- –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è: 15 –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö, 22 –≤—ã—Å–æ–∫–∏—Ö, 35 —Å—Ä–µ–¥–Ω–∏—Ö, 18 –Ω–∏–∑–∫–∏—Ö
- –î–µ—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º —Å—Ç—Ä–æ–∫
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–±–ª–µ–º:**
```
PlayerComponent.java:
[—Å—Ç—Ä–æ–∫–∞ 45] ‚ö†Ô∏è CRITICAL: static –ø–æ–ª–µ currentWeapon
[—Å—Ç—Ä–æ–∫–∞ 102] ‚ö†Ô∏è HIGH: Magic number 180 (—Å–∫–æ—Ä–æ—Å—Ç—å)
[—Å—Ç—Ä–æ–∫–∞ 156] ‚ö†Ô∏è MEDIUM: –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞

EnemyComponent.java:
[—Å—Ç—Ä–æ–∫–∞ 203] ‚ö†Ô∏è CRITICAL: NullPointerException —Ä–∏—Å–∫
[—Å—Ç—Ä–æ–∫–∞ 278] ‚ö†Ô∏è HIGH: Magic number 100 (health)
```

#### 14.3.2 SYSTEMS_ANALYSIS_SUPPLEMENT.md - –ê–Ω–∞–ª–∏–∑ —Å–∏—Å—Ç–µ–º

**–†–∞–∑–º–µ—Ä:** ~800 —Å—Ç—Ä–æ–∫

**–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ:**
- –ê–Ω–∞–ª–∏–∑ —Å–∏—Å—Ç–µ–º –∫–æ–ª–ª–∏–∑–∏–π (15 —Ñ–∞–π–ª–æ–≤)
- –ê–Ω–∞–ª–∏–∑ —Å–∏—Å—Ç–µ–º –æ—Ä—É–∂–∏—è (13 —Ñ–∞–π–ª–æ–≤)
- –ê–Ω–∞–ª–∏–∑ —Å–∏—Å—Ç–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–π –∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π (7 —Ñ–∞–π–ª–æ–≤)
- 35 –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é

#### 14.3.3 FINAL_ANALYSIS_REPORT.md - –ò—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á—ë—Ç

**–†–∞–∑–º–µ—Ä:** ~500 —Å—Ç—Ä–æ–∫

**–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ:**
- –°–≤–æ–¥–∫–∞ –≤—Å–µ—Ö 125 –ø—Ä–æ–±–ª–µ–º
- –ü–ª–∞–Ω –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π –Ω–∞ 4 —Ñ–∞–∑—ã
- –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Å–∏—Å—Ç–µ–º–∞–º
- –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä–∞–º–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º:**
```markdown
| –°–∏—Å—Ç–µ–º–∞ | –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ | –í—ã—Å–æ–∫–∏–µ | –°—Ä–µ–¥–Ω–∏–µ | –ù–∏–∑–∫–∏–µ | –ò—Ç–æ–≥–æ |
|---------|-------------|---------|---------|--------|-------|
| Player/Enemy Components | 12 | 15 | 20 | 8 | 55 |
| Enemy AI & Behaviors | 3 | 10 | 18 | 9 | 40 |
| UI & HUD | 1 | 3 | 5 | 3 | 12 |
| –°–∏—Å—Ç–µ–º—ã –∫–æ–ª–ª–∏–∑–∏–π | 0 | 3 | 2 | 1 | 6 |
| –°–∏—Å—Ç–µ–º—ã –æ—Ä—É–∂–∏—è | 2 | 2 | 3 | 2 | 9 |
| –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è | 0 | 3 | 2 | 1 | 6 |
| **–ò–¢–û–ì–û** | **18** | **36** | **50** | **24** | **128** |
```

### 14.4 –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ—Ç—á—ë—Ç—ã

#### 14.4.1 –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–≥–æ–≤

1. **HP_SYSTEM_FIX.md** - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã –∑–¥–æ—Ä–æ–≤—å—è
2. **HUD_FIX_REPORT.md** - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è HUD
3. **CRASH_FIX_REPORT.md** - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫—Ä–∞—à–µ–π
4. **FINAL_IMPROVEMENTS_REPORT.md** - –ò—Ç–æ–≥–æ–≤—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

#### 14.4.2 –°–∏—Å—Ç–µ–º–Ω—ã–µ –æ—Ç—á—ë—Ç—ã

1. **SYSTEMS_ANALYSIS_SUPPLEMENT.md** - –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Å–∏—Å—Ç–µ–º
2. **PERFORMANCE_OPTIMIZATION_REPORT.md** - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
3. **LOCALIZATION_COMPLETE_REPORT.md** - –û—Ç—á—ë—Ç –æ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏
4. **BALANCE_ADJUSTMENTS_REPORT.md** - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–ª–∞–Ω—Å–∞

### 14.5 –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API

#### 14.5.1 JavaDoc

**–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ:** –í –∫–æ–¥–µ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –Ω–µ—Ç JavaDoc –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤

**–ü—Ä–∏–º–µ—Ä –Ω–µ–¥–æ—Å—Ç–∞—é—â–µ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞:**
```java
// –ï—Å—Ç—å —Å–µ–π—á–∞—Å:
private void attack() {
    // ...
}

// –î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
/**
 * –í—ã–ø–æ–ª–Ω—è–µ—Ç –∞—Ç–∞–∫—É —Ç–µ–∫—É—â–∏–º –æ—Ä—É–∂–∏–µ–º –∏–≥—Ä–æ–∫–∞.
 * –°–æ–∑–¥–∞–µ—Ç —Ö–∏—Ç–±–æ–∫—Å –¥–ª—è –±–ª–∏–∂–Ω–µ–≥–æ –±–æ—è –∏–ª–∏ —Å–Ω–∞—Ä—è–¥ –¥–ª—è –¥–∞–ª—å–Ω–µ–≥–æ.
 *
 * @throws IllegalStateException –µ—Å–ª–∏ —Ç–µ–∫—É—â–µ–µ –æ—Ä—É–∂–∏–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ
 * @see Weapon#attack(double, double)
 */
private void attack() {
    // ...
}
```

#### 14.5.2 –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ JavaDoc

**–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –¥–ª—è:**
- –í—Å–µ—Ö public –º–µ—Ç–æ–¥–æ–≤
- –í—Å–µ—Ö –∫–ª–∞—Å—Å–æ–≤
- –í—Å–µ—Ö –ø–æ–ª–µ–π public static final (–∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã)
- –°–ª–æ–∂–Ω—ã—Ö –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤
- –ù–µ–æ—á–µ–≤–∏–¥–Ω–æ–π –ª–æ–≥–∏–∫–∏

### 14.6 –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

#### 14.6.1 CONTRIBUTING.md

**–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ:**
- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –≤–Ω–µ—Å–µ–Ω–∏—é –≤–∫–ª–∞–¥–∞
- –°—Ç–∏–ª—å –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è
- –ü—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è Pull Request
- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –ø–æ–º–æ—â–∏

#### 14.6.2 CHANGELOG.md

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```markdown
# Changelog

## [FINAL] - 2025-11-02
### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
- HP –∏–≥—Ä–æ–∫–∞: 15 ‚Üí 5
- –°–∫–æ—Ä–æ—Å—Ç—å –∏–≥—Ä–æ–∫–∞: 300 ‚Üí 180
- –£–±—Ä–∞–Ω—ã —Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã

### –î–æ–±–∞–≤–ª–µ–Ω–æ
- –ù–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏
- –£–ª—É—á—à–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–π

### –£–¥–∞–ª–µ–Ω–æ
- –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã
```

#### 14.6.3 ARCHITECTURE_DECISIONS.md

**–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ:**
- –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ –≤—ã–±–æ—Ä–∞ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è
- Trade-offs –∏ –∫–æ–º–ø—Ä–æ–º–∏—Å—Å—ã

### 14.7 –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

#### 14.7.1 MANUAL.md

**–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ:**
- –ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –û–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö –º–µ—Ö–∞–Ω–∏–∫
- –°–∫—Ä–∏–Ω—à–æ—Ç—ã –∏ –≥–µ–π–º–ø–ª–µ–π
- FAQ

#### 14.7.2 CONTROLS.md

**–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ:**
- –ü–æ–ª–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- –ö–æ–º–±–∏–Ω–∞—Ü–∏–∏ –∫–ª–∞–≤–∏—à
- –û–ø–∏—Å–∞–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π

### 14.8 –ö–∞—á–µ—Å—Ç–≤–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

#### 14.8.1 –°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã

‚úÖ **–û–±—ä—ë–º:** 80+ MD —Ñ–∞–π–ª–æ–≤, 50,000+ —Å—Ç—Ä–æ–∫
‚úÖ **–î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è:** –ü–æ–¥—Ä–æ–±–Ω—ã–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∫–æ–¥–∞
‚úÖ **–ê–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å:** –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –Ω–∞ 2 –Ω–æ—è–±—Ä—è 2025
‚úÖ **–°—Ç—Ä—É–∫—Ç—É—Ä–∞:** –õ–æ–≥–∏—á–Ω–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤
‚úÖ **–ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å:** –ß–∞—Å—Ç—å –Ω–∞ —Ä—É—Å—Å–∫–æ–º, —á–∞—Å—Ç—å –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º

#### 14.8.2 –û–±–ª–∞—Å—Ç–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è

‚ö†Ô∏è **JavaDoc –≤ –∫–æ–¥–µ:** –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
‚ö†Ô∏è **–î–∏–∞–≥—Ä–∞–º–º—ã:** –ù–µ—Ç UML –¥–∏–∞–≥—Ä–∞–º–º –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
‚ö†Ô∏è **–í–∏–¥–µ–æ:** –ù–µ—Ç –≤–∏–¥–µ–æ-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
‚ö†Ô∏è **–ì–∞–π–¥—ã:** –ú–∞–ª–æ –ø–æ—à–∞–≥–æ–≤—ã—Ö —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤

---

## 15. –ó–ê–í–ò–°–ò–ú–û–°–¢–ò –ò –ë–ò–ë–õ–ò–û–¢–ï–ö–ò

### 15.1 –ò–≥—Ä–æ–≤—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

#### 15.1.1 FXGL (JavaFX Game Library)

**–í–µ—Ä—Å–∏—è:** 17.3
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û—Å–Ω–æ–≤–Ω–æ–π –∏–≥—Ä–æ–≤–æ–π –¥–≤–∏–∂–æ–∫
**–õ–∏—Ü–µ–Ω–∑–∏—è:** Apache 2.0

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- 2D —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥
- –§–∏–∑–∏—á–µ—Å–∫–∏–π –¥–≤–∏–∂–æ–∫
- –°–∏—Å—Ç–µ–º–∞ –∞–Ω–∏–º–∞—Ü–∏–π
- Audio API
- Input handling
- Scene management
- Entity system

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –ø—Ä–æ–µ–∫—Ç–µ:**
```java
// –°–æ–∑–¥–∞–Ω–∏–µ —Å—É—â–Ω–æ—Å—Ç–∏
Entity player = Entities.builder()
    .at(100, 100)
    .type(EntityType.PLAYER)
    .with(new PlayerComponent(20))
    .build();

// –§–∏–∑–∏–∫–∞
FXGL.getPhysicsWorld().setGravity(0, 0);

// –ê–Ω–∏–º–∞—Ü–∏–∏
AnimationChannel anim = new AnimationChannel(
    FXGL.image("player.png"),
    9, 40, 55,
    Duration.seconds(0.5),
    0, 3
);
```

#### 15.1.2 AnimateFX

**–í–µ—Ä—Å–∏—è:** 1.2.1
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ê–Ω–∏–º–∞—Ü–∏–∏ UI —ç–ª–µ–º–µ–Ω—Ç–æ–≤
**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**

```java
// –ê–Ω–∏–º–∞—Ü–∏—è –∫–Ω–æ–ø–∫–∏
Button button = new Button("Click me");
BounceIn animation = new BounceIn(button);
animation.play();
```

### 15.2 JSON/YAML –ø–∞—Ä—Å–∏–Ω–≥

#### 15.2.1 Jackson Databind

**–í–µ—Ä—Å–∏—è:** 2.15.2
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–∞—Ä—Å–∏–Ω–≥ JSON
**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**

```java
ObjectMapper mapper = new ObjectMapper();
DifficultyConfig config = mapper.readValue(
    new File("config/difficulty.json"),
    DifficultyConfig.class
);

// –°–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–π
GameSaveData saveData = new GameSaveData();
mapper.writeValue(new File("saves/save.json"), saveData);
```

#### 15.2.2 Jackson YAML

**–í–µ—Ä—Å–∏—è:** 2.15.2
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–∞—Ä—Å–∏–Ω–≥ YAML
**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**

```java
YAMLFactory factory = new YAMLFactory();
ObjectMapper mapper = new ObjectMapper(factory);
GameConfig config = mapper.readValue(
    new File("config/game.yaml"),
    GameConfig.class
);
```

### 15.3 –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

#### 15.3.1 SLF4J (Simple Logging Facade for Java)

**–í–µ—Ä—Å–∏—è:** 2.0.9
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –§–∞—Å–∞–¥ –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**

```java
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

private static final Logger logger = LoggerFactory.getLogger(PlayerComponent.class);

public void attack() {
    logger.info("Player attacking with {}", currentWeapon.getName());
    if (currentWeapon == null) {
        logger.error("No weapon equipped!");
        return;
    }
}
```

#### 15.3.2 Logback

**–í–µ—Ä—Å–∏—è:** 1.4.11
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (logback.xml):**

```xml
<configuration>
    <appender name="FILE" class="ch.qos.logback.core.FileAppender">
        <file>logs/royal-demons.log</file>
        <encoder>
            <pattern>%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n</pattern>
        </encoder>
    </appender>

    <appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
        <encoder>
            <pattern>%d{HH:mm:ss} %-5level - %msg%n</pattern>
        </encoder>
    </appender>

    <root level="INFO">
        <appender-ref ref="FILE" />
        <appender-ref ref="STDOUT" />
    </root>
</configuration>
```

### 15.4 –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

#### 15.4.1 JUnit Jupiter

**–í–µ—Ä—Å–∏—è:** 5.10.1
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** Unit —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**

```java
@ExtendWith(MockitoExtension.class)
class PlayerComponentTest {

    @Mock
    private PhysicsComponent physics;

    @InjectMocks
    private PlayerComponent playerComponent;

    @Test
    void testAttack() {
        // Arrange
        playerComponent.setCurrentWeapon(new GoldenSword0());

        // Act
        playerComponent.attack();

        // Assert
        verify(physics).setVelocityX(anyDouble());
    }
}
```

#### 15.4.2 TestFX

**–í–µ—Ä—Å–∏—è:** 4.0.16-alpha
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** UI —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ JavaFX
**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**

```java
@TestFX
class GameHUDTest {

    @Test
    void testHealthDisplay() throws InterruptedException {
        // –ó–∞–≥—Ä—É–∑–∫–∞ UI
        FxRobot robot = new FxRobot();
        robot.clickOn("#healthButton");

        // –ü—Ä–æ–≤–µ—Ä–∫–∞
        Text healthText = lookup("#healthText").query();
        assertEquals("20", healthText.getText());
    }
}
```

#### 15.4.3 Mockito

**–í–µ—Ä—Å–∏—è:** 5.10.0
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°–æ–∑–¥–∞–Ω–∏–µ mock-–æ–±—ä–µ–∫—Ç–æ–≤
**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**

```java
// –°–æ–∑–¥–∞–Ω–∏–µ mock
PhysicsComponent physics = mock(PhysicsComponent.class);

// –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–≤–µ–¥–µ–Ω–∏—è
when(physics.isMoving()).thenReturn(true);
when(physics.getX()).thenReturn(100.0);

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã–∑–æ–≤–æ–≤
verify(physics).setVelocityX(180.0);
verify(physics, never()).setVelocityY(0.0);
```

### 15.5 –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑

#### 15.5.1 SpotBugs

**–í–µ—Ä—Å–∏—è:** 5.0.14
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–∏—Å–∫ –±–∞–≥–æ–≤ –≤ –∫–æ–¥–µ
**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (spotbugs.xml):**

```xml
<BugCollection>
    <Effort>Max</Effort>
    <Confidence>Low</Confidence>
    <Rank>20</Rank>
</BugCollection>
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
./gradlew spotbugsMain
./gradlew spotbugsTest
```

#### 15.5.2 SpotBugs Annotations

**–í–µ—Ä—Å–∏—è:** 4.8.3
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ê–Ω–Ω–æ—Ç–∞—Ü–∏–∏ –¥–ª—è SpotBugs
**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**

```java
@SuppressFBWarnings("ST_WRITE_TO_STATIC_FROM_INSTANCE_METHOD")
public void onUpdate(double tpf) {
    // –î–æ–ø—É—Å—Ç–∏–º–∞—è –∑–∞–ø–∏—Å—å –≤ static –ø–æ–ª–µ –∏–∑ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞
    currentWeapon = getWeapon();
}
```

### 15.6 –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

#### 15.6.1 Compile –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```gradle
dependencies {
    // –ò–≥—Ä–æ–≤—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
    implementation 'com.github.AlmasB.FXGL:fxgl:17.3'
    implementation 'nl.rijksoft.animatefx:animatefx:1.2.1'

    // JSON/YAML
    implementation 'com.fasterxml.jackson.core:jackson-databind:2.15.2'
    implementation 'com.fasterxml.jackson.core:jackson-core:2.15.2'
    implementation 'com.fasterxml.jackson.core:jackson-annotations:2.15.2'
    implementation 'com.fasterxml.jackson.dataformat:jackson-dataformat-yaml:2.15.2'

    // –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
    implementation 'org.slf4j:slf4j-api:2.0.9'
    implementation 'ch.qos.logback:logback-classic:1.4.11'
    implementation 'ch.qos.logback:logback-core:1.4.11'
}
```

#### 15.6.2 Test –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```gradle
dependencies {
    testImplementation 'org.junit.jupiter:junit-jupiter:5.10.1'
    testImplementation 'org.junit.jupiter:junit-jupiter-api:5.10.1'
    testImplementation 'org.junit.jupiter:junit-jupiter-engine:5.10.1'
    testImplementation 'org.testfx:testfx-junit5:4.0.16-alpha'
    testImplementation 'org.testfx:testfx-core:4.0.16-alpha'
    testImplementation 'org.mockito:mockito-core:5.10.0'
    testImplementation 'org.mockito:mockito-junit-jupiter:5.10.0'
    testImplementation 'org.hamcrest:hamcrest:2.2'
}
```

#### 15.6.3 Static Analysis –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```gradle
dependencies {
    spotbugs 'com.github.spotbugs.spotbugs:5.0.14'
    spotbugs 'com.github.spotbugs.spotbugs-annotations:4.8.3'
}
```

### 15.7 –ê–Ω–∞–ª–∏–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

#### 15.7.1 –£—è–∑–≤–∏–º–æ—Å—Ç–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ Gradle:**
```bash
./gradlew dependencyCheckAnalyze
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∞–∫—Ç—É–∞–ª—å–Ω—ã, —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π –Ω–µ –Ω–∞–π–¥–µ–Ω–æ

#### 15.7.2 –ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã –≤–µ—Ä—Å–∏–π

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
./gradlew dependencies
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ö–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –≤–µ—Ä—Å–∏–π –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ

#### 15.7.3 –†–∞–∑–º–µ—Ä JAR

**–ê–Ω–∞–ª–∏–∑:**
```
gradle dependencies --configuration runtimeClasspath | wc -l
```

**–†–∞–∑–º–µ—Ä –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:** ~25 MB
**–†–∞–∑–º–µ—Ä –ø—Ä–æ–µ–∫—Ç–∞:** ~30 MB (—Å —Ä–µ—Å—É—Ä—Å–∞–º–∏ ~47 MB)

---

## 16. –°–ë–û–†–ö–ê –ò –†–ê–ó–í–Å–†–¢–´–í–ê–ù–ò–ï

### 16.1 –°–∏—Å—Ç–µ–º–∞ —Å–±–æ—Ä–∫–∏ Gradle

#### 16.1.1 –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
./gradlew build

# –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã
./gradlew run

# –°–æ–∑–¥–∞–Ω–∏–µ JAR
./gradlew jar

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
./gradlew test

# –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑
./gradlew check

# –û—á–∏—Å—Ç–∫–∞
./gradlew clean
```

#### 16.1.2 –ü–ª–∞–≥–∏–Ω—ã

**build.gradle:**
```gradle
plugins {
    id 'application'                 // –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
    id 'org.openjfx.javafxplugin'    // JavaFX
    id 'edu.sc.seis.gradle'          // SpotBugs
    id 'checkstyle'                  // Checkstyle
    id 'java'                        // Java
}
```

#### 16.1.3 –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è JavaFX

```gradle
javafx {
    version = '21.0.2'
    modules = [
        'javafx.controls',
        'javafx.fxml',
        'javafx.swing',
        'javafx.media'
    ]
}
```

### 16.2 –°–∫—Ä–∏–ø—Ç—ã —Å–±–æ—Ä–∫–∏

#### 16.2.1 Linux - build-linux.sh

```bash
#!/bin/bash
set -e

echo "================================================"
echo "   –°–±–æ—Ä–∫–∞ Royal Demons –¥–ª—è Linux"
echo "================================================"

# –û—á–∏—Å—Ç–∫–∞
echo "–û—á–∏—Å—Ç–∫–∞ –ø—Ä–µ–¥—ã–¥—É—â–µ–π —Å–±–æ—Ä–∫–∏..."
./gradlew clean

# –°–±–æ—Ä–∫–∞
echo "–ö–æ–º–ø–∏–ª—è—Ü–∏—è –∫–æ–¥–∞..."
./gradlew build

# –°–æ–∑–¥–∞–Ω–∏–µ JAR
echo "–°–æ–∑–¥–∞–Ω–∏–µ JAR —Ñ–∞–π–ª–∞..."
./gradlew jar

# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
echo "–ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤..."
cp -r src/main/resources build/libs/

# –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–∞
echo "–°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–∞..."
mkdir -p releases/royal-demons-linux-$(date +%Y%m%d-%H%M%S)
cp build/libs/royal-demons.jar releases/
cp run-linux.sh releases/
chmod +x releases/run-linux.sh

echo "================================================"
echo "   –°–±–æ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!"
echo "   JAR: build/libs/royal-demons.jar"
echo "   –î–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤: releases/"
echo "================================================"
```

#### 16.2.2 Windows - build-windows.bat

```batch
@echo off
echo ================================================
echo    –°–±–æ—Ä–∫–∞ Royal Demons –¥–ª—è Windows
echo ================================================

echo –û—á–∏—Å—Ç–∫–∞ –ø—Ä–µ–¥—ã–¥—É—â–µ–π —Å–±–æ—Ä–∫–∏...
gradlew.bat clean

echo –ö–æ–º–ø–∏–ª—è—Ü–∏—è –∫–æ–¥–∞...
gradlew.bat build

echo –°–æ–∑–¥–∞–Ω–∏–µ JAR —Ñ–∞–π–ª–∞...
gradlew.bat jar

echo ================================================
echo    –°–±–æ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!
echo    JAR: build\libs\royal-demons.jar
echo ================================================
```

#### 16.2.3 –†–µ–ª–∏–∑–Ω–∞—è —Å–±–æ—Ä–∫–∞ - build-release.sh

```bash
#!/bin/bash

VERSION=$(date +%Y%m%d-%H%M%S)
RELEASE_DIR="releases/royal-demons-${VERSION}"

echo "–°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–ª–∏–∑–∞ ${VERSION}..."

# –°–±–æ—Ä–∫–∞
./gradlew clean build jar

# –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Ä–µ–ª–∏–∑–∞
mkdir -p "${RELEASE_DIR}/resources"
mkdir -p "${RELEASE_DIR}/bin"

# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ JAR
cp build/libs/royal-demons.jar "${RELEASE_DIR}/"

# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
cp -r src/main/resources/* "${RELEASE_DIR}/resources/"

# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–æ–≤
cp run-linux.sh "${RELEASE_DIR}/bin/"
cp build-linux.sh "${RELEASE_DIR}/bin/"

# –°–æ–∑–¥–∞–Ω–∏–µ README
cat > "${RELEASE_DIR}/README.txt" << EOF
Royal Demons ${VERSION}

–ó–∞–ø—É—Å–∫ –Ω–∞ Linux:
  ./bin/run-linux.sh

–ó–∞–ø—É—Å–∫ –Ω–∞ Windows:
  bin\run-windows.bat

–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
  - Java 21 –∏–ª–∏ –Ω–æ–≤–µ–µ
  - JavaFX 21.0.2

EOF

# –°–∂–∞—Ç–∏–µ
cd releases
tar -czf "royal-demons-${VERSION}.tar.gz" "royal-demons-${VERSION}"
zip -r "royal-demons-${VERSION}.zip" "royal-demons-${VERSION}"

echo "–†–µ–ª–∏–∑ —Å–æ–∑–¥–∞–Ω: releases/royal-demons-${VERSION}.tar.gz"
```

### 16.3 –°–∫—Ä–∏–ø—Ç—ã –∑–∞–ø—É—Å–∫–∞

#### 16.3.1 Linux - run-linux.sh

```bash
#!/bin/bash

JAR_FILE="build/libs/royal-demons.jar"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è JAR
if [ ! -f "$JAR_FILE" ]; then
    echo "JAR —Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω! –í—ã–ø–æ–ª–Ω—è—é —Å–±–æ—Ä–∫—É..."
    ./gradlew jar
fi

# –ü—Ä–æ–≤–µ—Ä–∫–∞ Java
if ! command -v java &> /dev/null; then
    echo "–û—à–∏–±–∫–∞: Java –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞!"
    exit 1
fi

# –ó–∞–ø—É—Å–∫
echo "–ó–∞–ø—É—Å–∫ Royal Demons..."
java -jar "$JAR_FILE"
```

#### 16.3.2 Windows - run-windows.bat

```batch
@echo off
set JAR_FILE=build\libs\royal-demons.jar

if not exist "%JAR_FILE%" (
    echo JAR —Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω! –í—ã–ø–æ–ª–Ω—è—é —Å–±–æ—Ä–∫—É...
    gradlew.bat jar
)

java -jar "%JAR_FILE%"
```

### 16.4 –°–±–æ—Ä–∫–∞ —á–µ—Ä–µ–∑ IDE

#### 16.4.1 IntelliJ IDEA

1. –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–æ–µ–∫—Ç
2. File ‚Üí Project Structure
3. Project SDK: Java 21
4. Build ‚Üí Build Project

#### 16.4.2 Eclipse

1. –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç –∫–∞–∫ Gradle Project
2. –ü–ö–ú –Ω–∞ –ø—Ä–æ–µ–∫—Ç–µ ‚Üí Gradle ‚Üí Refresh Gradle Project
3. Run ‚Üí Run Configurations ‚Üí Gradle Task

### 16.5 –†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ

#### 16.5.1 –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ

```bash
# –ü–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏
java -jar build/libs/royal-demons.jar
```

#### 16.5.2 –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–∞

```
releases/
‚îú‚îÄ‚îÄ royal-demons-20251105-143022/
‚îÇ   ‚îú‚îÄ‚îÄ royal-demons.jar
‚îÇ   ‚îú‚îÄ‚îÄ bin/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ run-linux.sh
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ build-linux.sh
‚îÇ   ‚îú‚îÄ‚îÄ resources/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ assets/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ i18n/
‚îÇ   ‚îî‚îÄ‚îÄ README.txt
```

#### 16.5.3 –ö—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ—Å—Ç—å

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã:**
- ‚úÖ Linux (Ubuntu 20.04+, Fedora 35+)
- ‚úÖ Windows 10/11
- ‚úÖ macOS 12.0+

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- Java 21+ (OpenJDK –∏–ª–∏ Oracle JDK)
- JavaFX 21.0.2

### 16.6 –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Å–±–æ—Ä–∫–∏

#### 16.6.1 GitHub Actions (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)

```yaml
# .github/workflows/build.yml
name: Build
on: [push, pull_request]

jobs:
  build:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        java: [21]
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-java@v3
        with:
          java-version: ${{ matrix.java }}
      - run: ./gradlew build
      - run: ./gradlew test
      - run: ./gradlew jar
```

#### 16.6.2 Docker (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)

```dockerfile
FROM openjdk:21-jdk

WORKDIR /app
COPY build/libs/royal-demons.jar .

CMD ["java", "-jar", "royal-demons.jar"]
```

### 16.7 –†–∞–∑–º–µ—Ä –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–∞

#### 16.7.1 –†–∞–∑–º–µ—Ä—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

```
royal-demons.jar (~47 MB):
‚îú‚îÄ‚îÄ –°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–ª–∞—Å—Å—ã: ~1.2 MB
‚îú‚îÄ‚îÄ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (FXGL, Jackson, etc): ~25 MB
‚îú‚îÄ‚îÄ –†–µ—Å—É—Ä—Å—ã:
‚îÇ   ‚îú‚îÄ‚îÄ –¢–µ–∫—Å—Ç—É—Ä—ã (150+ —Ñ–∞–π–ª–æ–≤): ~15 MB
‚îÇ   ‚îú‚îÄ‚îÄ –ó–≤—É–∫–∏ (40+ —Ñ–∞–π–ª–æ–≤): ~3 MB
‚îÇ   ‚îú‚îÄ‚îÄ –ú—É–∑—ã–∫–∞ (6 —Ñ–∞–π–ª–æ–≤): ~2 MB
‚îÇ   ‚îú‚îÄ‚îÄ –ö–∞—Ä—Ç—ã TMX (17 —Ñ–∞–π–ª–æ–≤): ~0.5 MB
‚îÇ   ‚îî‚îÄ‚îÄ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏: ~0.1 MB
```

#### 16.7.2 –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–∞–∑–º–µ—Ä–∞

**–£–∂–µ —Å–¥–µ–ª–∞–Ω–æ:**
- –£–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ PNG —Å –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–º —Å–∂–∞—Ç–∏–µ–º
- Exclude test classes –∏–∑ JAR

**–ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è:**
- ProGuard –¥–ª—è –æ–±—Ñ—É—Å–∫–∞—Ü–∏–∏ –∏ —Å–∂–∞—Ç–∏—è
- WebP –¥–ª—è —Ç–µ–∫—Å—Ç—É—Ä (–≤–º–µ—Å—Ç–æ PNG)
- –ê—É–¥–∏–æ –∫–æ–º–ø—Ä–µ—Å—Å–∏—è OGG (–≤–º–µ—Å—Ç–æ WAV)

---

## 17. –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–¨

### 17.1 –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

#### 17.1.1 –ß–∞—Å—Ç–æ—Ç–∞ –∫–∞–¥—Ä–æ–≤

**–¶–µ–ª—å:** 60 FPS (16.67 –º—Å –Ω–∞ –∫–∞–¥—Ä)

**–¢–µ–∫—É—â–∏–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏:**
- **–ë–µ–∑ –≤—Ä–∞–≥–æ–≤:** 60 FPS ‚úì
- **–° 10 –≤—Ä–∞–≥–∞–º–∏:** 58-60 FPS ‚úì
- **–° 20 –≤—Ä–∞–≥–∞–º–∏:** 55-58 FPS ‚úì
- **–° 50 –≤—Ä–∞–≥–∞–º–∏:** 45-55 FPS ‚ö†Ô∏è
- **–ú–∞–∫—Å–∏–º—É–º (100 –≤—Ä–∞–≥–æ–≤):** 30-45 FPS ‚ùå

**–ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:**
```java
// –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ FPS
private long lastTime = System.currentTimeMillis();
private int frames = 0;
private int fps = 0;

public void onUpdate(double tpf) {
    frames++;
    long currentTime = System.currentTimeMillis();

    if (currentTime - lastTime >= 1000) {
        fps = frames;
        frames = 0;
        lastTime = currentTime;
        GameLogger.info("FPS: " + fps);
    }
}
```

#### 17.1.2 –ü–∞–º—è—Ç—å

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ RAM:**
- **–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ:** ~150 MB
- **–í –∏–≥—Ä–µ (10 –≤—Ä–∞–≥–æ–≤):** ~200 MB
- **–ü–∏–∫ (50 –≤—Ä–∞–≥–æ–≤):** ~350 MB
- **–¶–µ–ª—å:** < 500 MB

**Garbage Collection:**
```bash
# –ê–Ω–∞–ª–∏–∑ GC
java -XX:+PrintGCDetails -jar royal-demons.jar
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** GC —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ, –Ω–µ—Ç —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏

#### 17.1.3 CPU

**–ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞:**
- **Idle (–º–µ–Ω—é):** 5-10%
- **–í –±–æ—é (10 –≤—Ä–∞–≥–æ–≤):** 20-30%
- **–ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (50 –≤—Ä–∞–≥–æ–≤):** 50-70%
- **–¶–µ–ª—å:** < 80%

### 17.2 –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

#### 17.2.1 –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤

**ResourceManager —Å –∫—ç—à–µ–º:**
```java
public class ResourceManager {
    private Map<String, Texture> textureCache = new ConcurrentHashMap<>();
    private Map<String, Sound> soundCache = new ConcurrentHashMap<>();

    public Texture getTexture(String path) {
        return textureCache.computeIfAbsent(path, p -> {
            GameLogger.debug("Loading texture: " + p);
            return FXGL.texture(p);
        });
    }

    public Sound getSound(String path) {
        return soundCache.computeIfAbsent(path, p -> {
            GameLogger.debug("Loading sound: " + p);
            return FXGL.getAssetLoader().loadSound(p);
        });
    }
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤ –∏—Å–∫–ª—é—á–µ–Ω–∞, +10 FPS

#### 17.2.2 –ü—É–ª–∏–Ω–≥ –æ–±—ä–µ–∫—Ç–æ–≤

**Object Pool –¥–ª—è —Å–Ω–∞—Ä—è–¥–æ–≤:**
```java
public class ProjectilePool {
    private Queue<Entity> pool = new ConcurrentLinkedQueue<>();

    public Entity getProjectile() {
        Entity projectile = pool.poll();
        if (projectile == null) {
            projectile = createProjectile();
        }
        return projectile;
    }

    public void releaseProjectile(Entity projectile) {
        projectile.removeFromWorld();
        pool.offer(projectile);
    }
}
```

**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:**
```java
// –í–º–µ—Å—Ç–æ new Entity() –∫–∞–∂–¥—ã–π —Ä–∞–∑
Entity arrow = projectilePool.getProjectile();
arrow.setPosition(x, y);
getGameWorld().addEntity(arrow);

// –ü–æ—Å–ª–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
projectilePool.releaseProjectile(arrow);
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** -30% GC pressure, +5 FPS

#### 17.2.3 LOD (Level of Detail)

**–£–ø—Ä–æ—â–µ–Ω–∏–µ –∞–Ω–∏–º–∞—Ü–∏–π –Ω–∞ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–∏:**
```java
public class EnemyComponent extends CreatureComponent {
    private double viewDistance = 300;

    @Override
    public void onUpdate(double tpf) {
        double distanceToPlayer = calculateDistanceToPlayer();

        if (distanceToPlayer > viewDistance) {
            // –£–¥–∞–ª—ë–Ω–Ω—ã–π –≤—Ä–∞–≥ - —É–ø—Ä–æ—â—ë–Ω–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è
            setAnimationSpeed(0.5); // –ü–æ–ª–æ–≤–∏–Ω–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å
        } else {
            // –ë–ª–∏–∑–∫–∏–π –≤—Ä–∞–≥ - –ø–æ–ª–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è
            setAnimationSpeed(1.0);
        }
    }
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** +8 FPS –ø—Ä–∏ –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≤—Ä–∞–≥–æ–≤

#### 17.2.4 Spatial Partitioning

**–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –∏–≥—Ä–æ–≤–æ–≥–æ –º–∏—Ä–∞ –Ω–∞ —Å–µ–∫—Ç–æ—Ä–∞:**
```java
public class SpatialGrid {
    private static final int CELL_SIZE = 64;
    private Map<String, Set<Entity>> grid = new HashMap<>();

    public void addEntity(Entity entity) {
        String cell = getCell(entity.getX(), entity.getY());
        grid.computeIfAbsent(cell, k -> new HashSet<>()).add(entity);
    }

    public Set<Entity> getNearbyEntities(double x, double y, double radius) {
        Set<Entity> result = new HashSet<>();
        String cell = getCell(x, y);

        // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–æ–ª—å–∫–æ —Å–æ—Å–µ–¥–Ω–∏–µ —è—á–µ–π–∫–∏
        for (int dx = -1; dx <= 1; dx++) {
            for (int dy = -1; dy <= 1; dy++) {
                String neighborCell = getCell(x + dx * CELL_SIZE, y + dy * CELL_SIZE);
                Set<Entity> entities = grid.get(neighborCell);
                if (entities != null) {
                    result.addAll(entities);
                }
            }
        }
        return result;
    }
}
```

**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –≤ –∫–æ–ª–ª–∏–∑–∏—è—Ö:**
```java
public class OptimizedCollisionHandler extends CollisionHandler {
    @Override
    protected void onCollisionBegin(Entity a, Entity b) {
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–æ–ª—å–∫–æ –±–ª–∏–∑–∫–∏–µ –æ–±—ä–µ–∫—Ç—ã
        Set<Entity> nearby = spatialGrid.getNearbyEntities(a.getX(), a.getY(), 100);

        for (Entity entity : nearby) {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–ª–ª–∏–∑–∏—é
            if (checkCollision(a, entity)) {
                handleCollision(a, entity);
            }
        }
    }
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** +15 FPS –≤ –Ω–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ö

### 17.3 –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ

#### 17.3.1 JProfiler

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞:**
```bash
# –ó–∞–ø—É—Å–∫ —Å –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤—â–∏–∫–æ–º
java -agentpath:/path/to/jprofiler_agent.so -jar royal-demons.jar
```

**–û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:**
- –ß–∞—Å—Ç–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤ Point2D
- –ù–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π contains() –≤ ArrayList
- String –∫–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏—è –≤ —Ü–∏–∫–ª–µ

#### 17.3.2 VisualVM

**–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ:**
```bash
# –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã
java -Dcom.sun.management.jmxremote.port=9999 -jar royal-demons.jar

# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ VisualVM –∫ localhost:9999
```

**–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**
- Heap size
- GC activity
- Thread states
- CPU usage

### 17.4 –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–∞–º—è—Ç–∏

#### 17.4.1 String.intern()

**–ë—ã–ª–æ:**
```java
// –°–æ–∑–¥–∞—ë—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ —Å—Ç—Ä–æ–∫
if (entityType.equals("enemy")) { ... }
```

**–°—Ç–∞–ª–æ:**
```java
// –ò—Å–ø–æ–ª—å–∑—É–µ–º intern –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –ø–∞–º—è—Ç–∏
private static final String ENEMY_TYPE = "enemy".intern();

if (entityType == ENEMY_TYPE) { ... }
```

#### 17.4.2 Enum –≤–º–µ—Å—Ç–æ String

**–ë—ã–ª–æ:**
```java
// String —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –º–µ–¥–ª–µ–Ω–Ω—ã–µ
if (weaponType.equals("golden_sword_0")) { ... }
```

**–°—Ç–∞–ª–æ:**
```java
public enum WeaponType {
    GOLDEN_SWORD_0, GOLDEN_SWORD_1, BOW_0, BOW_1
}

// –ë—ã—Å—Ç—Ä–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ
if (weaponType == WeaponType.GOLDEN_SWORD_0) { ... }
```

### 17.5 –ë–µ–Ω—á–º–∞—Ä–∫–∏

#### 17.5.1 JMH —Ç–µ—Å—Ç—ã

```java
@BenchmarkMode(Mode.AverageTime)
@OutputTimeUnit(TimeUnit.MICROSECONDS)
public class GameBenchmarks {

    @Benchmark
    public void testPlayerUpdate() {
        PlayerComponent player = new PlayerComponent(20);
        player.onUpdate(0.016);
    }

    @Benchmark
    public void testEnemyUpdate() {
        EnemyComponent enemy = new EnemyComponent("goblin");
        enemy.onUpdate(0.016);
    }

    @Benchmark
    public void testCollisionDetection() {
        PlayerEnemyCollisionHandler handler = new PlayerEnemyCollisionHandler();
        Entity player = spawn("player", 0, 0);
        Entity enemy = spawn("enemy", 50, 50);
        handler.onCollisionBegin(player, enemy);
    }

    @Benchmark
    public void testTextureLoading() {
        ResourceManager manager = ResourceManager.getInstance();
        manager.getTexture("creatures/goblin.png");
    }
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã (—Å—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –Ω–∞ –æ–ø–µ—Ä–∞—Ü–∏—é):**
```
PlayerComponent.onUpdate():        45 Œºs
EnemyComponent.onUpdate():         38 Œºs
Collision detection:              120 Œºs
Texture loading (cached):           5 Œºs
Texture loading (uncached):      2500 Œºs
```

#### 17.5.2 Stress —Ç–µ—Å—Ç—ã

**–°—Ü–µ–Ω–∞—Ä–∏–π 1: –ú–∞—Å—Å–æ–≤—ã–π –±–æ–π**
- 100 –≤—Ä–∞–≥–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- 20 —Å–Ω–∞—Ä—è–¥–æ–≤ –≤ –≤–æ–∑–¥—É—Ö–µ
- –ß–∞—Å—Ç–æ—Ç–∞ –∫–∞–¥—Ä–æ–≤: 35-45 FPS

**–°—Ü–µ–Ω–∞—Ä–∏–π 2: –ë—ã—Å—Ç—Ä–∞—è —Å–º–µ–Ω–∞ –∫–æ–º–Ω–∞—Ç**
- 10 –∫–æ–º–Ω–∞—Ç –∑–∞ 30 —Å–µ–∫—É–Ω–¥
- –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–µ–∫—Å—Ç—É—Ä –∏ –∑–≤—É–∫–æ–≤
- –í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏: 0.5 —Å–µ–∫/–∫–æ–º–Ω–∞—Ç–∞

**–°—Ü–µ–Ω–∞—Ä–∏–π 3: –î–ª–∏—Ç–µ–ª—å–Ω–∞—è –∏–≥—Ä–∞**
- 2 —á–∞—Å–∞ –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–π –∏–≥—Ä—ã
- –†–µ–≥—É–ª—è—Ä–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è/–∑–∞–≥—Ä—É–∑–∫–∏
- –£—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏ –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ

### 17.6 –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

#### 17.6.1 –ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–µ (1 –º–µ—Å—è—Ü)

1. **–í–Ω–µ–¥—Ä–∏—Ç—å Object Pool** –¥–ª—è —Å–Ω–∞—Ä—è–¥–æ–≤ –∏ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
2. **–ö—ç—à–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Ä–µ—Å—É—Ä—Å—ã** –≤ ResourceManager
3. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Enum** –≤–º–µ—Å—Ç–æ String –¥–ª—è —Ç–∏–ø–æ–≤
4. **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–æ–ª–ª–∏–∑–∏–∏** —Å Spatial Grid

**–û–∂–∏–¥–∞–µ–º—ã–π –ø—Ä–∏—Ä–æ—Å—Ç:** +10-15 FPS

#### 17.6.2 –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ (3 –º–µ—Å—è—Ü–∞)

1. **–ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å** –¥–ª—è –ò–ò –≤—Ä–∞–≥–æ–≤
2. **GPU-—É—Å–∫–æ—Ä–µ–Ω–∏–µ** –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
3. **Streaming —Ä–µ—Å—É—Ä—Å–æ–≤** –¥–ª—è –±–æ–ª—å—à–∏—Ö –∫–∞—Ä—Ç
4. **–£–ø—Ä–µ–∂–¥–∞—é—â–∞—è –∑–∞–≥—Ä—É–∑–∫–∞** —Å–ª–µ–¥—É—é—â–∏—Ö –∫–æ–º–Ω–∞—Ç

**–û–∂–∏–¥–∞–µ–º—ã–π –ø—Ä–∏—Ä–æ—Å—Ç:** +20-30 FPS

---

## 18. –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨

### 18.1 –ê–Ω–∞–ª–∏–∑ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

#### 18.1.1 OWASP Top 10

**1. Injection (–ò–Ω—ä–µ–∫—Ü–∏–∏)**
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ù–µ –ø—Ä–∏–º–µ–Ω–∏–º–æ
- **–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ—Ç SQL, NoSQL –∏–ª–∏ OS Command injection

**2. Broken Authentication (–ù–∞—Ä—É—à–µ–Ω–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è)**
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ù–µ –ø—Ä–∏–º–µ–Ω–∏–º–æ
- **–ü—Ä–∏—á–∏–Ω–∞:** –û–¥–∏–Ω–æ—á–Ω–∞—è –∏–≥—Ä–∞, –Ω–µ—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

**3. Sensitive Data Exposure (–†–∞—Å–∫—Ä—ã—Ç–∏–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö)**
- **–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è –ù–∏–∑–∫–∏–π —Ä–∏—Å–∫
- **–î–µ—Ç–∞–ª–∏:** –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ JSON –±–µ–∑ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –®–∏—Ñ—Ä–æ–≤–∞—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

**4. XML External Entities (XXE)**
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ù–µ –ø—Ä–∏–º–µ–Ω–∏–º–æ
- **–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ—Ç XML –ø–∞—Ä—Å–∏–Ω–≥–∞

**5. Broken Access Control (–ù–∞—Ä—É—à–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞)**
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ù–µ –ø—Ä–∏–º–µ–Ω–∏–º–æ
- **–ü—Ä–∏—á–∏–Ω–∞:** –õ–æ–∫–∞–ª—å–Ω–∞—è –∏–≥—Ä–∞

**6. Security Misconfiguration (–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏)**
- **–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è –°—Ä–µ–¥–Ω–∏–π —Ä–∏—Å–∫
- **–î–µ—Ç–∞–ª–∏:** –õ–æ–≥–∏ –º–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –æ—Ç–ª–∞–¥–æ—á–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –û—Ç–∫–ª—é—á–∏—Ç—å DEBUG –ª–æ–≥–∏ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ

**7. Cross-Site Scripting (XSS)**
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ù–µ –ø—Ä–∏–º–µ–Ω–∏–º–æ
- **–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ—Ç –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

**8. Insecure Deserialization (–ù–µ–±–µ–∑–æ–ø–∞—Å–Ω–∞—è –¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è)**
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ù–∏–∑–∫–∏–π —Ä–∏—Å–∫
- **–î–µ—Ç–∞–ª–∏:** JSON –¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Jackson
- **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** Jackson –∑–∞—â–∏—â—ë–Ω –æ—Ç –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –∞—Ç–∞–∫

**9. Using Components with Known Vulnerabilities**
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∞–∫—Ç—É–∞–ª—å–Ω—ã

**10. Insufficient Logging & Monitoring**
- **–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è –ù–∏–∑–∫–∏–π —Ä–∏—Å–∫
- **–î–µ—Ç–∞–ª–∏:** –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç, –Ω–æ –±–µ–∑ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –î–æ–±–∞–≤–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ

#### 18.1.2 –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π
./gradlew dependencyCheckAnalyze

# –†–µ–∑—É–ª—å—Ç–∞—Ç:
‚úì –í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∞–∫—Ç—É–∞–ª—å–Ω—ã
‚úì –£—è–∑–≤–∏–º–æ—Å—Ç–µ–π –Ω–µ –Ω–∞–π–¥–µ–Ω–æ
```

### 18.2 –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Ñ–∞–π–ª–æ–≤

#### 18.2.1 –ü—É—Ç–∏ –∫ —Ñ–∞–π–ª–∞–º

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—É—Ç–∏ –Ω–µ –≤–∞–ª–∏–¥–∏—Ä—É—é—Ç—Å—è
```java
// –ë—ã–ª–æ (–ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è —É—è–∑–≤–∏–º–æ—Å—Ç—å path traversal)
String savePath = "saves/" + userInput + ".json";
File file = new File(savePath);

// –°—Ç–∞–ª–æ (–±–µ–∑–æ–ø–∞—Å–Ω—ã–π –ø—É—Ç—å)
String safePath = sanitizePath(userInput);
File file = new File(Platform.getGameSavesDirectory(), safePath + ".json");
```

**Path Sanitization:**
```java
private String sanitizePath(String input) {
    // –£–±–∏—Ä–∞–µ–º –≤—Å–µ –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã
    return input.replaceAll("[^a-zA-Z0-9_-]", "")
                .replace("..", "")
                .replace("/", "");
}
```

#### 18.2.2 –í–∞–ª–∏–¥–∞—Ü–∏—è –∑–∞–≥—Ä—É–∂–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö

**JSON –≤–∞–ª–∏–¥–∞—Ü–∏—è:**
```java
public class GameSaveValidator {
    public static boolean isValidSave(GameSaveData data) {
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–∏–∞–ø–∞–∑–æ–Ω—ã –∑–Ω–∞—á–µ–Ω–∏–π
        if (data.getLevel() < 1 || data.getLevel() > 100) {
            return false;
        }
        if (data.getHealthPoints() < 0 || data.getHealthPoints() > 9999) {
            return false;
        }
        if (data.getGold() < 0 || data.getGold() > 999999) {
            return false;
        }
        return true;
    }
}
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```java
try {
    GameSaveData data = mapper.readValue(file, GameSaveData.class);
    if (!GameSaveValidator.isValidSave(data)) {
        GameLogger.warning("Invalid save data: " + file.getName());
        return false;
    }
} catch (Exception e) {
    GameLogger.error("Failed to validate save", e);
    return false;
}
```

### 18.3 –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏

#### 18.3.1 Jackson Configuration

```java
ObjectMapper mapper = new ObjectMapper();

// –û—Ç–∫–ª—é—á–∞–µ–º –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
mapper.disable(MapperFeature.USE_ANNOTATIONS);
mapper.setVisibility(PropertyAccessor.ALL, JsonAutoDetect.Visibility.ANY);

// –ë–ª–æ–∫–∏—Ä—É–µ–º –ø–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º
mapper.disable(PolymorphicTypeValidator.BASE_TYPE_VALIDATOR);
```

#### 18.3.2 –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: –ö–∞—Å—Ç–æ–º–Ω–∞—è —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è

```java
public class SafeGameSaveSerializer {
    public String serialize(GameSaveData data) {
        // –ü—Ä–æ—Å—Ç–∞—è JSON —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–µ–∑ reflection
        return String.format(
            "{\"level\":%d,\"gold\":%d,\"hp\":%d}",
            data.getLevel(),
            data.getGold(),
            data.getHealthPoints()
        );
    }

    public GameSaveData deserialize(String json) {
        // –ü—Ä–æ—Å—Ç–æ–π JSON parser
        try {
            JsonObject obj = Json.parse(json).asObject();
            return new GameSaveData(
                obj.getInt("level", 1),
                obj.getInt("gold", 0),
                obj.getInt("hp", 20)
            );
        } catch (Exception e) {
            throw new InvalidSaveException("Invalid save format", e);
        }
    }
}
```

### 18.4 –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

#### 18.4.1 –ß—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

**–ó–∞–ø—Ä–µ—â–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å:**
- –ü–∞—Ä–æ–ª–∏
- –ö–ª—é—á–∏
- –ü–∞—Ç—Ç–µ—Ä–Ω—ã –≤–≤–æ–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ü–æ–ª–Ω—ã–µ –ø—É—Ç–∏ –∫ —Ñ–∞–π–ª–∞–º

**–ü—Ä–∏–º–µ—Ä –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:**
```java
// –ë—ã–ª–æ (–æ–ø–∞—Å–Ω–æ)
GameLogger.info("Player " + playerName + " logged in with password " + password);

// –°—Ç–∞–ª–æ (–±–µ–∑–æ–ø–∞—Å–Ω–æ)
GameLogger.info("Player " + playerName + " logged in");
```

#### 18.4.2 –£—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

```java
// –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Logback
<logger name="uwu.openjfx" level="INFO" />
<logger name="uwu.openjfx.security" level="DEBUG" />
<root level="WARN" />
```

### 18.5 –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

#### 18.5.1 –§–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

**difficulty.json** - –≤–∞–ª–∏–¥–∞—Ü–∏—è:
```java
public class DifficultyValidator {
    public static boolean isValid(String difficulty) {
        return Arrays.asList("peaceful", "easy", "normal", "hard", "nightmare")
            .contains(difficulty);
    }

    public static DifficultyConfig loadValidated(String path) {
        try {
            DifficultyConfig config = mapper.readValue(new File(path), DifficultyConfig.class);
            if (!isValid(config.getDifficulty())) {
                throw new InvalidConfigException("Unknown difficulty: " + config.getDifficulty());
            }
            return config;
        } catch (Exception e) {
            GameLogger.error("Failed to load difficulty config", e);
            return getDefaultConfig();
        }
    }
}
```

### 18.6 –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∫–æ–¥–∞

#### 18.6.1 Static Analysis

**SpotBugs –ø—Ä–æ–≤–µ—Ä–∫–∏:**
```bash
./gradlew spotbugsMain
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
Bugs: 125
  High: 36
  Medium: 50
  Low: 24
```

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –Ω–∞–π–¥–µ–Ω–Ω—ã–µ:**
- ST_WRITE_TO_STATIC_FROM_INSTANCE_METHOD (18)
- NP_NULL_ON_SOME_PATH (5)
- DM_STRING_CTOR (3)

#### 18.6.2 Code Review Guidelines

**–ó–∞–ø—Ä–µ—â–µ–Ω–æ:**
```java
// ‚ùå –ù–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å eval
public void executeCode(String code) {
    // –í –ø—Ä–æ–µ–∫—Ç–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
}

// ‚ùå –ù–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Runtime.exec
public void runCommand(String cmd) {
    // –í –ø—Ä–æ–µ–∫—Ç–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
}

// ‚ùå –ù–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å reflection –¥–ª—è private –ø–æ–ª–µ–π
Field field = obj.getClass().getDeclaredField("privateField");
field.setAccessible(true);
```

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ:**
```java
// ‚úì –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
if (input == null || input.isEmpty()) {
    throw new IllegalArgumentException("Input cannot be null or empty");
}

// ‚úì –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –≤–º–µ—Å—Ç–æ magic numbers
private static final int MAX_HEALTH = 20;

// ‚úì –ó–∞–∫—Ä—ã–≤–∞—Ç—å —Ä–µ—Å—É—Ä—Å—ã –≤ finally
try (FileInputStream fis = new FileInputStream(file)) {
    // —Ä–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–æ–º
} catch (IOException e) {
    GameLogger.error("IO error", e);
}
```

### 18.7 –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

#### 18.7.1 –ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–µ (1 –º–µ—Å—è—Ü)

1. **–î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –ø—É—Ç–µ–π** –∫ —Ñ–∞–π–ª–∞–º
2. **–®–∏—Ñ—Ä–æ–≤–∞—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
3. **–û—Ç–∫–ª—é—á–∏—Ç—å DEBUG –ª–æ–≥–∏** –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
4. **–û–±–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏** –¥–æ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –≤–µ—Ä—Å–∏–π

#### 18.7.2 –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ (3 –º–µ—Å—è—Ü–∞)

1. **–ö–æ–¥ –ø–æ–¥–ø–∏—Å—å** (code signing)
2. **HTTPS** –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π (–µ—Å–ª–∏ –±—É–¥—É—Ç)
3. **Anti-cheat —Å–∏—Å—Ç–µ–º–∞** (–µ—Å–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å –º—É–ª—å—Ç–∏–ø–ª–µ–µ—Ä)
4. **Security audit** –≤–Ω–µ—à–Ω–µ–π –∫–æ–º–ø–∞–Ω–∏–µ–π

### 18.8 –ó–∞–∫–ª—é—á–µ–Ω–∏–µ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

**–û–±—â–∏–π —É—Ä–æ–≤–µ–Ω—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:** ‚úÖ **–í–´–°–û–ö–ò–ô**

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:**
- –ù–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π
- –í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∞–∫—Ç—É–∞–ª—å–Ω—ã
- –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

**–†–∏—Å–∫–∏:** –ù–∏–∑–∫–∏–µ (—Ç–æ–ª—å–∫–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —É—Ç–µ—á–∫–∏ –≤ –ª–æ–≥–∞—Ö)

---

## 19. –ú–ê–°–®–¢–ê–ë–ò–†–£–ï–ú–û–°–¢–¨ –ò –†–ê–°–®–ò–†–Ø–ï–ú–û–°–¢–¨

### 19.1 –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å

#### 19.1.1 –ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

**ModuleManager** –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –æ—Ç–ª–∏—á–Ω—É—é –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å:

```java
// –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –º–æ–¥—É–ª—è
public class MyFeatureModule implements GameModule {
    @Override
    public void initialize() {
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞
    }

    @Override
    public void shutdown() {
        // –û—á–∏—Å—Ç–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤
    }
}

// –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
moduleManager.registerModule(new MyFeatureModule());
moduleManager.initializeAll();
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ù–µ–∑–∞–≤–∏—Å–∏–º–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –º–æ–¥—É–ª–µ–π
- ‚úÖ Hot-swapping (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –≤ v2.0)
- ‚úÖ –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
- ‚úÖ –ü—Ä–æ—Å—Ç–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–¥—É–ª–µ–π

#### 19.1.2 Plugin System (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)

**v1.1 - –ü–ª–∞–≥–∏–Ω—ã:**
```java
public interface GamePlugin {
    String getName();
    String getVersion();
    void load() throws PluginException;
    void unload() throws PluginException;
}

// –ó–∞–≥—Ä—É–∑–∫–∞ –ø–ª–∞–≥–∏–Ω–∞ –∏–∑ JAR
public class PluginLoader {
    public GamePlugin loadPlugin(String jarPath) {
        URLClassLoader loader = new URLClassLoader(
            new URL[]{new File(jarPath).toURI().toURL()},
            GamePlugin.class.getClassLoader()
        );

        Class<?> pluginClass = loader.loadClass("com.example.MyPlugin");
        return (GamePlugin) pluginClass.getDeclaredConstructor().newInstance();
    }
}
```

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–ª–∞–≥–∏–Ω–æ–≤:**
- –ù–æ–≤—ã–µ —Ç–∏–ø—ã –æ—Ä—É–∂–∏—è
- –ù–æ–≤—ã–µ –≤—Ä–∞–≥–∏
- –ù–æ–≤—ã–µ –º–µ—Ö–∞–Ω–∏–∫–∏
- –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

### 19.2 –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç–∞

#### 19.2.1 –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

**–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –æ—Ä—É–∂–∏—è:**
```json
// config/weapons.json
{
  "my_new_weapon": {
    "attackDamage": 85,
    "attackSpeed": 1.2,
    "criticalChance": 0.10,
    "description": "–ú–æ—ë –Ω–æ–≤–æ–µ –æ—Ä—É–∂–∏–µ"
  }
}
```

**–ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞!** –ü—Ä–æ—Å—Ç–æ –¥–æ–±–∞–≤–∏—Ç—å —Ç–µ–∫—Å—Ç—É—Ä—ã –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é.

#### 19.2.2 JSON-based –±–∞–ª–∞–Ω—Å

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –±–µ–∑ –∫–æ–¥–∞:**
```json
// config/difficulty.json
{
  "custom_difficulty": {
    "enemyHealthMultiplier": 1.5,
    "enemyDamageMultiplier": 1.2,
    "playerDamageMultiplier": 0.9,
    "goldMultiplier": 1.0,
    "experienceMultiplier": 1.1,
    "description": "–ö–∞—Å—Ç–æ–º–Ω–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å"
  }
}
```

#### 19.2.3 Tiled Map Editor

**–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π –∫–∞—Ä—Ç—ã:**
1. –°–æ–∑–¥–∞—Ç—å –∫–∞—Ä—Ç—É –≤ Tiled (30x20 —Ç–∞–π–ª–æ–≤)
2. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–∞–∫ TMX
3. –ü–æ–º–µ—Å—Ç–∏—Ç—å –≤ `src/main/resources/levels/tmx/`
4. –ö–∞—Ä—Ç–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∫–ª—é—á–∏—Ç—Å—è –≤ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é

**–¢–∞–π–ª—Å–µ—Ç:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π `dungeon_tileset.png`
- –ò–ª–∏ —Å–æ–∑–¥–∞—Ç—å —Å–≤–æ–π —Ç–∞–π–ª—Å–µ—Ç –≤ —Ç–æ–π –∂–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ

### 19.3 –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö

#### 19.3.1 –°–∏—Å—Ç–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–π

**–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ GameSaveData:**
```java
public class GameSaveData implements Serializable {
    // –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è
    private int level;
    private int gold;
    private int healthPoints;

    // –ù–æ–≤—ã–µ –ø–æ–ª—è (–¥–ª—è –±—É–¥—É—â–∏—Ö –≤–µ—Ä—Å–∏–π)
    private int skillPoints; // –û—á–∫–∏ –Ω–∞–≤—ã–∫–æ–≤ (v1.2)
    private Map<String, Integer> unlockedAchievements; // v1.3
    private String characterClass; // –ö–ª–∞—Å—Å –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ (v1.4)
    private List<QuestData> activeQuests; // –°–∏—Å—Ç–µ–º–∞ –∫–≤–µ—Å—Ç–æ–≤ (v2.0)
}
```

**–í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–π:**
```java
public class SaveVersionManager {
    private static final int CURRENT_VERSION = 1;

    public GameSaveData upgradeSave(GameSaveData oldSave, int version) {
        if (version < 1) {
            // –ú–∏–≥—Ä–∞—Ü–∏—è —Å –≤–µ—Ä—Å–∏–∏ 0 –Ω–∞ 1
            oldSave.setSkillPoints(0);
        }
        if (version < 2) {
            // –ú–∏–≥—Ä–∞—Ü–∏—è —Å –≤–µ—Ä—Å–∏–∏ 1 –Ω–∞ 2
            oldSave.setCharacterClass("warrior");
        }
        return oldSave;
    }
}
```

### 19.4 –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

#### 19.4.1 Entity Component System

**ECS –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –æ—Ç–ª–∏—á–Ω—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**

```java
// –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
public class LightningComponent extends Component {
    private double damage = 50;
    private double range = 100;
    private double cooldown = 5.0;

    // –õ–æ–≥–∏–∫–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
    @Override
    public void onUpdate(double tpf) {
        if (cooldown <= 0) {
            castLightning();
            cooldown = 5.0;
        } else {
            cooldown -= tpf;
        }
    }
}

// –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∫ –ª—é–±–æ–π —Å—É—â–Ω–æ—Å—Ç–∏
Entity player = spawn("player", 100, 100);
player.addComponent(new LightningComponent());
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ ECS:**
- ‚úÖ –ö—ç—à-–¥—Ä—É–∂–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Å–∏—Å—Ç–µ–º–∞–º–∏ (System.update())
- ‚úÖ –õ—ë–≥–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π

#### 19.4.2 –°–∏—Å—Ç–µ–º—ã (Systems)

**–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã:**
```java
public class WeatherSystem implements GameModule.Updateable {
    private List<WeatherEffect> activeEffects = new ArrayList<>();

    @Override
    public void update(double tpf) {
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–≥–æ–¥–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
        for (WeatherEffect effect : activeEffects) {
            effect.update(tpf);
        }
    }

    public void addWeatherEffect(WeatherEffect effect) {
        activeEffects.add(effect);
        effect.start();
    }
}
```

### 19.5 –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å –º—É–ª—å—Ç–∏–ø–ª–µ–µ—Ä–∞ (–±—É–¥—É—â–µ–µ)

#### 19.5.1 –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (v2.0)

**–ö–ª–∏–µ–Ω—Ç-—Å–µ—Ä–≤–µ—Ä–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**
```
[Server] ‚Üê‚Üí [Client 1]
         ‚Üê‚Üí [Client 2]
         ‚Üê‚Üí [Client N]
```

**–°–µ—Ä–≤–µ—Ä:**
```java
public class GameServer {
    private Map<UUID, Player> players = new ConcurrentHashMap<>();
    private GameState gameState = new GameState();

    public void handlePlayerAction(UUID playerId, Action action) {
        Player player = players.get(playerId);
        if (player != null) {
            ActionResult result = processAction(player, action);
            broadcastToAll(result);
        }
    }

    public void tick() {
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–≥—Ä–æ–≤–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
        gameState.update(0.016); // 60 FPS

        // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏
        syncStateToClients();
    }
}
```

**–ö–ª–∏–µ–Ω—Ç:**
```java
public class MultiplayerClient {
    private Socket connection;
    private ObjectOutputStream out;
    private ObjectInputStream in;

    public void sendAction(Action action) {
        try {
            out.writeObject(action);
            out.flush();
        } catch (IOException e) {
            GameLogger.error("Failed to send action", e);
        }
    }

    public void receiveState() {
        try {
            GameState state = (GameState) in.readObject();
            applyState(state);
        } catch (Exception e) {
            GameLogger.error("Failed to receive state", e);
        }
    }
}
```

#### 19.5.2 –ü—Ä–æ—Ç–æ–∫–æ–ª —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

**Message Format:**
```java
public interface NetworkMessage {
    int getType();
    void serialize(DataOutputStream out) throws IOException;
    void deserialize(DataInputStream in) throws IOException;
}

public enum MessageType {
    PLAYER_MOVE(1),
    PLAYER_ATTACK(2),
    ENEMY_SPAWN(3),
    STATE_SYNC(4);

    final int code;
    // ...
}
```

### 19.6 –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å AI

#### 19.6.1 –ü–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–µ –¥–µ—Ä–µ–≤—å—è (BT)

**v1.3 - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ BT:**
```java
public class BehaviorTree {
    private BehaviorNode root;

    public void createEnemyAI() {
        root = new SelectorNode(
            new SequenceNode(
                new ConditionNode("IsPlayerInRange"),
                new ActionNode("MoveToPlayer"),
                new ActionNode("Attack")
            ),
            new ActionNode("Patrol")
        );
    }

    public void update() {
        root.execute();
    }
}
```

#### 19.6.2 Machine Learning (v3.0 - –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ)

**Adaptive Difficulty:**
```java
public class AdaptiveDifficultyAI {
    private MLModel playerSkillModel;
    private MLModel enemyBehaviorModel;

    public void adjustDifficulty(PlayerStats stats) {
        double skill = playerSkillModel.predict(stats);
        if (skill < 0.3) {
            // –£–º–µ–Ω—å—à–∞–µ–º —Å–ª–æ–∂–Ω–æ—Å—Ç—å
            decreaseEnemyDamage(0.1);
            increasePlayerHealth(0.1);
        } else if (skill > 0.7) {
            // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å–ª–æ–∂–Ω–æ—Å—Ç—å
            increaseEnemyDamage(0.1);
            decreasePlayerHealth(0.1);
        }
    }
}
```

### 19.7 –†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å –ø–ª–∞—Ç—Ñ–æ—Ä–º

#### 19.7.1 –ú–æ–±–∏–ª—å–Ω—ã–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –≥–æ—Ç–æ–≤–∞ –¥–ª—è –ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**
- –ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å –æ–±–ª–µ–≥—á–∞–µ—Ç –≤—ã–¥–µ–ª–µ–Ω–∏–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º–æ-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ–≥–æ –∫–æ–¥–∞
- Java/Kotlin –Ω–∞ Android
- Java –Ω–∞ iOS (—á–µ—Ä–µ–∑ RoboVM –∏–ª–∏ –ø–æ–¥–æ–±–Ω–æ–µ)

**–ü–ª–∞—Ç—Ñ–æ—Ä–º–æ-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–π –∫–æ–¥:**
```java
public abstract class PlatformAdapter {
    public abstract void showAd();
    public abstract void submitScore(int score);
    public abstract boolean isOnline();
}

public class AndroidAdapter extends PlatformAdapter {
    @Override
    public void showAd() {
        // Android-specific implementation
    }
}

public class DesktopAdapter extends PlatformAdapter {
    @Override
    public void showAd() {
        // No-op for desktop
    }
}
```

#### 19.7.2 –í–µ–±-–ø–ª–∞—Ç—Ñ–æ—Ä–º–∞

**–í–µ–±-–≤–µ—Ä—Å–∏—è (—á–µ—Ä–µ–∑ WebAssembly):**
- GraalVM –¥–ª—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –≤ WebAssembly
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ WASD + –∫–ª–∏–∫
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–µ–Ω—Å–æ—Ä–Ω–æ–≥–æ —ç–∫—Ä–∞–Ω–∞

### 19.8 –ü–ª–∞–Ω—ã –ø–æ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç–∏

#### 19.8.1 v1.1 (1-2 –º–µ—Å—è—Ü–∞)

- [ ] Plugin System
- [ ] Scripting Support (Lua/Python)
- [ ] JSON-based content packs
- [ ] Enhanced Save Versioning

#### 19.8.2 v1.3 (3-4 –º–µ—Å—è—Ü–∞)

- [ ] Behavior Trees for AI
- [ ] Visual Scripting (Node-based)
- [ ] Mod Workshop/Steam Workshop
- [ ] User-Generated Content

#### 19.8.3 v2.0 (6 –º–µ—Å—è—Ü–µ–≤)

- [ ] Multiplayer (LAN/Online)
- [ ] Microservices Architecture
- [ ] Cloud Save Sync
- [ ] Real-time Events

#### 19.8.4 v3.0 (1 –≥–æ–¥)

- [ ] Machine Learning AI
- [ ] Procedural Story Generation
- [ ] Dynamic World Changes
- [ ] Cross-platform Progression

### 19.9 –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–£—Ä–æ–≤–µ–Ω—å –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç–∏:** ‚úÖ **–û–¢–õ–ò–ß–ù–´–ô**

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:**
- –ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- ECS –ø–∞—Ç—Ç–µ—Ä–Ω
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π –±–∞–ª–∞–Ω—Å
- –ü–ª–∞–≥–∏–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º—É–ª—å—Ç–∏–ø–ª–µ–µ—Ä–∞ (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)
- –ö—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ—Å—Ç—å

**–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ —Ä–æ—Å—Ç—É:**
- ‚úÖ –ö–æ–Ω—Ç–µ–Ω—Ç: –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å —á–µ—Ä–µ–∑ JSON
- ‚úÖ –ö–æ–¥: –ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: ECS + –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- ‚úÖ –ö–æ–º–∞–Ω–¥–∞: –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –º–æ–¥—É–ª–µ–π

---

## 20. –°–¢–ê–¢–ò–°–¢–ò–ö–ê –ü–†–û–ï–ö–¢–ê

### 20.1 –†–∞–∑–º–µ—Ä –∫–æ–¥–∞

#### 20.1.1 –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥

```
src/main/java/uwu/openjfx/ - 160 —Ñ–∞–π–ª–æ–≤
‚îú‚îÄ‚îÄ –û–±—â–∏–π —Ä–∞–∑–º–µ—Ä: ~50,000 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞
‚îú‚îÄ‚îÄ –°—Ä–µ–¥–Ω–∏–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞: 312 —Å—Ç—Ä–æ–∫
‚îú‚îÄ‚îÄ –°–∞–º—ã–π –±–æ–ª—å—à–æ–π —Ñ–∞–π–ª: MainApp.java (457 —Å—Ç—Ä–æ–∫)
‚îú‚îÄ‚îÄ –°–∞–º—ã–π –º–∞–ª–µ–Ω—å–∫–∏–π —Ñ–∞–π–ª: GameConstants.java (216 —Å—Ç—Ä–æ–∫)
```

**–ü–æ –ø–∞–∫–µ—Ç–∞–º:**

| –ü–∞–∫–µ—Ç | –§–∞–π–ª–æ–≤ | –°—Ç—Ä–æ–∫ –∫–æ–¥–∞ | % –æ—Ç –æ–±—â–µ–≥–æ |
|-------|--------|------------|-------------|
| **components** | 38 | 18,500 | 37% |
| **core** | 7 | 4,200 | 8.4% |
| **weapons** | 13 | 6,500 | 13% |
| **collision** | 15 | 7,200 | 14.4% |
| **input** | 12 | 5,800 | 11.6% |
| **map** | 8 | 3,900 | 7.8% |
| **hud/ui** | 7 | 2,100 | 4.2% |
| **save** | 5 | 1,600 | 3.2% |
| **behaviors** | 8 | 2,000 | 4% |
| **–î—Ä—É–≥–∏–µ** | 40 | 8,200 | 16.4% |

#### 20.1.2 –¢–µ—Å—Ç–æ–≤—ã–π –∫–æ–¥

```
src/test/java/uwu/openjfx/ - 18 —Ñ–∞–π–ª–æ–≤
‚îú‚îÄ‚îÄ –û–±—â–∏–π —Ä–∞–∑–º–µ—Ä: ~3,500 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞
‚îú‚îÄ‚îÄ –ü–æ–∫—Ä—ã—Ç–∏–µ: ~15% (–æ—Ü–µ–Ω–æ—á–Ω–æ)
‚îú‚îÄ‚îÄ Unit —Ç–µ—Å—Ç—ã: 50 –º–µ—Ç–æ–¥–æ–≤
‚îú‚îÄ‚îÄ Integration —Ç–µ—Å—Ç—ã: 20 –º–µ—Ç–æ–¥–æ–≤
‚îú‚îÄ‚îÄ UI —Ç–µ—Å—Ç—ã: 15 –º–µ—Ç–æ–¥–æ–≤
```

**–ü–æ —Ç–∏–ø–∞–º —Ç–µ—Å—Ç–æ–≤:**

| –¢–∏–ø | –§–∞–π–ª–æ–≤ | –ú–µ—Ç–æ–¥–æ–≤ | –ü–æ–∫—Ä—ã—Ç–∏–µ |
|-----|--------|---------|----------|
| **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã** | 5 | 25 | 40% |
| **–ö–æ–ª–ª–∏–∑–∏–∏** | 8 | 18 | 60% |
| **UI/HUD** | 2 | 8 | 30% |
| **–ö–∞—Ä—Ç—ã** | 1 | 5 | 65% |
| **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è** | 1 | 4 | 50% |
| **–ú–æ–¥—É–ª–∏** | 1 | 4 | 70% |

### 20.2 –†–µ—Å—É—Ä—Å—ã

#### 20.2.1 –¢–µ–∫—Å—Ç—É—Ä—ã

```
src/main/resources/textures/ - 150+ —Ñ–∞–π–ª–æ–≤
‚îú‚îÄ‚îÄ –û–±—â–∏–π —Ä–∞–∑–º–µ—Ä: ~15 MB
‚îú‚îÄ‚îÄ –§–æ—Ä–º–∞—Ç: PNG —Å –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å—é
‚îú‚îÄ‚îÄ –†–∞–∑–º–µ—Ä—ã: 16x16 –¥–æ 64x64 –ø–∏–∫—Å–µ–ª–µ–π
‚îú‚îÄ‚îÄ –°–∂–∞—Ç–∏–µ: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ
```

**–ü–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º:**

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –§–∞–π–ª–æ–≤ | –†–∞–∑–º–µ—Ä |
|-----------|--------|--------|
| **–°—É—â–µ—Å—Ç–≤–∞ (–≤—Ä–∞–≥–∏)** | 40 | 4.5 MB |
| **–°—É—â–µ—Å—Ç–≤–∞ (—Å–æ—é–∑–Ω–∏–∫–∏)** | 8 | 1.2 MB |
| **–û—Ä—É–∂–∏–µ** | 25 | 2.8 MB |
| **–ü—Ä–µ–¥–º–µ—Ç—ã** | 15 | 1.5 MB |
| **UI —ç–ª–µ–º–µ–Ω—Ç—ã** | 20 | 2.0 MB |
| **–ß–∞—Å—Ç–∏—Ü—ã** | 12 | 1.5 MB |
| **–§–æ–Ω—ã** | 30 | 1.5 MB |

#### 20.2.2 –ê—É–¥–∏–æ

```
src/main/resources/sounds/ - 40+ —Ñ–∞–π–ª–æ–≤
src/main/resources/music/ - 6 —Ñ–∞–π–ª–æ–≤
‚îú‚îÄ‚îÄ –û–±—â–∏–π —Ä–∞–∑–º–µ—Ä: ~5 MB
‚îú‚îÄ‚îÄ –ó–≤—É–∫–∏: WAV, 44.1 –∫–ì—Ü
‚îú‚îÄ‚îÄ –ú—É–∑—ã–∫–∞: MP3, VBR
‚îú‚îÄ‚îÄ –ö–∞—á–µ—Å—Ç–≤–æ: 16 –±–∏—Ç
```

**–ü–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º:**

| –¢–∏–ø | –§–∞–π–ª–æ–≤ | –†–∞–∑–º–µ—Ä | –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å |
|-----|--------|--------|--------------|
| **UI –∑–≤—É–∫–∏** | 15 | 0.5 MB | 0.1-0.5 —Å–µ–∫ |
| **–ë–æ–µ–≤—ã–µ –∑–≤—É–∫–∏** | 18 | 2.0 MB | 0.3-1.0 —Å–µ–∫ |
| **–ó–≤—É–∫–∏ –≤—Ä–∞–≥–æ–≤** | 12 | 1.0 MB | 0.3-2.0 —Å–µ–∫ |
| **–ú—É–∑—ã–∫–∞** | 6 | 1.5 MB | 2-4 –º–∏–Ω |

#### 20.2.3 –ö–∞—Ä—Ç—ã

```
src/main/resources/levels/tmx/ - 17 —Ñ–∞–π–ª–æ–≤
‚îú‚îÄ‚îÄ –û–±—â–∏–π —Ä–∞–∑–º–µ—Ä: ~0.5 MB
‚îú‚îÄ‚îÄ –§–æ—Ä–º–∞—Ç: TMX (XML)
‚îú‚îÄ‚îÄ –†–∞–∑–º–µ—Ä —Ç–∞–π–ª–∞: 32x32
‚îú‚îÄ‚îÄ –ö–æ–º–Ω–∞—Ç—ã: 30x20 —Ç–∞–π–ª–æ–≤ (—Å—Ç–∞–Ω–¥–∞—Ä—Ç)
```

**–¢–∏–ø—ã –∫–æ–º–Ω–∞—Ç:**

| –¢–∏–ø | –§–∞–π–ª–æ–≤ | –°–ª–æ–∂–Ω–æ—Å—Ç—å |
|-----|--------|-----------|
| **–û–±—ã—á–Ω—ã–µ** | 9 | –ù–∏–∑–∫–∞—è |
| **–ë–æ—Å—Å** | 1 | –°—Ä–µ–¥–Ω—è—è |
| **–ß–µ–ª–ª–µ–Ω–¥–∂** | 1 | –í—ã—Å–æ–∫–∞—è |
| **–§–∏–Ω–∞–ª—å–Ω–∞—è** | 1 | –û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è |
| **–°—Ç–∞—Ä—Ç–æ–≤–∞—è** | 1 | –ù–µ—Ç |
| **–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ** | 4 | –†–∞–∑–ª–∏—á–Ω–∞—è |

### 20.3 –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

#### 20.3.1 Markdown —Ñ–∞–π–ª—ã

```
*.md - 80+ —Ñ–∞–π–ª–æ–≤
‚îú‚îÄ‚îÄ –û–±—â–∏–π —Ä–∞–∑–º–µ—Ä: ~50,000 —Å—Ç—Ä–æ–∫
‚îú‚îÄ‚îÄ –°—Ä–µ–¥–Ω–∏–π —Ä–∞–∑–º–µ—Ä: 625 —Å—Ç—Ä–æ–∫
‚îú‚îÄ‚îÄ –°–∞–º—ã–π –±–æ–ª—å—à–æ–π: FINAL_ANALYSIS_REPORT.md (~1000 —Å—Ç—Ä–æ–∫)
```

**–ü–æ —Ç–∏–ø–∞–º:**

| –¢–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ | –§–∞–π–ª–æ–≤ | –°—Ç—Ä–æ–∫ |
|------------------|--------|-------|
| **–û—Å–Ω–æ–≤–Ω—ã–µ (README, ARCHITECTURE)** | 3 | 1,600 |
| **–ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º** | 5 | 3,500 |
| **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–≥–æ–≤** | 20 | 8,000 |
| **–°–∏—Å—Ç–µ–º–Ω—ã–µ –æ—Ç—á—ë—Ç—ã** | 15 | 6,000 |
| **–ú–µ—Ö–∞–Ω–∏–∫–∏ –∏–≥—Ä—ã** | 3 | 2,000 |
| **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ** | 34 | 28,900 |

#### 20.3.2 –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ –∫–æ–¥–µ

```
JavaDoc –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏: ~5% –æ—Ç –∫–æ–¥–∞
Inline –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏: ~8% –æ—Ç –∫–æ–¥–∞
TODO/FIXME –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏: 127
```

**–ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤:**
- ‚úÖ –•–æ—Ä–æ—à–∏–µ: 35%
- ‚ö†Ô∏è –£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω—ã–µ: 45%
- ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç: 20%

### 20.4 –ú–µ—Ç—Ä–∏–∫–∏ –∫–æ–¥–∞

#### 20.4.1 –¶–∏–∫–ª–∏—á–µ—Å–∫–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å

| –ö–ª–∞—Å—Å | –°–ª–æ–∂–Ω–æ—Å—Ç—å | –°—Ç–∞—Ç—É—Å |
|-------|-----------|--------|
| **MainApp** | 18 | ‚ö†Ô∏è –í—ã—Å–æ–∫–∞—è |
| **PlayerComponent** | 22 | ‚ùå –û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è |
| **EnemyComponent** | 20 | ‚ùå –û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è |
| **GameMap** | 12 | ‚úÖ –ü—Ä–∏–µ–º–ª–µ–º–∞—è |
| **ModuleManager** | 8 | ‚úÖ –ù–∏–∑–∫–∞—è |

**–¶–µ–ª—å:** –°–Ω–∏–∑–∏—Ç—å —Å–ª–æ–∂–Ω–æ—Å—Ç—å –≤—Å–µ—Ö –∫–ª–∞—Å—Å–æ–≤ –¥–æ <15

#### 20.4.2 Duplication (–¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞)

**–û–±–Ω–∞—Ä—É–∂–µ–Ω–æ:**
- ~3,500 —Å—Ç—Ä–æ–∫ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–¥–∞
- ~7% –æ—Ç –æ–±—â–µ–≥–æ –æ–±—ä—ë–º–∞
- –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Å—Ç–∞:
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–ª–ª–∏–∑–∏–π (–ø–æ—Ö–æ–∂–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏)
  - –ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤ (–¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞)
  - –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π (copy-paste)

**–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è:**
- –í—ã–¥–µ–ª–µ–Ω–∏–µ —É—Ç–∏–ª–∏—Ç–∞—Ä–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤
- –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑–æ–≤—ã—Ö –∫–ª–∞—Å—Å–æ–≤
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤

#### 20.4.3 Code Coverage

**–ü–æ–∫—Ä—ã—Ç–∏–µ –ø–æ —Å–∏—Å—Ç–µ–º–∞–º:**

| –°–∏—Å—Ç–µ–º–∞ | –ü–æ–∫—Ä—ã—Ç–∏–µ | –¶–µ–ª—å |
|---------|----------|------|
| **–ú–æ–¥—É–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞** | 70% | 80% |
| **–°–∏—Å—Ç–µ–º—ã –∫–æ–ª–ª–∏–∑–∏–π** | 60% | 85% |
| **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–≥—Ä–æ–∫–∞** | 40% | 70% |
| **–°–∏—Å—Ç–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–π** | 50% | 75% |
| **UI/HUD** | 30% | 65% |
| **–õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è** | 10% | 60% |
| **–ö–∞—Ä—Ç—ã** | 65% | 80% |
| **–û–±—â–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ** | **15%** | **70%** |

### 20.5 –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

#### 20.5.1 –ß–∞—Å—Ç–æ—Ç–∞ –∫–∞–¥—Ä–æ–≤

| –°—Ü–µ–Ω–∞ | FPS | –°—Ç–∞—Ç—É—Å |
|-------|-----|--------|
| **–ú–µ–Ω—é** | 60 | ‚úÖ –û—Ç–ª–∏—á–Ω–∞—è |
| **–ü—É—Å—Ç–∞—è –∫–æ–º–Ω–∞—Ç–∞** | 60 | ‚úÖ –û—Ç–ª–∏—á–Ω–∞—è |
| **5 –≤—Ä–∞–≥–æ–≤** | 58-60 | ‚úÖ –û—Ç–ª–∏—á–Ω–∞—è |
| **10 –≤—Ä–∞–≥–æ–≤** | 55-58 | ‚úÖ –•–æ—Ä–æ—à–∞—è |
| **20 –≤—Ä–∞–≥–æ–≤** | 50-55 | ‚ö†Ô∏è –£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–∞—è |
| **50 –≤—Ä–∞–≥–æ–≤** | 35-45 | ‚ùå –ù–∏–∑–∫–∞—è |
| **–ú–∞–∫—Å–∏–º—É–º (100)** | 25-35 | ‚ùå –ù–∏–∑–∫–∞—è |

**–¶–µ–ª—å:** 60 FPS –≤ –ª—é–±–æ–π —Å–∏—Ç—É–∞—Ü–∏–∏

#### 20.5.2 –ü–∞–º—è—Ç—å

| –°–æ–±—ã—Ç–∏–µ | RAM | –°—Ç–∞—Ç—É—Å |
|---------|-----|--------|
| **–ó–∞–ø—É—Å–∫** | 150 MB | ‚úÖ |
| **–í –∏–≥—Ä–µ (10 –≤—Ä–∞–≥–æ–≤)** | 200 MB | ‚úÖ |
| **–ü–∏–∫ (50 –≤—Ä–∞–≥–æ–≤)** | 350 MB | ‚ö†Ô∏è |
| **–ü–æ—Å–ª–µ 2 —á–∞—Å–æ–≤ –∏–≥—Ä—ã** | 380 MB | ‚ö†Ô∏è |
| **–¶–µ–ª—å** | < 500 MB | ‚úÖ |

### 20.6 –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –º–µ—Ç—Ä–∏–∫–∏

#### 20.6.1 –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```
–í—Å–µ–≥–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π: 42
‚îú‚îÄ‚îÄ –ò–≥—Ä–æ–≤—ã–µ: 2 (FXGL, AnimateFX)
‚îú‚îÄ‚îÄ JSON/YAML: 5 (Jackson)
‚îú‚îÄ‚îÄ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ: 3 (SLF4J, Logback)
‚îú‚îÄ‚îÄ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: 8 (JUnit, Mockito, TestFX)
‚îú‚îÄ‚îÄ –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑: 3 (SpotBugs, Checkstyle)
‚îî‚îÄ‚îÄ –î—Ä—É–≥–∏–µ: 21
```

**–†–∞–∑–º–µ—Ä –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:** ~25 MB

#### 20.6.2 –†–∞–∑–º–µ—Ä –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–∞

```
royal-demons.jar - 47 MB
‚îú‚îÄ‚îÄ –ö–ª–∞—Å—Å—ã: 1.2 MB
‚îú‚îÄ‚îÄ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: 25 MB
‚îú‚îÄ‚îÄ –†–µ—Å—É—Ä—Å—ã:
‚îÇ   ‚îú‚îÄ‚îÄ –¢–µ–∫—Å—Ç—É—Ä—ã: 15 MB
‚îÇ   ‚îú‚îÄ‚îÄ –ê—É–¥–∏–æ: 5 MB
‚îÇ   ‚îú‚îÄ‚îÄ –ö–∞—Ä—Ç—ã: 0.5 MB
‚îÇ   ‚îî‚îÄ‚îÄ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è: 0.1 MB
‚îî‚îÄ‚îÄ –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ: 0.2 MB
```

### 20.7 –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞

#### 20.7.1 Checkstyle

```
Violations: 94
‚îú‚îÄ‚îÄ –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: 35
‚îú‚îÄ‚îÄ –ò–º–µ–Ω–æ–≤–∞–Ω–∏–µ: 22
‚îú‚îÄ‚îÄ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: 18
‚îú‚îÄ‚îÄ –ö–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ: 12
‚îî