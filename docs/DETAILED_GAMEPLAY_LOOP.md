# Детальная петля геймплея и система прогрессии

## Основная петля геймплея (Core Gameplay Loop)

### 1. Запуск и подготовка
```
Главное меню → Выбор сложности → Генерация подземелья → Спавн в стартовой комнате
```

### 2. Исследовательская фаза
```
Движение по комнатам → Сбор ресурсов → Обнаружение врагов → Сражения
```

### 3. Комбатная фаза
```
Обнаружение врага → Инициация боя → Применение тактик → Победа/поражение
```

### 4. Фаза награды
```
Победа → Получение опыта/лута → Проверка достижений → Продолжение исследования
```

### 5. Прогрессия
```
Набор опыта → Повышение уровня → Разблокировка способностей → Увеличение сложности
```

## Система прогрессии

### Уровни и опыт
- **Начальный уровень**: 1
- **Опыт за убийство врага**: 10-50 XP (в зависимости от типа)
- **Опыт за босса**: 500-1000 XP
- **Формула опыта**: `100 * 1.15^level`

### Награды
- **Золото**: Базовая валюта для улучшений
- **Оружие**: 9 типов с уникальными механиками
- **Зелья**: Health, Rage, специальные эффекты
- **Достижения**: 8 базовых + скрытые

### Балансировка
- **Множители здоровья**: 0.75 (easy), 1.0 (normal), 1.5 (hard)
- **Множители урона**: 0.8 (easy), 1.0 (normal), 1.3 (hard)
- **Дроп редкости**: Обычный, Редкий, Эпический

## Система наград и мотивации

### Мгновенные награды
- XP за убийство врага
- Золото за лут
- Визуальные эффекты (числа урона)

### Краткосрочные цели
- Очистка комнаты
- Поиск сундука
- Победа над мини-боссом

### Среднесрочные цели
- Повышение уровня
- Разблокировка нового оружия
- Выполнение достижений

### Долгосрочные цели
- Победа над финальным боссом
- Открытие всех достижений
- Прохождение на высокой сложности

## Петля удержания игрока (Retention Loop)

### 1. Сессия (15-30 минут)
```
Быстрый прогресс → Видимые результаты → Желание продолжить
```

### 2. Игровая сессия (1-2 часа)
```
Исследование → Прокачка → Новые открытия → Удовлетворение
```

### 3. Долгосрочное удержание
```
Мастерство → Соревнование (будущие лидерборды) → Контент-прогрессия
```

## Ключевые метрики для отслеживания

### Геймплейные метрики
- **Time to first kill**: < 2 минуты
- **Room completion rate**: > 80%
- **Death frequency**: 1-3 раза за сессию
- **Weapon switch frequency**: 3-5 раз за сессию

### Прогрессионные метрики
- **Level up rate**: 1-2 уровня за сессию
- **Achievement unlock rate**: 1+ за 3 сессии
- **Gold accumulation rate**: 100-500 за сессия

### Метрики удержания
- **Session length**: 15-45 минут
- **Return rate**: > 60% на следующий день
- **Completion rate**: > 40% до босса

## Точки принятия решений игрока

### Тактические решения
- Какое оружие использовать
- Когда пить зелья
- Какой порядок атаки врагов

### Стратегические решения
- Какую комнату исследовать следующей
- Стоит ли рисковать ради сундука
- Когда отступать

### Прогрессионные решения
- Какую характеристику улучшать
- Какое достижение стремиться разблокировать
- Когда повышать сложность

## Балансировка рисков и наград

### Низкий риск / Низкая награда
- Обычные комнаты
- Обычные враги
- Базовый лут

### Средний риск / Средняя награда
- Комнаты с сокровищами
- Мини-боссы
- Редкое оружие

### Высокий риск / Высокая награда
- Босс-комнаты
- Секретные комнаты
- Уникальные предметы